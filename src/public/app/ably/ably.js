/*! For license information please see ably.js.LICENSE.txt */
(()=>{var e={246:(e,t,a)=>{const r=a(733);e.exports={hasBadge:()=>r.get("hasBadge"),grabBadgeList:async()=>await(await fetch("/badge.json")).json(),isBadgeCode:(e,t)=>{for(const[a,r]of Object.entries(e))if(a===t)return r},giveBadge:e=>{r.set("hasBadge",e,{expires:365})},migrateBadge:()=>{"1"==r.get("hasBadge")&&r.set("hasBadge","/app/chat/verified-icon.png",{expires:365}),"/app/chat/verified-icon.png"==r.get("hasBadge")&&r.set("admin","1",{expires:365})}}},814:(e,t,a)=>{const r=a(733);let n={chat:async(e,t,a)=>{if(console.log(e),e.startsWith("/ban")){if(console.log("Is ban"),"1"==r.get("admin")){console.log("Valid");let a=e.replace("/ban ","");console.log(a),await t(a)}}else if(e.startsWith("/unban")&&(console.log("Is unban"),"1"==r.get("admin"))){console.log("Valid");let t=e.replace("/unban ","");console.log(t),await a(t)}},message:async e=>{console.log(e)},connect:async e=>{console.log(`${e} joined!`)},join:async e=>{console.log(`User joined room with code ${e}`)}};e.exports=n},923:(e,t,a)=>{const r={},n=a(814);r.onChat=n.chat,r.onMessage=n.message,r.onConnect=n.connect,r.onLocalUserJoin=n.join,e.exports=r},89:e=>{e.exports=async(e,t)=>{const a=await e.history({limit:1e4});for(const e of a.items.reverse()){if(console.log(e),"chat"==e.name){const a=new String(e.data);let r=document.createElement("li");r.innerHTML=a,t.appendChild(r),window.scrollTo(0,document.body.scrollHeight)}if("chat_image"==e.name){const a=JSON.parse(new String(e.data));let r=document.createElement("li");console.log(a),r.innerHTML="<p>"+a[0]+": </p><img src='"+a[1]+"'>",t.appendChild(r),window.scrollTo(0,document.body.scrollHeight)}if("connect"==e.name){const a=new String(e.data);let r=document.createElement("li");r.innerHTML=a+" joined!",t.appendChild(r),window.scrollTo(0,document.body.scrollHeight)}}}},376:e=>{e.exports=async()=>{const e=localStorage.getItem("userInfo");if(e){console.log("USER INFO FOUND!"),document.getElementById("login").remove();const t=JSON.parse(e);console.log(t),alert("Logged in as "+t.nickname)}else document.getElementById("login").addEventListener("click",(()=>{document.location.href="https://st-collab-oauth.vercel.app/app/login"}))}},640:e=>{!function(){"use strict";var t={d:function(e,a){for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};function r(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function n(){}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}t.r(a),t.d(a,{AuthManager:function(){return Dt},BaseAPI:function(){return x},BinaryResult:function(){return F},BytescaleApiClientConfigUtils:function(){return M},BytescaleApiError:function(){return L},BytescaleGenericError:function(){return U},CacheApi:function(){return Y},CancelledError:function(){return q},CommonTypesNoOp:function(){return xe},FileApi:function(){return ie},FolderApi:function(){return ge},JSONApiResponse:function(){return G},JobApi:function(){return Se},UploadApi:function(){return Me},UploadManager:function(){return wt},UrlBuilder:function(){return We},UrlBuilderTypesNoOp:function(){return Ve},VoidApiResponse:function(){return D},encodeBytescaleQuerystringKVP:function(){return B},querystring:function(){return N}});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.locked=!1,this.queue=[]},(t=[{key:"safe",value:function(e){try{var t=this;return r(t.lock(),(function(){return function(e,t){try{var a=e()}catch(e){return t(!0,e)}return a&&a.then?a.then(t.bind(null,!1),t.bind(null,!0)):t(!1,a)}(e,(function(e,a){return t.unlock(),function(e,t){if(e)throw t;return t}(e,a)}))}))}catch(e){return Promise.reject(e)}}},{key:"lock",value:function(){try{var e=this;return r((t=function(t){e.locked=!0},(a=function(){if(e.locked){var t,a=new Promise((function(e){t=e}));if(void 0===t)throw new Error("unlockNext was undefined");return e.queue.push({resolve:t}),(r=a)&&r.then?r.then(n):Promise.resolve()}var r}())&&a.then?a.then(t):t()))}catch(e){return Promise.reject(e)}var t,a}},{key:"unlock",value:function(){if(!this.locked)throw new Error("Mutex is not locked.");var e=this.queue.shift();void 0!==e?e.resolve():this.locked=!1}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,a=[{key:"getMutex",value:function(){var t=e.mutexKey,a=window[t];return void 0===a&&(a=new c,window[t]=a),a}},{key:"setSession",value:function(t){window[e.stateKey]=t}},{key:"getSession",value:function(){if("undefined"!=typeof window)return window[e.stateKey]}}],null&&u(t.prototype,null),a&&u(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e){if("object"!=d(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}h.stateKey="BytescaleSessionState",h.mutexKey="BytescaleSessionStateMutex";var g=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,a=[{key:"debug",value:function(t){console.log(e.prefix(t))}},{key:"warn",value:function(t){console.warn(e.prefix(t))}},{key:"error",value:function(t){console.error(e.prefix(t))}},{key:"prefix",value:function(e){return"[bytescale-sdk] ".concat(e)}}],null&&p(t.prototype,null),a&&p(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a}();function m(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function _(e,t){try{var a=e()}catch(e){return t(e)}return a&&a.then?a.then(void 0,t):a}function k(){}function w(e,t){return e&&e.then?e.then(t):t(e)}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function O(e,t,a){return t=j(t),function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,a||[],j(e).constructor):t.apply(e,a))}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function C(e){var t="function"==typeof Map?new Map:void 0;return C=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return function(e,t,a){if(P())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var n=new(e.bind.apply(e,r));return a&&A(n,a.prototype),n}(e,arguments,j(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),A(a,e)},C(e)}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function T(e,t,a){return t&&I(e.prototype,t),a&&I(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function E(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=b(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var M=function(){function e(){R(this,e)}return T(e,null,[{key:"getApiUrl",value:function(t){var a;return null!==(a=t.apiUrl)&&void 0!==a?a:e.defaultApiUrl}},{key:"getCdnUrl",value:function(t){var a;return null!==(a=t.cdnUrl)&&void 0!==a?a:e.defaultCdnUrl}},{key:"getFetchApi",value:function(e){var t;return null!==(t=e.fetchApi)&&void 0!==t?t:fetch}},{key:"getAccountId",value:function(t){var a,r,n;if(e.specialApiKeys.includes(t.apiKey))n=e.specialApiKeyAccountId;else if((n=null!==(r=null===(a=t.apiKey.split("_")[1])||void 0===a?void 0:a.substr(0,e.accountIdLength))&&void 0!==r?r:"").length!==e.accountIdLength)throw new Error("Invalid Bytescale API key.");return n}},{key:"validate",value:function(t){var a;if(void 0===(null!=t?t:void 0))throw new Error("Config parameter required.");if(void 0===(null!==(a=t.apiKey)&&void 0!==a?a:void 0))throw new Error("Please provide an API key via the 'apiKey' config parameter.");if(t.apiKey.trim()!==t.apiKey)throw new Error("API key needs trimming (whitespace detected).");e.getAccountId(t)}}])}();M.defaultApiUrl="https://api.bytescale.com",M.defaultCdnUrl="https://upcdn.io",M.specialApiKeys=["free","demo"],M.specialApiKeyAccountId="W142hJk",M.accountIdLength=7;var x=function(){function e(t){R(this,e),this.config=t,M.validate(t)}return T(e,[{key:"request",value:function(t,a,r){try{var n,o=this,s=o.config.apiKey;t.headers.Authorization="Bearer ".concat(s);var i=h.getSession();void 0!==(null==i?void 0:i.accessToken)&&(t.headers["Authorization-Token"]=i.accessToken);var c=(l={},u=M.defaultCdnUrl,f=M.getCdnUrl(o.config),(u=E(u))in l?Object.defineProperty(l,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):l[u]=f,l);return m(o.createFetchParams(t,a,void 0===r?void 0:null!==(n=c[r])&&void 0!==n?n:r),(function(t){var a=t.url,r=t.init;return e.fetch(a,r,Object.assign(Object.assign({},o.config),{isBytescaleApi:!0}))}))}catch(e){return Promise.reject(e)}var l,u,f}},{key:"encodeParam",value:function(e,t){if("filePath"===e){if(!t.startsWith("/"))throw new Error("The 'filePath' parameter must begin with a '/' character.");return t}return encodeURIComponent(t)}},{key:"createFetchParams",value:function(e,t,a){try{var r=(null!=a?a:M.getApiUrl(this.config))+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(r+="?"+N(e.query));var n=this.config.headers,o=Object.assign({},e.headers);return m(m(void 0===n?{}:"function"==typeof n?n():n,(function(a){var n=Object.assign(o,a);Object.keys(n).forEach((function(e){return void 0===n[e]?delete n[e]:{}}));var s="function"==typeof t?t:function(){return m(t)},i={method:e.method,headers:n,body:e.body},c=Object.assign({},i);return m(s({init:i,context:e}),(function(e){var t=Object.assign(c,e),a=Object.assign(Object.assign({},t),{body:JSON.stringify(t.body)});return{url:r,init:a}}))}),void 0===n||!("function"==typeof n)))}catch(e){return Promise.reject(e)}}}],[{key:"fetch",value:function(e,t,a){try{var r,n,o;return m(w(_((function(){return m(M.getFetchApi(a)(e,Object.assign(Object.assign({},t),{cache:"no-store"})),(function(e){o=e}))}),(function(t){throw new Error(a.isBytescaleApi?"Unable to resolve the Bytescale API: ".concat(t.message," If the problem persists, and your network connection is OK, then please contact support@bytescale.com and provide: (a) time of failed request in UTC (b) screenshot of failed network response header + body (c) screenshot of failed network request header + body (d) browser and OS version."):"Unable to resolve URL (".concat(e,"): ").concat(t.message))})),(function(s){var i,c;return o.status>=200&&o.status<300?o:(i=function(a){throw new Error("Failure status code (".concat(o.status,") received for request: ").concat(null!==(n=t.method)&&void 0!==n?n:"GET"," ").concat(e))},(c=function(){if(a.isBytescaleApi){var e=void 0,t=void 0;return w(_((function(){return m(o.text(),(function(a){e=a,t=JSON.parse(e)}))}),k),(function(){if("string"==typeof(null===(r=null==t?void 0:t.error)||void 0===r?void 0:r.code))throw new L(t);throw!0===a.debug&&(g.debug("Error response header:"),o.headers.forEach((function(e,t){return g.debug("".concat(t,": ").concat(e))})),g.debug("Error response body:"),g.debug(null!=e?e:"<empty>")),new U(o,e,t)}))}}())&&c.then?c.then(i):i())})))}catch(e){return Promise.reject(e)}}}])}(),q=function(e){function t(){var e;return R(this,t),(e=O(this,t,["Operation cancelled by caller."])).name="CancelledError",e}return S(t,e),T(t)}(C(Error)),U=function(e){function t(e,a,r){var n;return R(this,t),(n=O(this,t,["Unable to connect to the Bytescale API (".concat(e.status,"): please try again.")])).response=e,n.responseText=a,n.responseJson=r,n.name="BytescaleGenericError",n}return S(t,e),T(t)}(C(Error)),L=function(e){function t(e){var a;return R(this,t),(a=O(this,t,[e.error.message])).name="BytescaleApiError",a.errorCode=e.error.code,a.details=e.error.details,a}return S(t,e),T(t)}(C(Error));function N(e){var t,a;return(t=Object.keys(e),a="artifact",[].concat(v(t.filter((function(e){return e!==a}))),v(t.filter((function(e){return e===a}))))).map((function(t){return function(e,t){return t instanceof Object?N(t):B(e,String(t))}(t,e[t])})).filter((function(e){return e.length>0})).join("&")}function B(e,t){return"a"===e||"artifact"===e?"".concat(e,"=").concat(encodeURIComponent(t).replace(/%2F/g,"/")):"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))}var G=function(){return T((function e(t){R(this,e),this.raw=t}),[{key:"value",value:function(){try{return m(this.raw.json())}catch(e){return Promise.reject(e)}}}])}(),D=function(){return T((function e(t){R(this,e),this.raw=t}),[{key:"value",value:function(){return m(void 0)}}])}(),F=function(){return T((function e(t){R(this,e),this.raw=t}),[{key:"stream",value:function(){if(this.raw.bodyUsed)throw new Error("Response body has already been consumed.");if(null===this.raw.body)throw new Error("Response body does not exist.");return this.raw.body}},{key:"text",value:function(){try{return m(this.raw.text())}catch(e){return Promise.reject(e)}}},{key:"blob",value:function(){try{return m(this.raw.blob())}catch(e){return Promise.reject(e)}}},{key:"json",value:function(){try{return m(this.raw.json())}catch(e){return Promise.reject(e)}}}])}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function W(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function V(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function J(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=H(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}function K(e,t,a){return t=Q(t),function(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,$()?Reflect.construct(t,a||[],Q(e).constructor):t.apply(e,a))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}var Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),a=t,(r=[{key:"resetCache",value:function(e){try{return W(this.request({path:"/v2/accounts/{accountId}/cache/reset".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:{"Content-Type":"application/json"},query:{},body:e.resetCacheRequest},void 0,[][0]),(function(e){return W(new G(e).value())}))}catch(e){return Promise.reject(e)}}}])&&V(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(x);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function te(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ae(r.key),r)}}function ae(e){var t=function(e){if("object"!=Z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=Z(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:t+""}function re(e,t,a){return t=oe(t),function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ne()?Reflect.construct(t,a||[],oe(e).constructor):t.apply(e,a))}function ne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ne=function(){return!!e})()}function oe(e){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(e)}function se(e,t){return se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},se(e,t)}var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&se(e,t)}(t,e),a=t,(r=[{key:"copyFile",value:function(e){try{return ee(this.request({path:"/v2/accounts/{accountId}/files/copy".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:{"Content-Type":"application/json"},query:{},body:e.copyFileRequest},void 0,[][0]),(function(e){return ee(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"copyFileBatch",value:function(e){try{return ee(this.request({path:"/v2/accounts/{accountId}/files/copy/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:{"Content-Type":"application/json"},query:{},body:e.copyFileBatchRequest},void 0,[][0]),(function(e){return ee(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"deleteFile",value:function(e){try{var t={};return void 0!==e.filePath&&(t.filePath=e.filePath),ee(this.request({path:"/v2/accounts/{accountId}/files".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:{},query:t},void 0,[][0]),(function(e){return ee(new D(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"deleteFileBatch",value:function(e){try{return ee(this.request({path:"/v2/accounts/{accountId}/files/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:{"Content-Type":"application/json"},query:{},body:e.deleteFileBatchRequest},void 0,[][0]),(function(e){return ee(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"downloadFile",value:function(e){try{var t=this,a={};return void 0!==e.cache&&(a.cache=e.cache),void 0!==e.cacheTtl&&(a.cache_ttl=e.cacheTtl),void 0!==e.cacheTtl404&&(a.cache_ttl_404=e.cacheTtl404),void 0!==e.version&&(a.version=e.version),ee(t.request({path:"/{accountId}/raw{filePath}".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),t.encodeParam("filePath",e.filePath)),method:"GET",headers:{},query:a},void 0,"https://upcdn.io"),(function(e){return new F(e)}))}catch(e){return Promise.reject(e)}}},{key:"getFileDetails",value:function(e){try{var t={};return void 0!==e.filePath&&(t.filePath=e.filePath),ee(this.request({path:"/v2/accounts/{accountId}/files/details".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),(function(e){return ee(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"processFile",value:function(e){try{var t=this,a={};return void 0!==e.artifact&&(a.artifact=e.artifact),void 0!==e.cache&&(a.cache=e.cache),void 0!==e.cacheOnly&&(a.cache_only=e.cacheOnly),void 0!==e.cachePerm&&(a.cache_perm=e.cachePerm),void 0!==e.cacheTtl&&(a.cache_ttl=e.cacheTtl),void 0!==e.cacheTtl404&&(a.cache_ttl_404=e.cacheTtl404),void 0!==e.transformationParams&&(a.transformationParams=e.transformationParams),void 0!==e.version&&(a.version=e.version),ee(t.request({path:"/{accountId}/{transformation}{filePath}".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),t.encodeParam("filePath",e.filePath)).replace("{".concat("transformation","}"),t.encodeParam("transformation",e.transformation)),method:"GET",headers:{},query:a},void 0,"https://upcdn.io"),(function(e){return new F(e)}))}catch(e){return Promise.reject(e)}}},{key:"processFileAndSave",value:function(e){try{var t=this,a={};void 0!==e.transformationParams&&(a.transformationParams=e.transformationParams);return ee(t.request({path:"/{accountId}/save/{transformation}{filePath}".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("filePath","}"),t.encodeParam("filePath",e.filePath)).replace("{".concat("transformation","}"),t.encodeParam("transformation",e.transformation)),method:"POST",headers:{"Content-Type":"application/json"},query:a,body:e.processFileAndSaveRequest},void 0,"https://upcdn.io"),(function(e){return ee(new G(e).value())}))}catch(e){return Promise.reject(e)}}}])&&te(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(x);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function le(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ue(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fe(r.key),r)}}function fe(e){var t=function(e){if("object"!=ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=ce(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}function he(e,t,a){return t=pe(t),function(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,de()?Reflect.construct(t,a||[],pe(e).constructor):t.apply(e,a))}function de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(de=function(){return!!e})()}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function ye(e,t){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ye(e,t)}var ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),he(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ye(e,t)}(t,e),a=t,(r=[{key:"copyFolder",value:function(e){try{return le(this.request({path:"/v2/accounts/{accountId}/folders/copy".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:{"Content-Type":"application/json"},query:{},body:e.copyFolderRequest},void 0,[][0]),(function(e){return le(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"copyFolderBatch",value:function(e){try{return le(this.request({path:"/v2/accounts/{accountId}/folders/copy/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:{"Content-Type":"application/json"},query:{},body:e.copyFolderBatchRequest},void 0,[][0]),(function(e){return le(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"deleteFolder",value:function(e){try{return le(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:{"Content-Type":"application/json"},query:{},body:e.deleteFolderRequest},void 0,[][0]),(function(e){return le(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"deleteFolderBatch",value:function(e){try{return le(this.request({path:"/v2/accounts/{accountId}/folders/batch".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"DELETE",headers:{"Content-Type":"application/json"},query:{},body:e.deleteFolderBatchRequest},void 0,[][0]),(function(e){return le(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"getFolderDetails",value:function(e){try{var t={};return void 0!==e.folderPath&&(t.folderPath=e.folderPath),le(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),(function(e){return le(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"listFolder",value:function(e){try{var t={};return void 0!==e.cursor&&(t.cursor=e.cursor),void 0!==e.dryRun&&(t.dryRun=e.dryRun),void 0!==e.folderPath&&(t.folderPath=e.folderPath),void 0!==e.includeFiles&&(t.includeFiles=e.includeFiles),void 0!==e.includeOverriddenStorage&&(t.includeOverriddenStorage=e.includeOverriddenStorage),void 0!==e.includePhysicalFolders&&(t.includePhysicalFolders=e.includePhysicalFolders),void 0!==e.includeVirtualFolders&&(t.includeVirtualFolders=e.includeVirtualFolders),void 0!==e.limit&&(t.limit=e.limit),void 0!==e.recursive&&(t.recursive=e.recursive),le(this.request({path:"/v2/accounts/{accountId}/folders/list".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),(function(e){return le(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"putFolder",value:function(e){try{return le(this.request({path:"/v2/accounts/{accountId}/folders".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"PUT",headers:{"Content-Type":"application/json"},query:{},body:e.putFolderRequest},void 0,[][0]),(function(e){return le(new G(e).value())}))}catch(e){return Promise.reject(e)}}}])&&ue(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(x);function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function _e(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function ke(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function we(e){var t=function(e){if("object"!=me(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=me(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==me(t)?t:t+""}function be(e,t,a){return t=ze(t),function(e,t){if(t&&("object"===me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ve()?Reflect.construct(t,a||[],ze(e).constructor):t.apply(e,a))}function ve(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ve=function(){return!!e})()}function ze(e){return ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ze(e)}function Oe(e,t){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Oe(e,t)}var Se=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),be(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oe(e,t)}(t,e),a=t,(r=[{key:"cancelJob",value:function(e){try{var t=this;return _e(t.request({path:"/v2/accounts/{accountId}/jobs/{jobType}/{jobId}".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("jobId","}"),t.encodeParam("jobId",e.jobId)).replace("{".concat("jobType","}"),t.encodeParam("jobType",e.jobType)),method:"DELETE",headers:{},query:{}},void 0,[][0]),(function(e){return _e(new D(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"getJob",value:function(e){try{var t=this;return _e(t.request({path:"/v2/accounts/{accountId}/jobs/{jobType}/{jobId}".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("jobId","}"),t.encodeParam("jobId",e.jobId)).replace("{".concat("jobType","}"),t.encodeParam("jobType",e.jobType)),method:"GET",headers:{},query:{}},void 0,[][0]),(function(e){return _e(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"listRecentJobs",value:function(e){try{var t={};return e.jobType&&(t.jobType=e.jobType),_e(this.request({path:"/v2/accounts/{accountId}/jobs".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"GET",headers:{},query:t},void 0,[][0]),(function(e){return _e(new G(e).value())}))}catch(e){return Promise.reject(e)}}}])&&ke(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(x);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Pe(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ae(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function je(e){var t=function(e){if("object"!=Ce(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=Ce(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:t+""}function Re(e,t,a){return t=Te(t),function(e,t){if(t&&("object"===Ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ie()?Reflect.construct(t,a||[],Te(e).constructor):t.apply(e,a))}function Ie(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ie=function(){return!!e})()}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}var Me=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Re(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(t,e),a=t,(r=[{key:"beginMultipartUpload",value:function(e){try{return Pe(this.request({path:"/v2/accounts/{accountId}/uploads".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:{"Content-Type":"application/json"},query:{},body:e.beginMultipartUploadRequest},void 0,[][0]),(function(e){return Pe(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"completeUploadPart",value:function(e){try{var t=this;return Pe(t.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts/{uploadPartIndex}".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),t.encodeParam("uploadId",e.uploadId)).replace("{".concat("uploadPartIndex","}"),t.encodeParam("uploadPartIndex",e.uploadPartIndex)),method:"PUT",headers:{"Content-Type":"application/json"},query:{},body:e.completeUploadPartRequest},void 0,[][0]),(function(e){return Pe(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"getUploadPart",value:function(e){try{var t=this;return Pe(t.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts/{uploadPartIndex}".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),t.encodeParam("uploadId",e.uploadId)).replace("{".concat("uploadPartIndex","}"),t.encodeParam("uploadPartIndex",e.uploadPartIndex)),method:"GET",headers:{},query:{}},void 0,[][0]),(function(e){return Pe(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"listUploadParts",value:function(e){try{var t=this;return Pe(t.request({path:"/v2/accounts/{accountId}/uploads/{uploadId}/parts".replace("{".concat("accountId","}"),t.encodeParam("accountId",e.accountId)).replace("{".concat("uploadId","}"),t.encodeParam("uploadId",e.uploadId)),method:"GET",headers:{},query:{}},void 0,[][0]),(function(e){return Pe(new G(e).value())}))}catch(e){return Promise.reject(e)}}},{key:"uploadFromUrl",value:function(e){try{return Pe(this.request({path:"/v2/accounts/{accountId}/uploads/url".replace("{".concat("accountId","}"),this.encodeParam("accountId",e.accountId)),method:"POST",headers:{"Content-Type":"application/json"},query:{},body:e.uploadFromUrlRequest},void 0,[][0]),(function(e){return Pe(new G(e).value())}))}catch(e){return Promise.reject(e)}}}])&&Ae(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(x),xe=!1;function qe(e){throw new Error("Didn't expect to get here: ".concat(JSON.stringify(e)))}function Ue(e){return void 0!==e[1]&&null!==e[1]}function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,s,i=[],c=!0,l=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(r=o.call(a)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(l)throw n}}return i}}(e,t)||Ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){if(e){if("string"==typeof e)return De(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function Fe(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function He(e){var t=function(e){if("object"!=Le(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=Le(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Le(t)?t:t+""}var We=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"url",value:function(e){var t;return void 0===(null===(t=e.options)||void 0===t?void 0:t.transformation)?this.raw(e):this.transformation(e,e.options)}},{key:"raw",value:function(e){var t,a=this.getBaseUrl(e,"raw"),r=this.getCommonQueryParams(null!==(t=e.options)&&void 0!==t?t:{});return this.addQueryParams(a,r)}},{key:"transformation",value:function(e,t){var a,r=this.getBaseUrl(e,"preset"===t.transformation?t.transformationPreset:t.transformation),n="preset"===t.transformation?[]:this.getTransformationParams(t),o=this.getCommonQueryParams(null!==(a=e.options)&&void 0!==a?a:{}),s=this.getCommonTransformationQueryParams(t);return this.addQueryParams(r,[].concat(Be(n),Be(o),Be(s)))}},{key:"getBaseUrl",value:function(e,t){var a,r,n=null!==(r=null===(a=e.options)||void 0===a?void 0:a.cdnUrl)&&void 0!==r?r:M.defaultCdnUrl,o=encodeURIComponent(e.filePath).replace(/%2F/g,"/");return"".concat(n,"/").concat(e.accountId,"/").concat(t).concat(o)}},{key:"getCommonTransformationQueryParams",value:function(e){return this.makeQueryParams({cacheOnly:null,cachePermanently:null,artifact:null},{cacheOnly:"cache_only",cachePermanently:"cache_perm"})(e)}},{key:"getCommonQueryParams",value:function(e){return this.makeQueryParams({cache:null,cacheTtl:null,cacheTtl404:null,version:null,forceDownloadPrompt:null},{cacheTtl:"cache_ttl",cacheTtl404:"cache_ttl_404",forceDownloadPrompt:"download"})(e)}},{key:"makeQueryParams",value:function(e,t){return function(a){var r=[];return Object.keys(e).forEach((function(e){var n,o=a[e];void 0!==o&&r.push([null!==(n=t[e])&&void 0!==n?n:e,o.toString()])})),r}}},{key:"getTransformationParams",value:function(e){var t=e.transformationParams;if(void 0===t)return[];var a=function(e){return Object.entries(e).filter(Ue).map((function(e){var t=Ne(e,2);return[t[0],t[1].toString()]}))};return Array.isArray(t)?t.flatMap(a):a(t)}},{key:"addQueryParams",value:function(e,t){return 0===t.length?e:"".concat(e,"?").concat(t.map((function(e){var t=Ne(e,2);return B(t[0],t[1])})).join("&"))}}],null&&Fe(e.prototype,null),t&&Fe(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),Ve=!1;function Je(){}function Ke(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function $e(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Qe(e,t,a){if(!e.s){if(a instanceof Xe){if(!a.s)return void(a.o=Qe.bind(null,e,t));1&t&&(t=a.s),a=a.v}if(a&&a.then)return void a.then(Qe.bind(null,e,t),Qe.bind(null,e,2));e.s=t,e.v=a;var r=e.o;r&&r(e)}}var Xe=function(){function e(){}return e.prototype.then=function(t,a){var r=new e,n=this.s;if(n){var o=1&n?t:a;if(o){try{Qe(r,1,o(this.v))}catch(e){Qe(r,2,e)}return r}return this}return this.o=function(e){try{var n=e.v;1&e.s?Qe(r,1,t?t(n):n):a?Qe(r,1,a(n)):Qe(r,2,n)}catch(e){Qe(r,2,e)}},r},e}();function Ye(e){return e instanceof Xe&&1&e.s}function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e){return function(e){if(Array.isArray(e))return tt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?tt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function at(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}function rt(e){var t=function(e){if("object"!=Ze(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=Ze(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:t+""}function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function ot(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,st(r.key),r)}}function st(e){var t=function(e){if("object"!=nt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=nt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==nt(t)?t:t+""}function it(e,t,a){return t=lt(t),function(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ct()?Reflect.construct(t,a||[],lt(e).constructor):t.apply(e,a))}function ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ct=function(){return!!e})()}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}var ft=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}(t,e),a=t,(r=[{key:"processUploadSource",value:function(e){if("string"==typeof e)return{type:"Blob",value:new Blob([e],{type:this.stringMimeType})};if(void 0!==e.byteLength)return{type:"ArrayBuffer",value:e};if(void 0!==e.size)return{type:"Blob",value:e};throw new Error("Unsupported type for 'data' parameter. Please provide a String, Blob, ArrayBuffer, or File object (from a file input element).")}},{key:"getPreUploadInfoPartial",value:function(e,t){switch(t.type){case"Blob":return this.getBlobInfo(t);case"ArrayBuffer":return{mime:void 0,size:t.value.byteLength,originalFileName:void 0,maxConcurrentUploadParts:void 0};default:qe(t)}}},{key:"preUpload",value:function(e){}},{key:"postUpload",value:function(e){return t&&t.then||(t=Promise.resolve(t)),t;var t}},{key:"getRequestBody",value:function(e,t){return-1===e.range.inclusiveEnd?new Blob:t.value.slice(e.range.inclusiveStart,e.range.inclusiveEnd+1)}}])&&ot(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.stringMimeType="text/plain",this.defaultMaxConcurrentUploadParts=4,this.intervalMs=500,this.uploadApi=new Me(t),this.accountId=M.getAccountId(t)},(t=[{key:"upload",value:function(e){try{var t=this;t.assertNotCancelled(e);var a=t.processUploadSource(e.data),r=t.getPreUploadInfo(e,a),n=r.size,o=t.makeOnProgressForPartFactory(e,n),s=t.preUpload(a);return void 0!==e.onProgress&&e.onProgress(t.makeProgressEvent(0,n)),Ke(t.beginUpload(e,r),(function(n){var i,c,l,u=n.uploadParts.count,f=et(Array(u).keys()),h=t.makeCancellationMethods(),d=h.cancel,p=h.addCancellationHandler,y=setInterval(t.onIntervalTick(e,d),t.intervalMs);return l=function(){var e=i.flatMap((function(e){return"Completed"===e.status?[e.etag]:[]}))[0];return Object.assign(Object.assign({},n.file),{etag:e})},(c=function(c,l){try{var u=Ke(t.mapAsync(f,r.maxConcurrentUploadParts,$e((function(r){return t.uploadPart(e,a,r,n,o(),p)}))),(function(e){return i=e,function(e){return e&&e.then?e.then(Je):Promise.resolve()}(t.postUpload(s))}))}catch(e){return l(!0,e)}return u&&u.then?u.then(l.bind(null,!1),l.bind(null,!0)):l(!1,u)}(0,(function(e,t){return clearInterval(y),function(e,t){if(e)throw t;return t}(e,t)})))&&c.then?c.then(l):l()}))}catch(e){return Promise.reject(e)}}},{key:"getBlobInfo",value:function(e){var t=e.value,a=t.name,r=t.size,n=t.type;return{mime:""===n?void 0:n,size:r,originalFileName:a,maxConcurrentUploadParts:void 0}}},{key:"onIntervalTick",value:function(e,t){var a=this;return function(){a.isCancelled(e)&&t()}}},{key:"makeCancellationMethods",value:function(){var e=[];return{cancel:function(){return e.forEach((function(e){return e()}))},addCancellationHandler:function(t){e.push(t)}}}},{key:"makeOnProgressForPartFactory",value:function(e,t){var a=this,r=e.onProgress;if(void 0===r)return function(){return function(){}};var n=0;return function(){var e=0;return function(o){var s=o-e;e+=s,n+=s,r(a.makeProgressEvent(n,t))}}}},{key:"makeProgressEvent",value:function(e,t){return{bytesTotal:t,bytesSent:e,progress:Math.round(e/t*100)}}},{key:"assertNotCancelled",value:function(e){if(this.isCancelled(e))throw new q}},{key:"isCancelled",value:function(e){var t;return!0===(null===(t=e.cancellationToken)||void 0===t?void 0:t.isCancelled)}},{key:"beginUpload",value:function(e,t){var a=t.size,r=t.mime,n=t.originalFileName;try{return Ke(this.uploadApi.beginMultipartUpload({accountId:this.accountId,beginMultipartUploadRequest:{metadata:e.metadata,mime:r,originalFileName:n,path:e.path,protocol:"1.1",size:a,tags:e.tags}}))}catch(e){return Promise.reject(e)}}},{key:"uploadPart",value:function(e,t,a,r,n,o){try{var s=this;return s.assertNotCancelled(e),Ke(s.getUploadPart(a,r),(function(i){return s.assertNotCancelled(e),Ke(s.putUploadPart(i,t,n,o),(function(t){return s.assertNotCancelled(e),Ke(s.uploadApi.completeUploadPart({accountId:s.accountId,uploadId:r.uploadId,uploadPartIndex:a,completeUploadPartRequest:{etag:t}}))}))}))}catch(e){return Promise.reject(e)}}},{key:"putUploadPart",value:function(e,t,a,r){try{var n=e.range.inclusiveEnd+1-e.range.inclusiveStart;return Ke(this.doPutUploadPart(e,n,t,a,r),(function(e){var t=e.status,r=e.etag;if(2!==Math.floor(t/100))throw new Error("Failed to upload part (".concat(t,")."));if(void 0===r)throw new Error("No 'etag' response header found in upload part response.");return a(n),r}))}catch(e){return Promise.reject(e)}}},{key:"getUploadPart",value:function(e,t){try{return Ke(0===e?t.uploadParts.first:this.uploadApi.getUploadPart({uploadId:t.uploadId,accountId:this.accountId,uploadPartIndex:e}))}catch(e){return Promise.reject(e)}}},{key:"getPreUploadInfo",value:function(e,t){var a,r,n,o=this.getPreUploadInfoPartial(e,t);return{maxConcurrentUploadParts:null!==(a=o.maxConcurrentUploadParts)&&void 0!==a?a:this.defaultMaxConcurrentUploadParts,originalFileName:null!==(r=e.originalFileName)&&void 0!==r?r:o.originalFileName,mime:null!==(n=e.mime)&&void 0!==n?n:o.mime,size:o.size}}},{key:"mapAsync",value:function(e,t,a){try{var r=[],n=et(e);return Ke(Promise.all(et(Array(t).keys()).map($e((function(){return function(e){if(e&&e.then)return e.then(Je)}(function(e,t,a){for(var r;;){var n=e();if(Ye(n)&&(n=n.v),!n)return o;if(n.then){r=0;break}var o=a();if(o&&o.then){if(!Ye(o)){r=1;break}o=o.s}if(t){var s=t();if(s&&s.then&&!Ye(s)){r=2;break}}}var i=new Xe,c=Qe.bind(null,i,2);return(0===r?n.then(u):1===r?o.then(l):s.then(f)).then(void 0,c),i;function l(r){o=r;do{if(t&&(s=t())&&s.then&&!Ye(s))return void s.then(f).then(void 0,c);if(!(n=e())||Ye(n)&&!n.v)return void Qe(i,1,o);if(n.then)return void n.then(u).then(void 0,c);Ye(o=a())&&(o=o.v)}while(!o||!o.then);o.then(l).then(void 0,c)}function u(e){e?(o=a())&&o.then?o.then(l).then(void 0,c):l(o):Qe(i,1,o)}function f(){(n=e())?n.then?n.then(u).then(void 0,c):u(n):Qe(i,1,o)}}((function(){return n.length>0}),void 0,(function(){var e=n.shift();return function(e){var t=e();if(t&&t.then)return t.then(Je)}((function(){if(void 0!==e){var t=r.push;return Ke(a(e),(function(e){t.call(r,e)}))}}))})))})))),(function(){return r}))}catch(e){return Promise.reject(e)}}}])&&at(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function dt(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function pt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yt(r.key),r)}}function yt(e){var t=function(e){if("object"!=ht(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=ht(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ht(t)?t:t+""}function gt(e,t,a){return t=_t(t),function(e,t){if(t&&("object"===ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,mt()?Reflect.construct(t,a||[],_t(e).constructor):t.apply(e,a))}function mt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(mt=function(){return!!e})()}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}var wt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gt(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(t,e),a=t,(r=[{key:"doPutUploadPart",value:function(e,t,a,r,n){try{var o=this,s=new XMLHttpRequest,i=!0;return n((function(){i&&s.abort()})),dt(function(t,n){try{var i=dt(new Promise((function(t,n){s.upload.addEventListener("progress",(function(e){e.lengthComputable&&r(e.loaded)}),!1),s.addEventListener("load",(function(){var e,a=null!==(e=s.getResponseHeader("etag"))&&void 0!==e?e:void 0;t({etag:a,status:s.status})})),s.onabort=function(){return n(new q)},s.onerror=function(){return n(new Error("File upload error."))},s.ontimeout=function(){return n(new Error("File upload timeout."))},s.open("PUT",e.uploadUrl),s.send(o.getRequestBody(e,a))})))}catch(e){return n(!0,e)}return i&&i.then?i.then(n.bind(null,!1),n.bind(null,!0)):n(!1,i)}(0,(function(e,t){return i=!1,function(e,t){if(e)throw t;return t}(e,t)})))}catch(e){return Promise.reject(e)}}}])&&pt(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a;var a,r}(ft);function bt(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function vt(){}function zt(e,t,a){if(!e.s){if(a instanceof Ot){if(!a.s)return void(a.o=zt.bind(null,e,t));1&t&&(t=a.s),a=a.v}if(a&&a.then)return void a.then(zt.bind(null,e,t),zt.bind(null,e,2));e.s=t,e.v=a;var r=e.o;r&&r(e)}}var Ot=function(){function e(){}return e.prototype.then=function(t,a){var r=new e,n=this.s;if(n){var o=1&n?t:a;if(o){try{zt(r,1,o(this.v))}catch(e){zt(r,2,e)}return r}return this}return this.o=function(e){try{var n=e.v;1&e.s?zt(r,1,t?t(n):n):a?zt(r,1,a(n)):zt(r,2,n)}catch(e){zt(r,2,e)}},r},e}(),St="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Ct(e){return e instanceof Ot&&1&e.s}function Pt(e){return Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pt(e)}function At(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jt(r.key),r)}}function jt(e){var t=function(e){if("object"!=Pt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=Pt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Pt(t)?t:t+""}var Rt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"canUseServiceWorkers",value:function(){return"serviceWorker"in navigator}},{key:"sendMessage",value:function(e,t,a){try{return bt(this.ensureActiveServiceWorkerExists(e,t,a),(function(t){return t.serviceWorker.postMessage(e),t.config}))}catch(e){return Promise.reject(e)}}},{key:"ensureActiveServiceWorkerExists",value:function(e,t,a){try{var r=!1,n=this;return bt((o=function(e,t){var a,r=-1;e:{for(var n=0;n<t.length;n++){var o=t[n][0];if(o){var s=o();if(s&&s.then)break e;if(s===e){r=n;break}}else r=n}if(-1!==r){do{for(var i=t[r][1];!i;)r++,i=t[r][1];var c=i();if(c&&c.then){a=!0;break e}var l=t[r][2];r++}while(l&&!l());return c}}var u=new Ot,f=zt.bind(null,u,2);return(a?c.then(h):s.then((function a(s){for(;;){if(s===e){r=n;break}if(++n===t.length){if(-1!==r)break;return void zt(u,1,c)}if(o=t[n][0]){if((s=o())&&s.then)return void s.then(a).then(void 0,f)}else r=n}do{for(var i=t[r][1];!i;)r++,i=t[r][1];var c=i();if(c&&c.then)return void c.then(h).then(void 0,f);var l=t[r][2];r++}while(l&&!l());zt(u,1,c)}))).then(void 0,f),u;function h(e){for(;;){var a=t[r][2];if(!a||a())break;r++;for(var n=t[r][1];!n;)r++,n=t[r][1];if((e=n())&&e.then)return void e.then(h).then(void 0,f)}zt(u,1,e)}}(t.type,[[function(){return"Uninitialized"},function(){return bt(n.unregisterOnHardReload(),(function(){}))}],[function(){return"Initialized"},function(){return bt(n.getActiveServiceWorker(t.serviceWorkerScope),(function(e){if(void 0!==e)return r=!0,{serviceWorker:e,config:t}}))}],[void 0,function(){qe(t)},vt]]),s=function(o){return r?o:bt(n.registerServiceWorker(t.serviceWorkerScript,e,a))},o&&o.then?o.then(s):s(o)))}catch(e){return Promise.reject(e)}var o,s}},{key:"registerServiceWorker",value:function(e,t,a){try{var r=this;if(!e.startsWith("/"))throw new Error("The '".concat(a,"' field must start with a '/' and reference a script at the root of your website."));return e.split("/").length-1>1&&g.warn("The '".concat(a,"' field should be a root script (e.g. '/script.js'). The Bytescale SDK can only authorize requests originating from webpages that are at the same level as the script or below.")),bt(function(a,n){try{var o=bt(navigator.serviceWorker.register(e),(function(a){return bt(r.waitForActiveServiceWorker(a,t),(function(t){return{serviceWorker:t,config:{serviceWorkerScript:e,serviceWorkerScope:a.scope,type:"Initialized"}}}))}))}catch(e){return n(e)}return o&&o.then?o.then(void 0,n):o}(0,(function(e){throw new Error("Failed to install Bytescale Service Worker (SW). ".concat(e.name,": ").concat(e.message))})))}catch(e){return Promise.reject(e)}}},{key:"waitForActiveServiceWorker",value:function(e,t){try{var a=!1,r=e.installing;return bt((n=function(t){if(a)return t;if(null!==e.active)return e.active;throw new Error("Service worker was neither 'installing' or 'active'.")},(o=function(){if(null!==r){var e=new Promise((function(e){r.addEventListener("statechange",(function t(a){var n=a.target;"activated"===n.state&&(r.removeEventListener("statechange",t),e(n))}))}));return r.postMessage(t),bt(e,(function(e){return a=!0,e}))}}())&&o.then?o.then(n):n(o)))}catch(e){return Promise.reject(e)}var n,o}},{key:"getActiveServiceWorker",value:function(e){try{var t,a;return bt(this.getActiveRegistrations(),(function(r){var n=r.filter((function(t){return t.scope===e}));return null!==(a=null===(t=n[0])||void 0===t?void 0:t.active)&&void 0!==a?a:void 0}))}catch(e){return Promise.reject(e)}}},{key:"unregisterOnHardReload",value:function(){try{return null===navigator.serviceWorker.controller?bt(this.getActiveRegistrations(),(function(e){return function(e){if(e&&e.then)return e.then(vt)}(function(e,t,a){if("function"==typeof e[St]){var r,n,o,s=e[St]();if(function e(i){try{for(;!((r=s.next()).done||a&&a());)if((i=t(r.value))&&i.then){if(!Ct(i))return void i.then(e,o||(o=zt.bind(null,n=new Ot,2)));i=i.v}n?zt(n,1,i):n=i}catch(e){zt(n||(n=new Ot),2,e)}}(),s.return){var i=function(e){try{r.done||s.return()}catch(e){}return e};if(n&&n.then)return n.then(i,(function(e){throw i(e)}));i()}return n}if(!("length"in e))throw new TypeError("Object is not iterable");for(var c=[],l=0;l<e.length;l++)c.push(e[l]);return function(e,t,a){var r,n,o=-1;return function s(i){try{for(;++o<e.length&&(!a||!a());)if((i=t(o))&&i.then){if(!Ct(i))return void i.then(s,n||(n=zt.bind(null,r=new Ot,2)));i=i.v}r?zt(r,1,i):r=i}catch(e){zt(r||(r=new Ot),2,e)}}(),r}(c,(function(e){return t(c[e])}),a)}(e,(function(e){return(t=e.unregister())&&t.then?t.then(vt):Promise.resolve();var t})))})):bt()}catch(e){return Promise.reject(e)}}},{key:"getActiveRegistrations",value:function(){try{return bt(navigator.serviceWorker.getRegistrations(),(function(e){return e.filter((function(e){return null!==e.active}))}))}catch(e){return Promise.reject(e)}}}])&&At(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Tt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Et(r.key),r)}}function Et(e){var t=function(e){if("object"!=It(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=It(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==It(t)?t:t+""}var Mt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callbacks={},this.nextId=0,this.intervalId=void 0},(t=[{key:"schedule",value:function(e,t){var a=this.nextId++;return this.callbacks[a]={epoch:e,callback:t},this.startInterval(),a}},{key:"unschedule",value:function(e){delete this.callbacks[e],0===Object.keys(this.callbacks).length&&this.stopInterval()}},{key:"startInterval",value:function(){var e=this;void 0===this.intervalId&&(this.intervalId=setInterval((function(){return e.checkCallbacks()}),1e3))}},{key:"stopInterval",value:function(){void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)}},{key:"checkCallbacks",value:function(){var e=Date.now();for(var t in this.callbacks){var a=parseInt(t);if(this.callbacks[a].epoch<=e){try{this.callbacks[a].callback()}catch(e){g.error("Unhandled error from scheduled callback: ".concat(e))}this.unschedule(a)}}}}])&&Tt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function xt(){}function qt(e,t){if(!t)return e&&e.then?e.then(xt):Promise.resolve()}function Ut(e,t,a){return a?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Lt(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Bt(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gt(r.key),r)}}function Gt(e){var t=function(e){if("object"!=Nt(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=Nt(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nt(t)?t:t+""}var Dt=new(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serviceWorkerUtils=t,this.serviceWorkerScriptFieldName="serviceWorkerScript",this.contentType="content-type",this.contentTypeJson="application/json",this.contentTypeText="text/plain",this.minJwtTtlSeconds=10,this.retryAuthAfterErrorSeconds=5,this.refreshBeforeExpirySeconds=20,this.scheduler=new Mt,this.authSessionMutex=h.getMutex()},(t=[{key:"isAuthSessionActive",value:function(){return void 0!==h.getSession()}},{key:"isAuthSessionReady",value:function(){var e;return void 0!==(null===(e=h.getSession())||void 0===e?void 0:e.accessToken)}},{key:"beginAuthSession",value:function(e){try{var t=this;return Ut(t.authSessionMutex.safe(Lt((function(){if(t.isAuthSessionActive())throw new Error("Auth session already active. Please call 'await endAuthSession()' and then call 'await beginAuthSession(...)' to start a new auth session.");var a={accessToken:void 0,accessTokenRefreshHandle:void 0,params:e,isActive:!0,authServiceWorker:void 0!==e.serviceWorkerScript&&t.serviceWorkerUtils.canUseServiceWorkers()?{serviceWorkerScript:e.serviceWorkerScript,type:"Uninitialized"}:void 0};return h.setSession(a),a}))),(function(e){return qt(t.refreshAccessToken(e))}))}catch(e){return Promise.reject(e)}}},{key:"endAuthSession",value:function(){try{var e=this;return Ut(qt(e.authSessionMutex.safe(Lt((function(){var t=h.getSession();if(void 0!==t)return h.setSession(void 0),t.isActive=!1,void 0!==t.accessTokenRefreshHandle&&e.scheduler.unschedule(t.accessTokenRefreshHandle),Ut(e.deleteAccessToken(t.params),(function(){return function(){var a=function(){if(void 0!==t.authServiceWorker)return qt(e.serviceWorkerUtils.sendMessage({type:"SET_BYTESCALE_AUTH_CONFIG",config:[]},t.authServiceWorker,e.serviceWorkerScriptFieldName))}();if(a&&a.then)return a.then(xt)}()}))})))))}catch(e){return Promise.reject(e)}}},{key:"refreshAccessToken",value:function(e){try{var t=this;return Ut(qt(t.authSessionMutex.safe(Lt((function(){if(e.isActive){var a=function(e){return Date.now()+1e3*e},r=a(t.retryAuthAfterErrorSeconds);return function(e){if(e&&e.then)return e.then(xt)}(function(n,o){try{var s=function(e,t){try{var a=e()}catch(e){return t(e)}return a&&a.then?a.then(void 0,t):a}((function(){var n=t.getAccessToken,o=e.params;return Ut(e.params.authHeaders(),(function(s){return Ut(n.call(t,o,s),(function(n){var o=void 0===e.authServiceWorker;return Ut(t.setAccessToken(e.params,n,o),(function(o){return s=function(){var n=o.ttlSeconds-t.refreshBeforeExpirySeconds,s=Math.max(n,t.minJwtTtlSeconds);n!==s&&g.warn("JWT expiration is too short: waiting for ".concat(s," seconds before refreshing.")),r=a(s),e.accessToken=o.accessToken},(i=function(){if(void 0!==e.authServiceWorker)return Ut(t.serviceWorkerUtils.sendMessage({type:"SET_BYTESCALE_AUTH_CONFIG",config:[{headers:[{key:"Authorization",value:"Bearer ".concat(n)}],expires:a(o.ttlSeconds),urlPrefix:"".concat(t.getCdnUrl(e.params),"/").concat(e.params.accountId,"/")}]},e.authServiceWorker,t.serviceWorkerScriptFieldName),(function(){return qt(new Promise((function(e){return setTimeout(e,100)})))}))}())&&i.then?i.then(s):s(i);var s,i}))}))}))}),(function(e){g.warn("Unable to refresh JWT access token: ".concat(e))}))}catch(e){return o(!0,e)}return s&&s.then?s.then(o.bind(null,!1),o.bind(null,!0)):o(!1,s)}(0,(function(a,n){return e.accessTokenRefreshHandle=t.scheduler.schedule(r,(function(){t.refreshAccessToken(e).then((function(){}),(function(e){return g.error("Unexpected error when refreshing JWT access token: ".concat(e))}))})),function(e,t){if(e)throw t;return t}(a,n)})))}})))))}catch(e){return Promise.reject(e)}}},{key:"getAccessTokenUrl",value:function(e,t){return"".concat(this.getCdnUrl(e),"/api/v1/access_tokens/").concat(e.accountId,"?set-cookie=").concat(t?"true":"false")}},{key:"getCdnUrl",value:function(e){var t;return M.getCdnUrl(null!==(t=e.options)&&void 0!==t?t:{})}},{key:"deleteAccessToken",value:function(e){try{var t;return Ut(qt(x.fetch(this.getAccessTokenUrl(e,!0),{method:"DELETE",credentials:"include",headers:{}},{isBytescaleApi:!0,fetchApi:null===(t=e.options)||void 0===t?void 0:t.fetchApi})))}catch(e){return Promise.reject(e)}}},{key:"setAccessToken",value:function(e,t,a){try{var r,n=this,o={accessToken:t};return Ut(x.fetch(n.getAccessTokenUrl(e,a),{method:"PUT",credentials:"include",headers:(s={},i=n.contentType,c=n.contentTypeJson,(i=Gt(i))in s?Object.defineProperty(s,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[i]=c,s),body:JSON.stringify(o)},{isBytescaleApi:!0,fetchApi:null===(r=e.options)||void 0===r?void 0:r.fetchApi}),(function(e){return Ut(e.json())}))}catch(e){return Promise.reject(e)}var s,i,c}},{key:"getAccessToken",value:function(e,t){try{var a,r,n=this,o="Your auth API endpoint",s=n.contentTypeText;return Ut(x.fetch(e.authUrl,{method:"GET",headers:t},{isBytescaleApi:!1,fetchApi:null===(a=e.options)||void 0===a?void 0:a.fetchApi}),(function(e){var t=null!==(r=e.headers.get(n.contentType))&&void 0!==r?r:"";if(t.split(";")[0]!==s)throw new Error("".concat(o,' returned "').concat(t,'" for the ').concat(n.contentType,' response header, but the Bytescale SDK requires "').concat(s,'".'));return Ut(e.text(),(function(e){if(0===e.length)throw new Error("".concat(o," returned an empty string. Please return a valid JWT instead."));if(e.trim().length!==e.length)throw new Error("".concat(o," returned whitespace around the JWT, please remove it."));return e}))}))}catch(e){return Promise.reject(e)}}}])&&Bt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())(new Rt);e.exports=a}()},509:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"],r=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...a],n=["null","undefined","string","number","bigint","boolean","symbol"];function o(e){return t=>typeof t===e}const{toString:s}=Object.prototype,i=e=>{const t=s.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&l.domElement(e)?"HTMLElement":(a=t,r.includes(a)?t:void 0);var a},c=e=>t=>i(t)===e;function l(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(l.observable(e))return"Observable";if(l.array(e))return"Array";if(l.buffer(e))return"Buffer";const t=i(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}l.undefined=o("undefined"),l.string=o("string");const u=o("number");l.number=e=>u(e)&&!l.nan(e),l.bigint=o("bigint"),l.function_=o("function"),l.null_=e=>null===e,l.class_=e=>l.function_(e)&&e.toString().startsWith("class "),l.boolean=e=>!0===e||!1===e,l.symbol=o("symbol"),l.numericString=e=>l.string(e)&&!l.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),l.array=(e,t)=>!!Array.isArray(e)&&(!l.function_(t)||e.every(t)),l.buffer=e=>{var t,a,r,n;return null!==(n=null===(r=null===(a=null===(t=e)||void 0===t?void 0:t.constructor)||void 0===a?void 0:a.isBuffer)||void 0===r?void 0:r.call(a,e))&&void 0!==n&&n},l.blob=e=>c("Blob")(e),l.nullOrUndefined=e=>l.null_(e)||l.undefined(e),l.object=e=>!l.null_(e)&&("object"==typeof e||l.function_(e)),l.iterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},l.asyncIterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.asyncIterator])},l.generator=e=>{var t,a;return l.iterable(e)&&l.function_(null===(t=e)||void 0===t?void 0:t.next)&&l.function_(null===(a=e)||void 0===a?void 0:a.throw)},l.asyncGenerator=e=>l.asyncIterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.nativePromise=e=>c("Promise")(e),l.promise=e=>l.nativePromise(e)||(e=>{var t,a;return l.function_(null===(t=e)||void 0===t?void 0:t.then)&&l.function_(null===(a=e)||void 0===a?void 0:a.catch)})(e),l.generatorFunction=c("GeneratorFunction"),l.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===i(e),l.asyncFunction=e=>"AsyncFunction"===i(e),l.boundFunction=e=>l.function_(e)&&!e.hasOwnProperty("prototype"),l.regExp=c("RegExp"),l.date=c("Date"),l.error=c("Error"),l.map=e=>c("Map")(e),l.set=e=>c("Set")(e),l.weakMap=e=>c("WeakMap")(e),l.weakSet=e=>c("WeakSet")(e),l.int8Array=c("Int8Array"),l.uint8Array=c("Uint8Array"),l.uint8ClampedArray=c("Uint8ClampedArray"),l.int16Array=c("Int16Array"),l.uint16Array=c("Uint16Array"),l.int32Array=c("Int32Array"),l.uint32Array=c("Uint32Array"),l.float32Array=c("Float32Array"),l.float64Array=c("Float64Array"),l.bigInt64Array=c("BigInt64Array"),l.bigUint64Array=c("BigUint64Array"),l.arrayBuffer=c("ArrayBuffer"),l.sharedArrayBuffer=c("SharedArrayBuffer"),l.dataView=c("DataView"),l.enumCase=(e,t)=>Object.values(t).includes(e),l.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,l.urlInstance=e=>c("URL")(e),l.urlString=e=>{if(!l.string(e))return!1;try{return new URL(e),!0}catch(e){return!1}},l.truthy=e=>Boolean(e),l.falsy=e=>!e,l.nan=e=>Number.isNaN(e),l.primitive=e=>{return l.null_(e)||(t=typeof e,n.includes(t));var t},l.integer=e=>Number.isInteger(e),l.safeInteger=e=>Number.isSafeInteger(e),l.plainObject=e=>{if("[object Object]"!==s.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},l.typedArray=e=>{return t=i(e),a.includes(t);var t},l.arrayLike=e=>!l.nullOrUndefined(e)&&!l.function_(e)&&(e=>l.safeInteger(e)&&e>=0)(e.length),l.inRange=(e,t)=>{if(l.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(l.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const f=["innerHTML","ownerDocument","style","attributes","nodeValue"];l.domElement=e=>l.object(e)&&1===e.nodeType&&l.string(e.nodeName)&&!l.plainObject(e)&&f.every((t=>t in e)),l.observable=e=>{var t,a,r,n;return!!e&&(e===(null===(a=(t=e)[Symbol.observable])||void 0===a?void 0:a.call(t))||e===(null===(n=(r=e)["@@observable"])||void 0===n?void 0:n.call(r)))},l.nodeStream=e=>l.object(e)&&l.function_(e.pipe)&&!l.observable(e),l.infinite=e=>e===1/0||e===-1/0;const h=e=>t=>l.integer(t)&&Math.abs(t%2)===e;l.evenInteger=h(0),l.oddInteger=h(1),l.emptyArray=e=>l.array(e)&&0===e.length,l.nonEmptyArray=e=>l.array(e)&&e.length>0,l.emptyString=e=>l.string(e)&&0===e.length,l.emptyStringOrWhitespace=e=>l.emptyString(e)||(e=>l.string(e)&&!/\S/.test(e))(e),l.nonEmptyString=e=>l.string(e)&&e.length>0,l.nonEmptyStringAndNotWhitespace=e=>l.string(e)&&!l.emptyStringOrWhitespace(e),l.emptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&0===Object.keys(e).length,l.nonEmptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&Object.keys(e).length>0,l.emptySet=e=>l.set(e)&&0===e.size,l.nonEmptySet=e=>l.set(e)&&e.size>0,l.emptyMap=e=>l.map(e)&&0===e.size,l.nonEmptyMap=e=>l.map(e)&&e.size>0,l.propertyKey=e=>l.any([l.string,l.number,l.symbol],e),l.formData=e=>c("FormData")(e),l.urlSearchParams=e=>c("URLSearchParams")(e);const d=(e,t,a)=>{if(!l.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(0===a.length)throw new TypeError("Invalid number of values");return e.call(a,t)};l.any=(e,...t)=>(l.array(e)?e:[e]).some((e=>d(Array.prototype.some,e,t))),l.all=(e,...t)=>d(Array.prototype.every,e,t);const p=(e,t,a,r={})=>{if(!e){const{multipleValues:e}=r,n=e?`received values of types ${[...new Set(a.map((e=>`\`${l(e)}\``)))].join(", ")}`:`received value of type \`${l(a)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${n}.`)}};t.assert={undefined:e=>p(l.undefined(e),"undefined",e),string:e=>p(l.string(e),"string",e),number:e=>p(l.number(e),"number",e),bigint:e=>p(l.bigint(e),"bigint",e),function_:e=>p(l.function_(e),"Function",e),null_:e=>p(l.null_(e),"null",e),class_:e=>p(l.class_(e),"Class",e),boolean:e=>p(l.boolean(e),"boolean",e),symbol:e=>p(l.symbol(e),"symbol",e),numericString:e=>p(l.numericString(e),"string with a number",e),array:(e,t)=>{p(l.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>p(l.buffer(e),"Buffer",e),blob:e=>p(l.blob(e),"Blob",e),nullOrUndefined:e=>p(l.nullOrUndefined(e),"null or undefined",e),object:e=>p(l.object(e),"Object",e),iterable:e=>p(l.iterable(e),"Iterable",e),asyncIterable:e=>p(l.asyncIterable(e),"AsyncIterable",e),generator:e=>p(l.generator(e),"Generator",e),asyncGenerator:e=>p(l.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>p(l.nativePromise(e),"native Promise",e),promise:e=>p(l.promise(e),"Promise",e),generatorFunction:e=>p(l.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>p(l.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>p(l.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>p(l.boundFunction(e),"Function",e),regExp:e=>p(l.regExp(e),"RegExp",e),date:e=>p(l.date(e),"Date",e),error:e=>p(l.error(e),"Error",e),map:e=>p(l.map(e),"Map",e),set:e=>p(l.set(e),"Set",e),weakMap:e=>p(l.weakMap(e),"WeakMap",e),weakSet:e=>p(l.weakSet(e),"WeakSet",e),int8Array:e=>p(l.int8Array(e),"Int8Array",e),uint8Array:e=>p(l.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>p(l.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>p(l.int16Array(e),"Int16Array",e),uint16Array:e=>p(l.uint16Array(e),"Uint16Array",e),int32Array:e=>p(l.int32Array(e),"Int32Array",e),uint32Array:e=>p(l.uint32Array(e),"Uint32Array",e),float32Array:e=>p(l.float32Array(e),"Float32Array",e),float64Array:e=>p(l.float64Array(e),"Float64Array",e),bigInt64Array:e=>p(l.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>p(l.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>p(l.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>p(l.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>p(l.dataView(e),"DataView",e),enumCase:(e,t)=>p(l.enumCase(e,t),"EnumCase",e),urlInstance:e=>p(l.urlInstance(e),"URL",e),urlString:e=>p(l.urlString(e),"string with a URL",e),truthy:e=>p(l.truthy(e),"truthy",e),falsy:e=>p(l.falsy(e),"falsy",e),nan:e=>p(l.nan(e),"NaN",e),primitive:e=>p(l.primitive(e),"primitive",e),integer:e=>p(l.integer(e),"integer",e),safeInteger:e=>p(l.safeInteger(e),"integer",e),plainObject:e=>p(l.plainObject(e),"plain object",e),typedArray:e=>p(l.typedArray(e),"TypedArray",e),arrayLike:e=>p(l.arrayLike(e),"array-like",e),domElement:e=>p(l.domElement(e),"HTMLElement",e),observable:e=>p(l.observable(e),"Observable",e),nodeStream:e=>p(l.nodeStream(e),"Node.js Stream",e),infinite:e=>p(l.infinite(e),"infinite number",e),emptyArray:e=>p(l.emptyArray(e),"empty array",e),nonEmptyArray:e=>p(l.nonEmptyArray(e),"non-empty array",e),emptyString:e=>p(l.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>p(l.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>p(l.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>p(l.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>p(l.emptyObject(e),"empty object",e),nonEmptyObject:e=>p(l.nonEmptyObject(e),"non-empty object",e),emptySet:e=>p(l.emptySet(e),"empty set",e),nonEmptySet:e=>p(l.nonEmptySet(e),"non-empty set",e),emptyMap:e=>p(l.emptyMap(e),"empty map",e),nonEmptyMap:e=>p(l.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>p(l.propertyKey(e),"PropertyKey",e),formData:e=>p(l.formData(e),"FormData",e),urlSearchParams:e=>p(l.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>p(l.evenInteger(e),"even integer",e),oddInteger:e=>p(l.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>p(l.directInstanceOf(e,t),"T",e),inRange:(e,t)=>p(l.inRange(e,t),"in range",e),any:(e,...t)=>p(l.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>p(l.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})},Object.defineProperties(l,{class:{value:l.class_},function:{value:l.function_},null:{value:l.null_}}),Object.defineProperties(t.assert,{class:{value:t.assert.class_},function:{value:t.assert.function_},null:{value:t.assert.null_}}),t.default=l,e.exports=l,e.exports.default=l,e.exports.assert=t.assert},660:function(e,t,a){var r;r=()=>{var e,t={},r={exports:t},n=Object.defineProperty,o=Object.defineProperties,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,h=(e,t,a)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,d=(e,t)=>{for(var a in t||(t={}))u.call(t,a)&&h(e,a,t[a]);if(l)for(var a of l(t))f.call(t,a)&&h(e,a,t[a]);return e},p=(e,t)=>o(e,i(t)),y=(e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})},g={};y(g,{ErrorInfo:()=>S,Realtime:()=>Ua,Rest:()=>Nt,default:()=>Mr,msgpack:()=>Ir,protocolMessageFromDeserialized:()=>Qt}),r.exports=(e=g,((e,t,a,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of c(t))u.call(e,a)||undefined===a||n(e,a,{get:()=>t[a],enumerable:!(r=s(t,a))||r.enumerable});return e})(n({},"__esModule",{value:!0}),e));var m=class{},_=void 0!==a.g?a.g:"undefined"!=typeof window?window:self;function k(e,t){return`${e}`.padStart(t?3:2,"0")}function w(e){return m.Config.logTimestamps?function(t){const a=new Date;e(k(a.getHours())+":"+k(a.getMinutes())+":"+k(a.getSeconds())+"."+k(a.getMilliseconds(),1)+" "+t)}:function(t){e(t)}}var b=class e{constructor(){this.deprecated=(e,t)=>{this.deprecationWarning(`${e} is deprecated and will be removed in a future version. ${t}`)},this.shouldLog=e=>e<=this.logLevel,this.setLog=(e,t)=>{void 0!==e&&(this.logLevel=e),void 0!==t&&(this.logHandler=this.logErrorHandler=t)},this.logLevel=e.defaultLogLevel,this.logHandler=e.defaultLogHandler,this.logErrorHandler=e.defaultLogErrorHandler}static initLogHandlers(){const[t,a]=(()=>{var e;let t,a;return"function"==typeof(null==(e=null==_?void 0:_.console)?void 0:e.log)?(t=function(...e){console.log.apply(console,e)},a=console.warn?function(...e){console.warn.apply(console,e)}:t):t=a=function(){},[t,a].map(w)})();this.defaultLogHandler=t,this.defaultLogErrorHandler=a,this.defaultLogger=new e}static logActionNoStrip(e,t,a,r){e.logAction(t,a,r)}logAction(e,t,a){this.shouldLog(e)&&(1===e?this.logErrorHandler:this.logHandler)("Ably: "+t+": "+a,e)}renamedClientOption(e,t){this.deprecationWarning(`The \`${e}\` client option has been renamed to \`${t}\`. Please update your code to use \`${t}\` instead. \`${e}\` will be removed in a future version.`)}renamedMethod(e,t,a){this.deprecationWarning(`\`${e}\`s \`${t}\` method has been renamed to \`${a}\`. Please update your code to use \`${a}\` instead. \`${t}\` will be removed in a future version.`)}deprecationWarning(e){this.shouldLog(1)&&this.logErrorHandler(`Ably: Deprecation warning - ${e}`,1)}};b.defaultLogLevel=1,b.LOG_NONE=0,b.LOG_ERROR=1,b.LOG_MAJOR=2,b.LOG_MINOR=3,b.LOG_MICRO=4,b.logAction=(e,t,a,r)=>{b.logActionNoStrip(e,t,a,r)};var v=b,z={};function O(e){let t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+Y(e.cause)),!e.href||e.message&&e.message.indexOf("help.ably.io")>-1||(t+="; see "+e.href+" "),t+="]",t}y(z,{Format:()=>J,allSame:()=>V,allToLowerCase:()=>ie,allToUpperCase:()=>ce,arrChooseN:()=>re,arrDeleteValue:()=>G,arrEquals:()=>ge,arrIntersect:()=>L,arrIntersectOb:()=>N,arrPopRandomElement:()=>K,arrSubtract:()=>B,arrWithoutValue:()=>D,cheapRandStr:()=>te,containsValue:()=>q,copy:()=>A,createMissingPluginError:()=>me,dataSizeBytes:()=>ee,decodeBody:()=>oe,encodeBody:()=>se,ensureArray:()=>j,forInOwnNonNullProperties:()=>W,getBackoffCoefficient:()=>le,getGlobalObject:()=>he,getJitterCoefficient:()=>ue,getRetryTime:()=>fe,inherits:()=>x,inspectBody:()=>Z,inspectError:()=>Y,intersect:()=>U,isEmpty:()=>I,isErrorInfoOrPartialErrorInfo:()=>X,isNil:()=>T,isObject:()=>R,keysArray:()=>F,matchDerivedChannel:()=>pe,mixin:()=>P,parseQueryString:()=>Q,prototypicalClone:()=>M,randomString:()=>ae,shallowClone:()=>E,shallowEquals:()=>de,throwMissingPluginError:()=>_e,toBase64:()=>ye,toQueryString:()=>$,valuesArray:()=>H,whenPromiseSettles:()=>ne,withTimeoutAsync:()=>ke});var S=class e extends Error{constructor(t,a,r,n){super(t),void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(this,e.prototype),this.code=a,this.statusCode=r,this.cause=n}toString(){return O(this)}static fromValues(t){const{message:a,code:r,statusCode:n}=t;if("string"!=typeof a||"number"!=typeof r||"number"!=typeof n)throw new Error("ErrorInfo.fromValues(): invalid values: "+m.Config.inspect(t));const o=Object.assign(new e(a,r,n),t);return o.code&&!o.href&&(o.href="https://help.ably.io/error/"+o.code),o}},C=class e extends Error{constructor(t,a,r,n){super(t),void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(this,e.prototype),this.code=a,this.statusCode=r,this.cause=n}toString(){return O(this)}static fromValues(t){const{message:a,code:r,statusCode:n}=t;if("string"!=typeof a||!T(r)&&"number"!=typeof r||!T(n)&&"number"!=typeof n)throw new Error("PartialErrorInfo.fromValues(): invalid values: "+m.Config.inspect(t));const o=Object.assign(new e(a,r,n),t);return o.code&&!o.href&&(o.href="https://help.ably.io/error/"+o.code),o}};function P(e,...t){for(let a=0;a<t.length;a++){const r=t[a];if(!r)break;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}function A(e){return P({},e)}function j(e){return T(e)?[]:Array.isArray(e)?e:[e]}function R(e){return"[object Object]"==Object.prototype.toString.call(e)}function I(e){for(const t in e)return!1;return!0}function T(e){return null==e}function E(e){const t=new Object;for(const a in e)t[a]=e[a];return t}function M(e,t){class a{}a.prototype=e;const r=new a;return t&&P(r,t),r}var x=function(e,t){m.Config.inherits?m.Config.inherits(e,t):(e.super_=t,e.prototype=M(t.prototype,{constructor:e}))};function q(e,t){for(const a in e)if(e[a]==t)return!0;return!1}function U(e,t){return Array.isArray(t)?L(e,t):N(e,t)}function L(e,t){const a=[];for(let r=0;r<e.length;r++){const n=e[r];-1!=t.indexOf(n)&&a.push(n)}return a}function N(e,t){const a=[];for(let r=0;r<e.length;r++){const n=e[r];n in t&&a.push(n)}return a}function B(e,t){const a=[];for(let r=0;r<e.length;r++){const n=e[r];-1==t.indexOf(n)&&a.push(n)}return a}function G(e,t){const a=e.indexOf(t),r=-1!=a;return r&&e.splice(a,1),r}function D(e,t){const a=e.slice();return G(a,t),a}function F(e,t){const a=[];for(const r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||a.push(r);return a}function H(e,t){const a=[];for(const r in e)t&&!Object.prototype.hasOwnProperty.call(e,r)||a.push(e[r]);return a}function W(e,t){for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&e[a]&&t(a)}function V(e,t){if(0===e.length)return!0;const a=e[0][t];return e.every((function(e){return e[t]===a}))}var J=(e=>(e.msgpack="msgpack",e.json="json",e))(J||{});function K(e){return e.splice((t=e,Math.floor(Math.random()*t.length)),1)[0];var t}function $(e){const t=[];if(e)for(const a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.length?"?"+t.join("&"):""}function Q(e){let t;const a=/([^?&=]+)=?([^&]*)/g,r={};for(;t=a.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r}function X(e){return"object"==typeof e&&null!==e&&(e instanceof S||e instanceof C)}function Y(e){var t,a;return e instanceof Error||"ErrorInfo"===(null==(t=null==e?void 0:e.constructor)?void 0:t.name)||"PartialErrorInfo"===(null==(a=null==e?void 0:e.constructor)?void 0:a.name)?e.toString():m.Config.inspect(e)}function Z(e){return m.BufferUtils.isBuffer(e)?e.toString():"string"==typeof e?e:m.Config.inspect(e)}function ee(e){if(m.BufferUtils.isBuffer(e))return m.BufferUtils.byteLength(e);if("string"==typeof e)return m.Config.stringByteSize(e);throw new Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof e)}function te(){return String(Math.random()).substr(2)}var ae=async e=>{const t=await m.Config.getRandomArrayBuffer(e);return m.BufferUtils.base64Encode(t)};function re(e,t){const a=Math.min(t,e.length),r=e.slice(),n=[];for(let e=0;e<a;e++)n.push(K(r));return n}function ne(e,t){e.then((e=>{null==t||t(null,e)})).catch((e=>{null==t||t(e)}))}function oe(e,t,a){return"msgpack"==a?(t||_e("MsgPack"),t.decode(e)):JSON.parse(String(e))}function se(e,t,a){return"msgpack"==a?(t||_e("MsgPack"),t.encode(e,!0)):JSON.stringify(e)}function ie(e){return e.map((function(e){return e&&e.toLowerCase()}))}function ce(e){return e.map((function(e){return e&&e.toUpperCase()}))}function le(e){return Math.min((e+2)/3,2)}function ue(){return 1-.2*Math.random()}function fe(e,t){return e*le(t)*ue()}function he(){return void 0!==a.g?a.g:"undefined"!=typeof window?window:self}function de(e,t){return Object.keys(e).every((a=>e[a]===t[a]))&&Object.keys(t).every((a=>t[a]===e[a]))}function pe(e){const t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new S("regex match failed",400,40010);if(t[2])throw new S(`cannot use a derived option with a ${t[2]} channel`,400,40010);return{qualifierParam:t[3]||"",channelName:t[4]}}function ye(e){const t=m.BufferUtils,a=t.utf8Encode(e);return t.base64Encode(a)}function ge(e,t){return e.length===t.length&&e.every((function(e,a){return e===t[a]}))}function me(e){return new S(`${e} plugin not provided`,40019,400)}function _e(e){throw me(e)}async function ke(e,t=5e3,a="Timeout expired"){const r=new S(a,5e4,500);return Promise.race([e,new Promise(((e,a)=>setTimeout((()=>a(r)),t)))])}var we="2.4.0",be={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,httpRequestTimeout:1e4,httpMaxRetryDuration:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,webSocketConnectTimeout:1e4,webSocketSlowTimeout:4e3},httpMaxRetryCount:3,maxMessageSize:65536,version:we,protocolVersion:3,agent:"ably-js/"+we,getHost:ve,getPort:function(e,t){return t||e.tls?e.tlsPort:e.port},getHttpScheme:function(e){return e.tls?"https://":"http://"},environmentFallbackHosts:ze,getFallbackHosts:Oe,getHosts:function(e,t){const a=[e.restHost].concat(Oe(e));return t?a.map((t=>ve(e,t,!0))):a},checkHost:Se,objectifyOptions:function(e,t,a,r,n){if(void 0===e){const e=t?`${a} must be initialized with either a client options object, an Ably API key, or an Ably Token`:`${a} must be initialized with a client options object`;throw v.logAction(r,v.LOG_ERROR,`${a}()`,e),new Error(e)}let o;if("string"==typeof e)if(-1==e.indexOf(":")){if(!t){const e=`${a} cannot be initialized with just an Ably Token; you must provide a client options object with a \`plugins\` property. (Set this Ably Token as the objects \`token\` property.)`;throw v.logAction(r,v.LOG_ERROR,`${a}()`,e),new Error(e)}o={token:e}}else{if(!t){const e=`${a} cannot be initialized with just an Ably API key; you must provide a client options object with a \`plugins\` property. (Set this Ably API key as the objects \`key\` property.)`;throw v.logAction(r,v.LOG_ERROR,`${a}()`,e),new Error(e)}o={key:e}}else o=e;return n&&(o=p(d({},o),{plugins:d(d({},n),o.plugins)})),o},normaliseOptions:function(e,t,a){const r=null!=a?a:v.defaultLogger;"function"==typeof e.recover&&!0===e.closeOnUnload&&(v.logAction(r,v.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||(e.closeOnUnload=!e.recover),"queueMessages"in e||(e.queueMessages=!0);const n=e.environment&&String(e.environment).toLowerCase()||be.ENVIRONMENT,o=!n||"production"===n;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=o?be.FALLBACK_HOSTS:ze(n));const s=e.restHost||(o?be.REST_HOST:n+"-"+be.REST_HOST),i=function(e,t,a,r){return e.realtimeHost?e.realtimeHost:e.restHost?(v.logAction(r,v.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+e.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+e.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),e.restHost):t?be.REALTIME_HOST:a+"-"+be.REALTIME_HOST}(e,o,n,r);(e.fallbackHosts||[]).concat(s,i).forEach(Se),e.port=e.port||be.PORT,e.tlsPort=e.tlsPort||be.TLS_PORT,"tls"in e||(e.tls=!0);const c=function(e){const t={};for(const a in be.TIMEOUTS)t[a]=e[a]||be.TIMEOUTS[a];return t}(e);e.useBinaryProtocol=!!t&&("useBinaryProtocol"in e?m.Config.supportsBinary&&e.useBinaryProtocol:m.Config.preferBinary);const l={};e.clientId&&(l["X-Ably-ClientId"]=m.BufferUtils.base64Encode(m.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0);let u=null,f=e.connectivityCheckUrl;if(e.connectivityCheckUrl){let[t,a]=e.connectivityCheckUrl.split("?");u=a?Q(a):{},-1===t.indexOf("://")&&(t="https://"+t),f=t}let h=e.wsConnectivityCheckUrl;return h&&-1===h.indexOf("://")&&(h="wss://"+h),p(d({},e),{realtimeHost:i,restHost:s,maxMessageSize:e.maxMessageSize||be.maxMessageSize,timeouts:c,connectivityCheckParams:u,connectivityCheckUrl:f,wsConnectivityCheckUrl:h,headers:l})},defaultGetHeaders:function(e,{format:t=je.format,protocolVersion:a=je.protocolVersion}={}){return{accept:Ae[t],"X-Ably-Version":a.toString(),"Ably-Agent":Ce(e)}},defaultPostHeaders:function(e,{format:t=je.format,protocolVersion:a=je.protocolVersion}={}){let r;return{accept:r=Ae[t],"content-type":r,"X-Ably-Version":a.toString(),"Ably-Agent":Ce(e)}}};function ve(e,t,a){return a?t==e.restHost&&e.realtimeHost||t||e.realtimeHost:t||e.restHost}function ze(e){return[e+"-a-fallback.ably-realtime.com",e+"-b-fallback.ably-realtime.com",e+"-c-fallback.ably-realtime.com",e+"-d-fallback.ably-realtime.com",e+"-e-fallback.ably-realtime.com"]}function Oe(e){const t=e.fallbackHosts,a=void 0!==e.httpMaxRetryCount?e.httpMaxRetryCount:be.httpMaxRetryCount;return t?re(t,a):[]}function Se(e){if("string"!=typeof e)throw new S("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new S("host must not be zero-length",4e4,400)}function Ce(e){let t=be.agent;if(e.agents)for(var a in e.agents)t+=" "+a+"/"+e.agents[a];return t}function Pe(e,t,a){const r=a||{};if(r.cipher){e||_e("Crypto");const a=e.getCipher(r.cipher,t);r.cipher=a.cipherParams,r.channelCipher=a.cipher}else"cipher"in r&&(r.cipher=void 0,r.channelCipher=null);return r}var Ae={json:"application/json",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack",text:"text/plain"},je={format:"json",protocolVersion:be.protocolVersion},Re=be,Ie=class e{constructor(e,t){this.logger=e,this.members=t||[]}call(e,t){for(const a of this.members)if(a)try{a(e,t)}catch(e){v.logAction(this.logger,v.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+e+"; stack = "+e.stack)}}push(...e){this.members.push(...e)}createPromise(){return new Promise(((e,t)=>{this.push(((a,r)=>{a?t(a):e(r)}))}))}resolveAll(e){this.call(null,e)}rejectAll(e){this.call(e)}static create(t,a){const r=new e(t,a);return Object.assign(((e,t)=>r.call(e,t)),{push:e=>r.push(e),createPromise:()=>r.createPromise(),resolveAll:e=>r.resolveAll(e),rejectAll:e=>r.rejectAll(e)})}},Te=(e=>(e.Get="get",e.Delete="delete",e.Post="post",e.Put="put",e.Patch="patch",e))(Te||{}),Ee=Te,Me=(e=>(e[e.Success=200]="Success",e[e.NoContent=204]="NoContent",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestTimeout=408]="RequestTimeout",e[e.InternalServerError=500]="InternalServerError",e))(Me||{}),xe=Me,qe=Math.pow(2,17);function Ue(e){return X(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,e.statusCode=401)),e):new S(Y(e),e.code||40170,e.statusCode||401)}function Le(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));const t=Object.create(null),a=F(e,!0);if(!a)return"";a.sort();for(let r=0;r<a.length;r++)t[a[r]]=e[a[r]].sort();return JSON.stringify(t)}function Ne(e,t){if(e.authCallback)v.logAction(t,v.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)v.logAction(t,v.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)v.logAction(t,v.LOG_MINOR,"Auth()","using token auth with client-side signing");else{if(!e.tokenDetails){const e="authOptions must include valid authentication parameters";throw v.logAction(t,v.LOG_ERROR,"Auth()",e),new Error(e)}v.logAction(t,v.LOG_MINOR,"Auth()","using token auth with supplied token only")}}function Be(e){return e.useTokenAuth||!function(e){return"useTokenAuth"in e&&!e.useTokenAuth}(e)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}var Ge=0,De=class{constructor(e,t){if(this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},this.currentTokenRequestId=null,this.waitingForTokenRequest=null,Be(t))(function(e){return!e.key&&!e.authCallback&&!e.authUrl})(t)&&v.logAction(this.logger,v.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),Ne(this.authOptions,this.logger);else{if(!t.key){const e="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw v.logAction(this.logger,v.LOG_ERROR,"Auth()",e),new S(e,40160,401)}v.logAction(this.logger,v.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}get logger(){return this.client.logger}async authorize(e,t){if(t&&t.key&&this.authOptions.key!==t.key)throw new S("Unable to update auth options with incompatible key",40102,401);try{let a=await this._forceNewToken(null!=e?e:null,null!=t?t:null);return this.client.connection?new Promise(((e,t)=>{this.client.connection.connectionManager.onAuthUpdated(a,((a,r)=>a?t(a):e(r)))})):a}catch(e){throw this.client.connection&&e.statusCode===xe.Forbidden&&this.client.connection.connectionManager.actOnErrorFromAuthorize(e),e}}async _forceNewToken(e,t){this.tokenDetails=null,this._saveTokenOptions(e,t),Ne(this.authOptions,this.logger);try{return this._ensureValidAuthCredentials(!0)}finally{delete this.tokenParams.timestamp,delete this.authOptions.queryTime}}async requestToken(e,t){const a=t||this.authOptions,r=e||A(this.tokenParams);let n,o=this.client;if(a.authCallback)v.logAction(this.logger,v.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),n=a.authCallback;else if(a.authUrl)v.logAction(this.logger,v.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),n=(e,t)=>{const r=P({accept:"application/json, text/plain"},a.authHeaders),n=a.authMethod&&"post"===a.authMethod.toLowerCase();let o;const s=a.authUrl.indexOf("?");s>-1&&(o=Q(a.authUrl.slice(s)),a.authUrl=a.authUrl.slice(0,s),n||(a.authParams=P(o,a.authParams)));const i=P({},a.authParams||{},e),c=e=>{var a,r;let n=null!=(a=e.body)?a:null,o=null;if(e.error)v.logAction(this.logger,v.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+Y(e.error));else{const t=null!=(r=e.headers["content-type"])?r:null;o=Array.isArray(t)?t.join(", "):t,v.logAction(this.logger,v.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+o+"; body: "+Z(n))}if(e.error)return void t(e.error,null);if(e.unpacked)return void t(null,n);if(m.BufferUtils.isBuffer(n)&&(n=n.toString()),!o)return void t(new S("authUrl response is missing a content-type header",40170,401),null);const s=o.indexOf("application/json")>-1,i=o.indexOf("text/plain")>-1||o.indexOf("application/jwt")>-1;if(s||i){if(s){if(n.length>qe)return void t(new S("authUrl response exceeded max permitted length",40170,401),null);try{n=JSON.parse(n)}catch(e){return void t(new S("Unexpected error processing authURL response; err = "+e.message,40170,401),null)}}t(null,n,o)}else t(new S("authUrl responded with unacceptable content-type "+o+", should be either text/plain, application/jwt or application/json",40170,401),null)};if(v.logAction(this.logger,v.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+a.authUrl+"; Params: "+JSON.stringify(i)+"; method: "+(n?"POST":"GET")),n){const e=r||{};e["content-type"]="application/x-www-form-urlencoded";const t=$(i).slice(1);ne(this.client.http.doUri(Ee.Post,a.authUrl,e,t,o),((e,t)=>c(e||t)))}else ne(this.client.http.doUri(Ee.Get,a.authUrl,r||{},null,i),((e,t)=>c(e||t)))};else{if(!a.key){const e="Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)";throw v.logAction(this.logger,v.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),new S(e,40171,403)}v.logAction(this.logger,v.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),n=(e,t)=>{ne(this.createTokenRequest(e,a),((e,a)=>t(e,null!=a?a:null)))}}"capability"in r&&(r.capability=Le(r.capability));const s=(e,t)=>{const r="/keys/"+e.keyName+"/requestToken",n=Re.defaultPostHeaders(this.client.options);a.requestHeaders&&P(n,a.requestHeaders),v.logAction(this.logger,v.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+r+"; Token params: "+JSON.stringify(e)),ne(this.client.http.do(Ee.Post,(function(e){return o.baseUri(e)+r}),n,JSON.stringify(e),null),((e,a)=>e?t(e):t(a.error,a.body,a.unpacked)))};return new Promise(((e,t)=>{let o=!1,i=this.client.options.timeouts.realtimeRequestTimeout,c=setTimeout((()=>{o=!0;const e="Token request callback timed out after "+i/1e3+" seconds";v.logAction(this.logger,v.LOG_ERROR,"Auth.requestToken()",e),t(new S(e,40170,401))}),i);n(r,((r,n,i)=>{if(o)return;if(clearTimeout(c),r)return v.logAction(this.logger,v.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+Y(r)),void t(Ue(r));if("string"==typeof n)return void(0===n.length?t(new S("Token string is empty",40170,401)):n.length>qe?t(new S("Token string exceeded max permitted length (was "+n.length+" bytes)",40170,401)):"undefined"===n||"null"===n?t(new S("Token string was literal null/undefined",40170,401)):"{"!==n[0]||i&&i.indexOf("application/jwt")>-1?e({token:n}):t(new S("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401)));if("object"!=typeof n||null===n){const e="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof n;return v.logAction(this.logger,v.LOG_ERROR,"Auth.requestToken()",e),void t(new S(e,40170,401))}const l=JSON.stringify(n).length;if(l>qe&&!a.suppressMaxLengthCheck)t(new S("Token request/details object exceeded max permitted stringified size (was "+l+" bytes)",40170,401));else if("issued"in n)e(n);else{if(!("keyName"in n)){const e="Expected token request callback to call back with a token string, token request object, or token details object";return v.logAction(this.logger,v.LOG_ERROR,"Auth.requestToken()",e),void t(new S(e,40170,401))}s(n,((a,r,n)=>{if(a)return v.logAction(this.logger,v.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+Y(a)),void t(Ue(a));n||(r=JSON.parse(r)),v.logAction(this.logger,v.LOG_MINOR,"Auth.getToken()","token received"),e(r)}))}}))}))}async createTokenRequest(e,t){t=t||this.authOptions,e=e||A(this.tokenParams);const a=t.key;if(!a)throw new S("No key specified",40101,403);const r=a.split(":"),n=r[0],o=r[1];if(!o)throw new S("Invalid key specified",40101,403);if(""===e.clientId)throw new S("clientId cant be an empty string",40012,400);"capability"in e&&(e.capability=Le(e.capability));const s=P({keyName:n},e),i=e.clientId||"",c=e.ttl||"",l=e.capability||"";s.timestamp||(s.timestamp=await this.getTimestamp(t&&t.queryTime));const u=s.nonce||(s.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),f=s.timestamp,h=s.keyName+"\n"+c+"\n"+l+"\n"+i+"\n"+f+"\n"+u+"\n";return s.mac=s.mac||((e,t)=>{const a=m.BufferUtils,r=a.utf8Encode(e),n=a.utf8Encode(t),o=a.hmacSha256(r,n);return a.base64Encode(o)})(h,o),v.logAction(this.logger,v.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),s}async getAuthParams(){if("basic"==this.method)return{key:this.key};{let e=await this._ensureValidAuthCredentials(!1);if(!e)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{access_token:e.token}}}async getAuthHeaders(){if("basic"==this.method)return{authorization:"Basic "+this.basicKey};{const e=await this._ensureValidAuthCredentials(!1);if(!e)throw new Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");return{authorization:"Bearer "+ye(e.token)}}}async getTimestamp(e){return this.isTimeOffsetSet()||!e&&!this.authOptions.queryTime?this.getTimestampUsingOffset():this.client.time()}getTimestampUsingOffset(){return Date.now()+(this.client.serverTimeOffset||0)}isTimeOffsetSet(){return null!==this.client.serverTimeOffset}_saveBasicOptions(e){this.method="basic",this.key=e.key,this.basicKey=ye(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)}_saveTokenOptions(e,t){this.method="token",e&&(this.tokenParams=e),t&&(t.token&&(t.tokenDetails="string"==typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)}async _ensureValidAuthCredentials(e){const t=this.tokenDetails;if(t){if(this._tokenClientIdMismatch(t.clientId))throw new S("Mismatch between clientId in token ("+t.clientId+") and current clientId ("+this.clientId+")",40102,403);if(!this.isTimeOffsetSet()||!t.expires||t.expires>=this.getTimestampUsingOffset())return v.logAction(this.logger,v.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+t.expires),t;v.logAction(this.logger,v.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}const a=(this.waitingForTokenRequest||(this.waitingForTokenRequest=Ie.create(this.logger))).createPromise();if(null!==this.currentTokenRequestId&&!e)return a;const r=this.currentTokenRequestId=Ge++;let n,o=null;try{n=await this.requestToken(this.tokenParams,this.authOptions)}catch(e){o=e}if(this.currentTokenRequestId>r)return v.logAction(this.logger,v.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one"),a;this.currentTokenRequestId=null;const s=this.waitingForTokenRequest;return this.waitingForTokenRequest=null,o?(null==s||s.rejectAll(o),a):(null==s||s.resolveAll(this.tokenDetails=n),a)}_userSetClientId(e){if("string"!=typeof e&&null!==e)throw new S("clientId must be either a string or null",40012,400);if("*"===e)throw new S('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);{const t=this._uncheckedSetClientId(e);if(t)throw t}}_uncheckedSetClientId(e){if(this._tokenClientIdMismatch(e)){const t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,a=new S(t,40102,401);return v.logAction(this.logger,v.LOG_ERROR,"Auth._uncheckedSetClientId()",t),a}return this.clientId=this.tokenParams.clientId=e,null}_tokenClientIdMismatch(e){return!(!this.clientId||"*"===this.clientId||!e||"*"===e||this.clientId===e)}static isTokenErr(e){return e.code&&e.code>=40140&&e.code<40150}revokeTokens(e,t){return this.client.rest.revokeTokens(e,t)}};function Fe(e){const t=[];if(e)for(const a in e)t.push(a+"="+e[a]);return t.join("&")}function He(e,t){return e+(t?"?":"")+Fe(t)}var We=class{constructor(e){this.client=e,this.platformHttp=new m.Http(e),this.checkConnectivity=this.platformHttp.checkConnectivity?()=>this.platformHttp.checkConnectivity():void 0}get logger(){var e,t;return null!=(t=null==(e=this.client)?void 0:e.logger)?t:v.defaultLogger}get supportsAuthHeaders(){return this.platformHttp.supportsAuthHeaders}get supportsLinkHeaders(){return this.platformHttp.supportsLinkHeaders}_getHosts(e){const t=e.connection,a=t&&t.connectionManager.host;return a?[a].concat(Re.getFallbackHosts(e.options)):Re.getHosts(e.options)}async do(e,t,a,r,n){try{const o=this.client;if(!o)return{error:new S("http.do called without client",5e4,500)};const s="function"==typeof t?t:function(e){return o.baseUri(e)+t},i=o._currentFallback;if(i){if(i.validUntil>Date.now()){const c=await this.doUri(e,s(i.host),a,r,n);return c.error&&this.platformHttp.shouldFallback(c.error)?(o._currentFallback=null,this.do(e,t,a,r,n)):c}o._currentFallback=null}const c=this._getHosts(o);if(1===c.length)return this.doUri(e,s(c[0]),a,r,n);let l=null;const u=async(t,i)=>{const c=t.shift();l=null!=l?l:new Date;const f=await this.doUri(e,s(c),a,r,n);return f.error&&this.platformHttp.shouldFallback(f.error)&&t.length?Date.now()-l.getTime()>o.options.timeouts.httpMaxRetryDuration?{error:new S(`Timeout for trying fallback hosts retries. Total elapsed time exceeded the ${o.options.timeouts.httpMaxRetryDuration}ms limit`,50003,500)}:u(t,!0):(i&&(o._currentFallback={host:c,validUntil:Date.now()+o.options.timeouts.fallbackRetryTimeout}),f)};return u(c)}catch(e){return{error:new S(`Unexpected error in Http.do: ${Y(e)}`,500,5e4)}}}async doUri(e,t,a,r,n){try{!function(e,t,a,r,n){n.shouldLog(v.LOG_MICRO)&&v.logActionNoStrip(n,v.LOG_MICRO,"Http."+e+"()","Sending; "+He(t,r)+"; Body"+(m.BufferUtils.isBuffer(a)?" (Base64): "+m.BufferUtils.base64Encode(a):": "+a))}(e,t,r,n,this.logger);const o=await this.platformHttp.doUri(e,t,a,r,n);return this.logger.shouldLog(v.LOG_MICRO)&&function(e,t,a,r,n){e.error?v.logActionNoStrip(n,v.LOG_MICRO,"Http."+t+"()","Received Error; "+He(a,r)+"; Error: "+Y(e.error)):v.logActionNoStrip(n,v.LOG_MICRO,"Http."+t+"()","Received; "+He(a,r)+"; Headers: "+Fe(e.headers)+"; StatusCode: "+e.statusCode+"; Body"+(m.BufferUtils.isBuffer(e.body)?" (Base64): "+m.BufferUtils.base64Encode(e.body):": "+e.body))}(o,e,t,n,this.logger),o}catch(e){return{error:new S(`Unexpected error in Http.doUri: ${Y(e)}`,500,5e4)}}}},Ve=class{constructor(e){var t,a,r,n,o,s,i,c;this.Platform=m,this.ErrorInfo=S,this.Logger=v,this.Defaults=Re,this.Utils=z,this._additionalHTTPRequestImplementations=null!=(t=e.plugins)?t:null,this.logger=new v,this.logger.setLog(e.logLevel,e.logHandler),v.logAction(this.logger,v.LOG_MICRO,"BaseClient()","initialized with clientOptions "+m.Config.inspect(e)),this._MsgPack=null!=(r=null==(a=e.plugins)?void 0:a.MsgPack)?r:null;const l=this.options=Re.normaliseOptions(e,this._MsgPack,this.logger);if(l.key){const e=l.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!e){const e="invalid key parameter";throw v.logAction(this.logger,v.LOG_ERROR,"BaseClient()",e),new S(e,40400,404)}l.keyName=e[1],l.keySecret=e[2]}if("clientId"in l){if("string"!=typeof l.clientId&&null!==l.clientId)throw new S("clientId must be either a string or null",40012,400);if("*"===l.clientId)throw new S('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}v.logAction(this.logger,v.LOG_MINOR,"BaseClient()","started; version = "+Re.version),this._currentFallback=null,this.serverTimeOffset=null,this.http=new We(this),this.auth=new De(this,l),this._rest=(null==(n=e.plugins)?void 0:n.Rest)?new e.plugins.Rest(this):null,this._Crypto=null!=(s=null==(o=e.plugins)?void 0:o.Crypto)?s:null,this.__FilteredSubscriptions=null!=(c=null==(i=e.plugins)?void 0:i.MessageInteractions)?c:null}get rest(){return this._rest||_e("Rest"),this._rest}get _FilteredSubscriptions(){return this.__FilteredSubscriptions||_e("MessageInteractions"),this.__FilteredSubscriptions}get channels(){return this.rest.channels}get push(){return this.rest.push}get device(){var e;return(null==(e=this.options.plugins)?void 0:e.Push)&&this.push.LocalDevice||_e("Push"),this._device||(this._device=this.push.LocalDevice.load(this)),this._device}baseUri(e){return Re.getHttpScheme(this.options)+e+":"+Re.getPort(this.options,!1)}async stats(e){return this.rest.stats(e)}async time(e){return this.rest.time(e)}async request(e,t,a,r,n,o){return this.rest.request(e,t,a,r,n,o)}batchPublish(e){return this.rest.batchPublish(e)}batchPresence(e){return this.rest.batchPresence(e)}setLog(e){this.logger.setLog(e.level,e.handler)}};Ve.Platform=m;var Je=Ve,Ke=class e{toJSON(){var e,t,a;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null==(e=this.push)?void 0:e.recipient,state:null==(t=this.push)?void 0:t.state,error:null==(a=this.push)?void 0:a.error}}}toString(){var e,t,a,r;let n="[DeviceDetails";return this.id&&(n+="; id="+this.id),this.platform&&(n+="; platform="+this.platform),this.formFactor&&(n+="; formFactor="+this.formFactor),this.clientId&&(n+="; clientId="+this.clientId),this.metadata&&(n+="; metadata="+this.metadata),this.deviceIdentityToken&&(n+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null==(e=this.push)?void 0:e.recipient)&&(n+="; push.recipient="+JSON.stringify(this.push.recipient)),(null==(t=this.push)?void 0:t.state)&&(n+="; push.state="+this.push.state),(null==(a=this.push)?void 0:a.error)&&(n+="; push.error="+JSON.stringify(this.push.error)),(null==(r=this.push)?void 0:r.metadata)&&(n+="; push.metadata="+this.push.metadata),n+="]",n}static toRequestBody(e,t,a){return se(e,t,a)}static fromResponseBody(t,a,r){return r&&(t=oe(t,a,r)),Array.isArray(t)?e.fromValuesArray(t):e.fromValues(t)}static fromValues(t){return t.error=t.error&&S.fromValues(t.error),Object.assign(new e,t)}static fromLocalDevice(t){return Object.assign(new e,t)}static fromValuesArray(t){const a=t.length,r=new Array(a);for(let n=0;n<a;n++)r[n]=e.fromValues(t[n]);return r}};async function $e(e,t,a,r){return e.http.supportsAuthHeaders?r(P(await e.auth.getAuthHeaders(),t),a):r(t,P(await e.auth.getAuthParams(),a))}var Qe=class e{static async get(t,a,r,n,o,s){return e.do(Ee.Get,t,a,null,r,n,o,null!=s&&s)}static async delete(t,a,r,n,o,s){return e.do(Ee.Delete,t,a,null,r,n,o,s)}static async post(t,a,r,n,o,s,i){return e.do(Ee.Post,t,a,r,n,o,s,i)}static async patch(t,a,r,n,o,s,i){return e.do(Ee.Patch,t,a,r,n,o,s,i)}static async put(t,a,r,n,o,s,i){return e.do(Ee.Put,t,a,r,n,o,s,i)}static async do(e,t,a,r,n,o,s,i){s&&((o=o||{}).envelope=s);const c=t.logger;let l=await $e(t,n,o,(async function n(o,s){var i;if(c.shouldLog(v.LOG_MICRO)){let n=r;if((null==(i=o["content-type"])?void 0:i.indexOf("msgpack"))>0)try{t._MsgPack||_e("MsgPack"),n=t._MsgPack.decode(r)}catch(t){v.logAction(c,v.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+Y(t))}v.logAction(c,v.LOG_MICRO,"Resource."+e+"()","Sending; "+He(a,s)+"; Body: "+n)}const l=await t.http.do(e,a,o,r,s);return l.error&&De.isTokenErr(l.error)?(await t.auth.authorize(null,null),$e(t,o,s,n)):{err:l.error,body:l.body,headers:l.headers,unpacked:l.unpacked,statusCode:l.statusCode}}));if(s&&(l=function(e,t,a){if(e.err&&!e.body)return{err:e.err};if(e.statusCode===xe.NoContent)return p(d({},e),{body:[],unpacked:!0});let r=e.body;if(!e.unpacked)try{r=oe(r,t,a)}catch(e){return X(e)?{err:e}:{err:new C(Y(e),null)}}if(!r)return{err:new C("unenvelope(): Response body is missing",null)};const{statusCode:n,response:o,headers:s}=r;if(void 0===n)return p(d({},e),{body:r,unpacked:!0});if(n<200||n>=300){let t=o&&o.error||e.err;return t||(t=new Error("Error in unenveloping "+r),t.statusCode=n),{err:t,body:o,headers:s,unpacked:!0,statusCode:n}}return{err:e.err,body:o,headers:s,unpacked:!0,statusCode:n}}(l,t._MsgPack,s)),c.shouldLog(v.LOG_MICRO)&&function(e,t,a,r,n){e.err?v.logAction(n,v.LOG_MICRO,"Resource."+t+"()","Received Error; "+He(a,r)+"; Error: "+Y(e.err)):v.logAction(n,v.LOG_MICRO,"Resource."+t+"()","Received; "+He(a,r)+"; Headers: "+Fe(e.headers)+"; StatusCode: "+e.statusCode+"; Body: "+(m.BufferUtils.isBuffer(e.body)?" (Base64): "+m.BufferUtils.base64Encode(e.body):": "+m.Config.inspect(e.body)))}(l,e,a,o,c),i){if(l.err)throw l.err;{const e=d({},l);return delete e.err,e}}return l}};function Xe(e){const t=e.match(/^\.\/(\w+)\?(.*)$/);return t&&t[2]&&Q(t[2])}var Ye=class{constructor(e,t,a){this.resource=e,this.items=t;const r=this;a&&("first"in a&&(this.first=async function(){return r.get(a.first)}),"current"in a&&(this.current=async function(){return r.get(a.current)}),this.next=async function(){return"next"in a?r.get(a.next):null},this.hasNext=function(){return"next"in a},this.isLast=()=>{var e;return!(null==(e=this.hasNext)?void 0:e.call(this))})}async get(e){const t=this.resource,a=await Qe.get(t.client,t.path,t.headers,e,t.envelope,!1);return t.handlePage(a)}},Ze=class extends Ye{constructor(e,t,a,r,n,o){super(e,t,n),this.statusCode=r,this.success=r<300&&r>=200,this.headers=a,this.errorCode=o&&o.code,this.errorMessage=o&&o.message}toJSON(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}}},et=class{constructor(e,t,a,r,n,o){this.client=e,this.path=t,this.headers=a,this.envelope=null!=r?r:null,this.bodyHandler=n,this.useHttpPaginatedResponse=o||!1}get logger(){return this.client.logger}async get(e){const t=await Qe.get(this.client,this.path,this.headers,e,this.envelope,!1);return this.handlePage(t)}async delete(e){const t=await Qe.delete(this.client,this.path,this.headers,e,this.envelope,!1);return this.handlePage(t)}async post(e,t){const a=await Qe.post(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(a)}async put(e,t){const a=await Qe.put(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(a)}async patch(e,t){const a=await Qe.patch(this.client,this.path,t,this.headers,e,this.envelope,!1);return this.handlePage(a)}async handlePage(e){if(e.err&&(t=e.err,a=e.body,!this.useHttpPaginatedResponse||!a&&"number"!=typeof t.code))throw v.logAction(this.logger,v.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+Y(e.err)),e.err;var t,a;let r,n,o;try{r=e.statusCode==xe.NoContent?[]:await this.bodyHandler(e.body,e.headers||{},e.unpacked)}catch(t){throw e.err||t}return e.headers&&(n=e.headers.Link||e.headers.link)&&(o=function(e){"string"==typeof e&&(e=e.split(","));const t={};for(let a=0;a<e.length;a++){const r=e[a].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(r){const e=Xe(r[1]);e&&(t[r[2]]=e)}}return t}(n)),this.useHttpPaginatedResponse?new Ze(this,r,e.headers||{},e.statusCode,o,e.err):new Ye(this,r,o)}},tt=class e{toJSON(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}}toString(){let e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+="]",e}static fromResponseBody(t,a,r){return r&&(t=oe(t,a,r)),Array.isArray(t)?e.fromValuesArray(t):e.fromValues(t)}static fromValues(t){return Object.assign(new e,t)}static fromValuesArray(t){const a=t.length,r=new Array(a);for(let n=0;n<a;n++)r[n]=e.fromValues(t[n]);return r}};tt.toRequestBody=se;var at=tt,rt=class{constructor(e){this.client=e,this.deviceRegistrations=new nt(e),this.channelSubscriptions=new ot(e)}async publish(e,t){const a=this.client,r=a.options.useBinaryProtocol?"msgpack":"json",n=Re.defaultPostHeaders(a.options,{format:r}),o={},s=P({recipient:e},t);P(n,a.options.headers),a.options.pushFullWait&&P(o,{fullWait:"true"});const i=se(s,a._MsgPack,r);await Qe.post(a,"/push/publish",i,n,o,null,!0)}},nt=class{constructor(e){this.client=e}async save(e){const t=this.client,a=Ke.fromValues(e),r=t.options.useBinaryProtocol?"msgpack":"json",n=Re.defaultPostHeaders(t.options,{format:r}),o={};P(n,t.options.headers),t.options.pushFullWait&&P(o,{fullWait:"true"});const s=se(a,t._MsgPack,r),i=await Qe.put(t,"/push/deviceRegistrations/"+encodeURIComponent(e.id),s,n,o,null,!0);return Ke.fromResponseBody(i.body,t._MsgPack,i.unpacked?void 0:r)}async get(e){const t=this.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=Re.defaultGetHeaders(t.options,{format:a}),n=e.id||e;if("string"!=typeof n||!n.length)throw new S("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400);P(r,t.options.headers);const o=await Qe.get(t,"/push/deviceRegistrations/"+encodeURIComponent(n),r,{},null,!0);return Ke.fromResponseBody(o.body,t._MsgPack,o.unpacked?void 0:a)}async list(e){const t=this.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:a,n=Re.defaultGetHeaders(t.options,{format:a});return P(n,t.options.headers),new et(t,"/push/deviceRegistrations",n,r,(async function(e,r,n){return Ke.fromResponseBody(e,t._MsgPack,n?void 0:a)})).get(e)}async remove(e){const t=this.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=Re.defaultGetHeaders(t.options,{format:a}),n={},o=e.id||e;if("string"!=typeof o||!o.length)throw new S("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400);P(r,t.options.headers),t.options.pushFullWait&&P(n,{fullWait:"true"}),await Qe.delete(t,"/push/deviceRegistrations/"+encodeURIComponent(o),r,n,null,!0)}async removeWhere(e){const t=this.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=Re.defaultGetHeaders(t.options,{format:a});P(r,t.options.headers),t.options.pushFullWait&&P(e,{fullWait:"true"}),await Qe.delete(t,"/push/deviceRegistrations",r,e,null,!0)}},ot=class e{constructor(t){this.remove=e.prototype.removeWhere,this.client=t}async save(e){const t=this.client,a=at.fromValues(e),r=t.options.useBinaryProtocol?"msgpack":"json",n=Re.defaultPostHeaders(t.options,{format:r}),o={};P(n,t.options.headers),t.options.pushFullWait&&P(o,{fullWait:"true"});const s=se(a,t._MsgPack,r),i=await Qe.post(t,"/push/channelSubscriptions",s,n,o,null,!0);return at.fromResponseBody(i.body,t._MsgPack,i.unpacked?void 0:r)}async list(e){const t=this.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:a,n=Re.defaultGetHeaders(t.options,{format:a});return P(n,t.options.headers),new et(t,"/push/channelSubscriptions",n,r,(async function(e,r,n){return at.fromResponseBody(e,t._MsgPack,n?void 0:a)})).get(e)}async removeWhere(e){const t=this.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=Re.defaultGetHeaders(t.options,{format:a});P(r,t.options.headers),t.options.pushFullWait&&P(e,{fullWait:"true"}),await Qe.delete(t,"/push/channelSubscriptions",r,e,null,!0)}async listChannels(e){const t=this.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:a,n=Re.defaultGetHeaders(t.options,{format:a});return P(n,t.options.headers),t.options.pushFullWait&&P(e,{fullWait:"true"}),new et(t,"/push/channels",n,r,(async function(e,r,n){const o=!n&&a?oe(e,t._MsgPack,a):e;for(let e=0;e<o.length;e++)o[e]=String(o[e]);return o})).get(e)}},st=class{constructor(e){var t;this.client=e,this.admin=new rt(e),m.Config.push&&(null==(t=e.options.plugins)?void 0:t.Push)&&(this.stateMachine=new e.options.plugins.Push.ActivationStateMachine(e),this.LocalDevice=e.options.plugins.Push.localDeviceFactory(Ke))}async activate(e,t){await new Promise(((a,r)=>{var n;(null==(n=this.client.options.plugins)?void 0:n.Push)?this.stateMachine?this.stateMachine.activatedCallback?r(new S("Activation already in progress",4e4,400)):(this.stateMachine.activatedCallback=e=>{e?r(e):a()},this.stateMachine.updateFailedCallback=t,this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledActivate(this.stateMachine,e))):r(new S("This platform is not supported as a target of push notifications",4e4,400)):r(me("Push"))}))}async deactivate(e){await new Promise(((t,a)=>{var r;(null==(r=this.client.options.plugins)?void 0:r.Push)?this.stateMachine?this.stateMachine.deactivatedCallback?a(new S("Deactivation already in progress",4e4,400)):(this.stateMachine.deactivatedCallback=e=>{e?a(e):t()},this.stateMachine.handleEvent(new this.client.options.plugins.Push.CalledDeactivate(this.stateMachine,e))):a(new S("This platform is not supported as a target of push notifications",4e4,400)):a(me("Push"))}))}};function it(e){let t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=ee(e.data)),t}async function ct(e,t,a,r){const n=dt(a),o=function(e,t,a){if(a&&a.cipher){e||_e("Crypto");const r=e.getCipher(a.cipher,t);return{cipher:r.cipherParams,channelCipher:r.cipher}}return null!=a?a:{}}(t,e,null!=r?r:null);try{await ht(n,o)}catch(t){v.logAction(e,v.LOG_ERROR,"Message.fromEncoded()",t.toString())}return n}async function lt(e,t){const a=e.data;if("string"!=typeof a&&!m.BufferUtils.isBuffer(a)&&null!=a){if(!R(a)&&!Array.isArray(a))throw new S("Data type is unsupported",40013,400);e.data=JSON.stringify(a),e.encoding=e.encoding?e.encoding+"/json":"json"}return null!=t&&t.cipher?async function(e,t){let a=e.data,r=e.encoding,n=t.channelCipher;r=r?r+"/":"",m.BufferUtils.isBuffer(a)||(a=m.BufferUtils.utf8Encode(String(a)),r+="utf-8/");const o=await n.encrypt(a);return e.data=o,e.encoding=r+"cipher+"+n.algorithm,e}(e,t):e}async function ut(e,t){return Promise.all(e.map((e=>lt(e,t))))}var ft=se;async function ht(e,t){const a=function(e){return e&&e.channelOptions?e:{channelOptions:e,plugins:{},baseEncodedPreviousPayload:void 0}}(t);let r=e.data;const n=e.encoding;if(n){const t=n.split("/");let o,s=t.length,i=e.data,c="";try{for(;(o=s)>0;){const e=t[--s].match(/([-\w]+)(\+([\w-]+))?/);if(!e)break;switch(c=e[1],c){case"base64":i=m.BufferUtils.base64Decode(String(i)),o==t.length&&(r=i);continue;case"utf-8":i=m.BufferUtils.utf8Decode(i);continue;case"json":i=JSON.parse(i);continue;case"cipher":if(null!=a.channelOptions&&a.channelOptions.cipher&&a.channelOptions.channelCipher){const t=e[3],r=a.channelOptions.channelCipher;if(t!=r.algorithm)throw new Error("Unable to decrypt message with given cipher; incompatible cipher params");i=await r.decrypt(i);continue}throw new Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!a.plugins||!a.plugins.vcdiff)throw new S("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"==typeof Uint8Array)throw new S("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{let e=a.baseEncodedPreviousPayload;"string"==typeof e&&(e=m.BufferUtils.utf8Encode(e));const t=m.BufferUtils.toBuffer(e);i=m.BufferUtils.toBuffer(i),i=m.BufferUtils.arrayBufferViewToBuffer(a.plugins.vcdiff.decode(i,t)),r=i}catch(e){throw new S("Vcdiff delta decode failed with "+e,40018,400)}continue;default:throw new Error("Unknown encoding")}}}catch(e){const t=e;throw new S("Error processing the "+c+" encoding, decoder returned "+t.message+"",t.code||40013,400)}finally{e.encoding=o<=0?null:t.slice(0,o).join("/"),e.data=i}}a.baseEncodedPreviousPayload=r}function dt(e){return Object.assign(new gt,e)}function pt(e){const t=e.length,a=new Array(t);for(let r=0;r<t;r++)a[r]=dt(e[r]);return a}function yt(e){let t,a=0;for(let r=0;r<e.length;r++)t=e[r],a+=t.size||(t.size=it(t));return a}var gt=class{toJSON(){let e=this.encoding,t=this.data;return t&&m.BufferUtils.isBuffer(t)&&(arguments.length>0?(e=e?e+"/base64":"base64",t=m.BufferUtils.base64Encode(t)):t=m.BufferUtils.toBuffer(t)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:e,data:t}}toString(){let e="[Message";return this.name&&(e+="; name="+this.name),this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.extras&&(e+="; extras ="+JSON.stringify(this.extras)),this.data&&("string"==typeof this.data?e+="; data="+this.data:m.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+m.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+="]",e}},mt=gt,_t=["absent","present","enter","leave","update"];async function kt(e,t,a){const r=wt(t,!0);try{await bt(r,null!=a?a:{})}catch(t){v.logAction(e,v.LOG_ERROR,"PresenceMessage.fromEncoded()",t.toString())}return r}function wt(e,t){return t&&(e.action=_t[e.action]),Object.assign(new St,e)}var bt=ht;async function vt(e,t,a,r,n){const o=[];n&&(e=oe(e,r,n));for(let r=0;r<e.length;r++){const n=o[r]=wt(e[r],!0);try{await bt(n,t)}catch(e){v.logAction(a,v.LOG_ERROR,"PresenceMessage.fromResponseBody()",e.toString())}}return o}function zt(e){const t=e.length,a=new Array(t);for(let r=0;r<t;r++)a[r]=wt(e[r]);return a}function Ot(e){return e instanceof St?e:wt({data:e})}var St=class{isSynthesized(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId}parseId(){if(!this.id)throw new Error("parseId(): Presence message does not contain an id");const e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}}toJSON(){let e=this.data,t=this.encoding;return e&&m.BufferUtils.isBuffer(e)&&(arguments.length>0?(t=t?t+"/base64":"base64",e=m.BufferUtils.base64Encode(e)):e=m.BufferUtils.toBuffer(e)),{id:this.id,clientId:this.clientId,action:(a=this.action,_t.indexOf(a)),data:e,encoding:t,extras:this.extras};var a}toString(){let e="[PresenceMessage";return e+="; action="+this.action,this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.data&&("string"==typeof this.data?e+="; data="+this.data:m.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+m.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+="]",e}},Ct=St,Pt=class{constructor(e){this.channel=e}get logger(){return this.channel.logger}async get(e){v.logAction(this.logger,v.LOG_MICRO,"RestPresence.get()","channel = "+this.channel.name);const t=this.channel.client,a=t.options.useBinaryProtocol?"msgpack":"json",r=this.channel.client.http.supportsLinkHeaders?void 0:a,n=Re.defaultGetHeaders(t.options,{format:a});P(n,t.options.headers);const o=this.channel.channelOptions;return new et(t,this.channel.client.rest.presenceMixin.basePath(this),n,r,(async(e,r,n)=>await vt(e,o,this.logger,t._MsgPack,n?void 0:a))).get(e)}async history(e){return v.logAction(this.logger,v.LOG_MICRO,"RestPresence.history()","channel = "+this.channel.name),this.channel.client.rest.presenceMixin.history(this,e)}},At=class{constructor(e,t,a){var r,n;v.logAction(e.logger,v.LOG_MINOR,"RestChannel()","started; name = "+t),this.name=t,this.client=e,this.presence=new Pt(this),this.channelOptions=Pe(null!=(r=e._Crypto)?r:null,this.logger,a),(null==(n=e.options.plugins)?void 0:n.Push)&&(this._push=new e.options.plugins.Push.PushChannel(this))}get push(){return this._push||_e("Push"),this._push}get logger(){return this.client.logger}setOptions(e){var t;this.channelOptions=Pe(null!=(t=this.client._Crypto)?t:null,this.logger,e)}async history(e){return v.logAction(this.logger,v.LOG_MICRO,"RestChannel.history()","channel = "+this.name),this.client.rest.channelMixin.history(this,e)}async publish(...e){const t=e[0],a=e[1];let r,n;if("string"==typeof t||null===t)r=[dt({name:t,data:a})],n=e[2];else if(R(t))r=[dt(t)],n=e[1];else{if(!Array.isArray(t))throw new S("The single-argument form of publish() expects a message object or an array of message objects",40013,400);r=pt(t),n=e[1]}n||(n={});const o=this.client,s=o.options,i=s.useBinaryProtocol?"msgpack":"json",c=o.options.idempotentRestPublishing,l=Re.defaultPostHeaders(o.options,{format:i});if(P(l,s.headers),c&&function(e){return e.every((function(e){return!e.id}))}(r)){const e=await ae(9);r.forEach((function(t,a){t.id=e+":"+a.toString()}))}await ut(r,this.channelOptions);const u=yt(r),f=s.maxMessageSize;if(u>f)throw new S("Maximum size of messages that can be published at once exceeded ( was "+u+" bytes; limit is "+f+" bytes)",40009,400);await this._publish(ft(r,o._MsgPack,i),l,n)}async _publish(e,t,a){await Qe.post(this.client,this.client.rest.channelMixin.basePath(this)+"/messages",e,t,a,null,!0)}async status(){return this.client.rest.channelMixin.status(this)}},jt=class e{constructor(e){this.entries=e&&e.entries||void 0,this.schema=e&&e.schema||void 0,this.appId=e&&e.appId||void 0,this.inProgress=e&&e.inProgress||void 0,this.unit=e&&e.unit||void 0,this.intervalId=e&&e.intervalId||void 0}static fromValues(t){return new e(t)}},Rt=class{static basePath(e){return"/channels/"+encodeURIComponent(e.name)}static history(e,t){const a=e.client,r=a.options.useBinaryProtocol?"msgpack":"json",n=e.client.http.supportsLinkHeaders?void 0:r,o=Re.defaultGetHeaders(a.options,{format:r});P(o,a.options.headers);const s=e.channelOptions;return new et(a,this.basePath(e)+"/messages",o,n,(async function(t,n,o){return await async function(e,t,a,r,n){n&&(e=oe(e,r,n));for(let r=0;r<e.length;r++){const n=e[r]=dt(e[r]);try{await ht(n,t)}catch(e){v.logAction(a,v.LOG_ERROR,"Message.fromResponseBody()",e.toString())}}return e}(t,s,e.logger,a._MsgPack,o?void 0:r)})).get(t)}static async status(e){const t=e.client.options.useBinaryProtocol?"msgpack":"json",a=Re.defaultPostHeaders(e.client.options,{format:t});return(await Qe.get(e.client,this.basePath(e),a,{},t,!0)).body}},It=class{static basePath(e){return Rt.basePath(e.channel)+"/presence"}static async history(e,t){const a=e.channel.client,r=a.options.useBinaryProtocol?"msgpack":"json",n=e.channel.client.http.supportsLinkHeaders?void 0:r,o=Re.defaultGetHeaders(a.options,{format:r});P(o,a.options.headers);const s=e.channel.channelOptions;return new et(a,this.basePath(e)+"/history",o,n,(async function(t,n,o){return await vt(t,s,e.logger,a._MsgPack,o?void 0:r)})).get(t)}},Tt=class{constructor(e){this.channelMixin=Rt,this.presenceMixin=It,this.Resource=Qe,this.DeviceDetails=Ke,this.client=e,this.channels=new Et(this.client),this.push=new st(this.client)}async stats(e){const t=Re.defaultGetHeaders(this.client.options),a=this.client.options.useBinaryProtocol?"msgpack":"json",r=this.client.http.supportsLinkHeaders?void 0:a;return P(t,this.client.options.headers),new et(this.client,"/stats",t,r,(function(e,t,a){const r=a?e:JSON.parse(e);for(let e=0;e<r.length;e++)r[e]=jt.fromValues(r[e]);return r})).get(e)}async time(e){const t=Re.defaultGetHeaders(this.client.options);this.client.options.headers&&P(t,this.client.options.headers);let{error:a,body:r,unpacked:n}=await this.client.http.do(Ee.Get,(e=>this.client.baseUri(e)+"/time"),t,null,e);if(a)throw a;n||(r=JSON.parse(r));const o=r[0];if(!o)throw new S("Internal error (unexpected result type from GET /time)",5e4,500);return this.client.serverTimeOffset=o-Date.now(),o}async request(e,t,a,r,n,o){var s;const[i,c,l]=(()=>this.client.options.useBinaryProtocol?(this.client._MsgPack||_e("MsgPack"),[this.client._MsgPack.encode,this.client._MsgPack.decode,"msgpack"]):[JSON.stringify,JSON.parse,"json"])(),u=this.client.http.supportsLinkHeaders?void 0:l;r=r||{};const f=e.toLowerCase(),h="get"==f?Re.defaultGetHeaders(this.client.options,{format:l,protocolVersion:a}):Re.defaultPostHeaders(this.client.options,{format:l,protocolVersion:a});"string"!=typeof n&&(n=null!=(s=i(n))?s:null),P(h,this.client.options.headers),o&&P(h,o);const d=new et(this.client,t,h,u,(async function(e,t,a){return j(a?e:c(e))}),!0);if(!m.Http.methods.includes(f))throw new S("Unsupported method "+f,40500,405);return m.Http.methodsWithBody.includes(f)?d[f](r,n):d[f](r)}async batchPublish(e){let t,a;Array.isArray(e)?(t=e,a=!1):(t=[e],a=!0);const r=this.client.options.useBinaryProtocol?"msgpack":"json",n=Re.defaultPostHeaders(this.client.options,{format:r});this.client.options.headers&&P(n,this.client.options.headers);const o=se(t,this.client._MsgPack,r),s=await Qe.post(this.client,"/messages",o,n,{},null,!0),i=s.unpacked?s.body:oe(s.body,this.client._MsgPack,r);return a?i[0]:i}async batchPresence(e){const t=this.client.options.useBinaryProtocol?"msgpack":"json",a=Re.defaultPostHeaders(this.client.options,{format:t});this.client.options.headers&&P(a,this.client.options.headers);const r=e.join(","),n=await Qe.get(this.client,"/presence",a,{channels:r},null,!0);return n.unpacked?n.body:oe(n.body,this.client._MsgPack,t)}async revokeTokens(e,t){if(Be(this.client.options))throw new S("Cannot revoke tokens when using token auth",40162,401);const a=this.client.options.keyName;let r=null!=t?t:{};const n=d({targets:e.map((e=>`${e.type}:${e.value}`))},r),o=this.client.options.useBinaryProtocol?"msgpack":"json",s=Re.defaultPostHeaders(this.client.options,{format:o});this.client.options.headers&&P(s,this.client.options.headers);const i=se(n,this.client._MsgPack,o),c=await Qe.post(this.client,`/keys/${a}/revokeTokens`,i,s,{},null,!0);return c.unpacked?c.body:oe(c.body,this.client._MsgPack,o)}},Et=class{constructor(e){this.client=e,this.all=Object.create(null)}get(e,t){e=String(e);let a=this.all[e];return a?t&&a.setOptions(t):this.all[e]=a=new At(this.client,e,t),a}release(e){delete this.all[String(e)]}},Mt=class extends Je{constructor(e){super(Re.objectifyOptions(e,!1,"BaseRest",v.defaultLogger,{Rest:Tt}))}},xt={Rest:Tt},qt=class extends mt{static async fromEncoded(e,t){return ct(v.defaultLogger,m.Crypto,e,t)}static async fromEncodedArray(e,t){return async function(e,t,a,r){return Promise.all(a.map((function(a){return ct(e,t,a,r)})))}(v.defaultLogger,m.Crypto,e,t)}static fromValues(e){return Object.assign(new mt,e)}static async encode(e,t){return lt(e,t)}static async decode(e,t){return ht(e,t)}},Ut=class extends Ct{static async fromEncoded(e,t){return kt(v.defaultLogger,e,t)}static async fromEncodedArray(e,t){return async function(e,t,a){return Promise.all(t.map((function(t){return kt(e,t,a)})))}(v.defaultLogger,e,t)}static fromValues(e,t){return wt(e,t)}},Lt=class e extends Mt{constructor(t){var a,r;if(!e._MsgPack)throw new Error("Expected DefaultRest._MsgPack to have been set");super(Re.objectifyOptions(t,!0,"Rest",v.defaultLogger,p(d({},xt),{Crypto:null!=(a=e.Crypto)?a:void 0,MsgPack:null!=(r=e._MsgPack)?r:void 0})))}static get Crypto(){if(null===this._Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(e){this._Crypto=e}};Lt._Crypto=null,Lt.Message=qt,Lt.PresenceMessage=Ut,Lt._MsgPack=null,Lt._Http=We;var Nt=Lt;function Bt(e,t,a){let r,n,o;for(let s=0;s<e.length;s++)if(r=e[s],a&&(r=r[a]),Array.isArray(r)){for(;-1!==(n=r.indexOf(t));)r.splice(n,1);a&&0===r.length&&delete e[s][a]}else if(R(r))for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&Array.isArray(r[o])&&Bt([r],t,o)}var Gt=class{constructor(e){this.logger=e,this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}on(...e){if(1===e.length){const t=e[0];if("function"!=typeof t)throw new Error("EventListener.on(): Invalid arguments: "+m.Config.inspect(e));this.any.push(t)}if(2===e.length){const[t,a]=e;if("function"!=typeof a)throw new Error("EventListener.on(): Invalid arguments: "+m.Config.inspect(e));if(T(t))this.any.push(a);else if(Array.isArray(t))t.forEach((e=>{this.on(e,a)}));else{if("string"!=typeof t)throw new Error("EventListener.on(): Invalid arguments: "+m.Config.inspect(e));(this.events[t]||(this.events[t]=[])).push(a)}}}off(...e){if(0==e.length||T(e[0])&&T(e[1]))return this.any=[],this.events=Object.create(null),this.anyOnce=[],void(this.eventsOnce=Object.create(null));const[t,a]=e;let r=null,n=null;if(1!==e.length&&a){if("function"!=typeof a)throw new Error("EventEmitter.off(): invalid arguments:"+m.Config.inspect(e));[n,r]=[t,a]}else"function"==typeof t?r=t:n=t;if(r&&T(n))Bt([this.any,this.events,this.anyOnce,this.eventsOnce],r);else if(Array.isArray(n))n.forEach((e=>{this.off(e,r)}));else{if("string"!=typeof n)throw new Error("EventEmitter.off(): invalid arguments:"+m.Config.inspect(e));r?Bt([this.events,this.eventsOnce],r,n):(delete this.events[n],delete this.eventsOnce[n])}}listeners(e){if(e){const t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null}emit(e,...t){const a={event:e},r=[];this.anyOnce.length&&(Array.prototype.push.apply(r,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(r,this.any);const n=this.eventsOnce[e];n&&(Array.prototype.push.apply(r,n),delete this.eventsOnce[e]);const o=this.events[e];o&&Array.prototype.push.apply(r,o),r.forEach((e=>{!function(e,t,a,r){try{a.apply(t,r)}catch(t){v.logAction(e,v.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+t+"; stack = "+(t&&t.stack))}}(this.logger,a,e,t)}))}once(...e){const t=e.length;if(0===t||1===t&&"function"!=typeof e[0]){const t=e[0];return new Promise((e=>{this.once(t,e)}))}const[a,r]=e;if(1===e.length&&"function"==typeof a)this.anyOnce.push(a);else if(T(a)){if("function"!=typeof r)throw new Error("EventEmitter.once(): Invalid arguments:"+m.Config.inspect(e));this.anyOnce.push(r)}else if(Array.isArray(a)){const t=this,n=function(){const o=Array.prototype.slice.call(arguments);if(a.forEach((function(e){t.off(e,n)})),"function"!=typeof r)throw new Error("EventEmitter.once(): Invalid arguments:"+m.Config.inspect(e));r.apply(this,o)};a.forEach((function(e){t.on(e,n)}))}else{if("string"!=typeof a)throw new Error("EventEmitter.once(): Invalid arguments:"+m.Config.inspect(e));const t=this.eventsOnce[a]||(this.eventsOnce[a]=[]);if(r){if("function"!=typeof r)throw new Error("EventEmitter.once(): Invalid arguments:"+m.Config.inspect(e));t.push(r)}}}async whenState(e,t){if("string"!=typeof e||"string"!=typeof t)throw new Error("whenState requires a valid state String argument");return e===t?null:this.once(e)}},Dt={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},Ft=[];Object.keys(Dt).forEach((function(e){Ft[Dt[e]]=e}));var Ht={HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,PRESENCE:65536,PUBLISH:1<<17,SUBSCRIBE:1<<18,PRESENCE_SUBSCRIBE:1<<19},Wt=Object.keys(Ht);function Vt(e){const t=[];if(e)for(let a=0;a<e.length;a++)t.push(e[a].toString());return"[ "+t.join(", ")+" ]"}Ht.MODE_ALL=Ht.PRESENCE|Ht.PUBLISH|Ht.SUBSCRIBE|Ht.PRESENCE_SUBSCRIBE;var Jt=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],Kt=se;function $t(e,t){const a=e.error;a&&(e.error=S.fromValues(a));const r=e.messages;if(r)for(let e=0;e<r.length;e++)r[e]=dt(r[e]);const n=t?e.presence:void 0;if(t&&n&&t)for(let e=0;e<n.length;e++)n[e]=t.presenceMessageFromValues(n[e],!0);return Object.assign(new ta,p(d({},e),{presence:n}))}function Qt(e){return $t(e,{presenceMessageFromValues:wt,presenceMessagesFromValuesArray:zt})}function Xt(e){return Object.assign(new ta,e)}function Yt(e,t){let a="[ProtocolMessage";void 0!==e.action&&(a+="; action="+Ft[e.action]||0);const r=["id","channel","channelSerial","connectionId","count","msgSerial","timestamp"];let n;for(let t=0;t<r.length;t++)n=r[t],void 0!==e[n]&&(a+="; "+n+"="+e[n]);if(e.messages&&(a+="; messages="+Vt(pt(e.messages))),e.presence&&t&&(a+="; presence="+Vt(t.presenceMessagesFromValuesArray(e.presence))),e.error&&(a+="; error="+S.fromValues(e.error).toString()),e.auth&&e.auth.accessToken&&(a+="; token="+e.auth.accessToken),e.flags&&(a+="; flags="+Wt.filter(e.hasFlag).join(",")),e.params){let t="";W(e.params,(function(a){t.length>0&&(t+="; "),t+=a+"="+e.params[a]})),t.length>0&&(a+="; params=["+t+"]")}return a+="]",a}var Zt,ea,ta=class{constructor(){this.hasFlag=e=>(this.flags&Ht[e])>0}setFlag(e){return this.flags=this.flags|Ht[e]}getMode(){return this.flags&&this.flags&Ht.MODE_ALL}encodeModesToFlags(e){e.forEach((e=>this.setFlag(e)))}decodeModesFromFlags(){const e=[];return Jt.forEach((t=>{this.hasFlag(t)&&e.push(t)})),e.length>0?e:void 0}},aa=ta,ra=class extends Gt{constructor(e){super(e),this.messages=[]}count(){return this.messages.length}push(e){this.messages.push(e)}shift(){return this.messages.shift()}last(){return this.messages[this.messages.length-1]}copyAll(){return this.messages.slice()}append(e){this.messages.push.apply(this.messages,e)}prepend(e){this.messages.unshift.apply(this.messages,e)}completeMessages(e,t,a){v.logAction(this.logger,v.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+e+"; count = "+t),a=a||null;const r=this.messages;if(0===r.length)throw new Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");const n=r[0];if(n){const o=n.message.msgSerial,s=e+t;if(s>o){const e=r.splice(0,s-o);for(const t of e)t.callback(a)}0==r.length&&this.emit("idle")}}completeAllMessages(e){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e)}resetSendAttempted(){for(let e of this.messages)e.sendAttempted=!1}clear(){v.logAction(this.logger,v.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")}},na=class{constructor(e,t){this.message=e,this.callback=t,this.merged=!1;const a=e.action;this.sendAttempted=!1,this.ackRequired=a==Dt.MESSAGE||a==Dt.PRESENCE}},oa=class extends Gt{constructor(e){super(e.logger),this.transport=e,this.messageQueue=new ra(this.logger),e.on("ack",((e,t)=>{this.onAck(e,t)})),e.on("nack",((e,t,a)=>{this.onNack(e,t,a)}))}onAck(e,t){v.logAction(this.logger,v.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages(e,t)}onNack(e,t,a){v.logAction(this.logger,v.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+Y(a)),a||(a=new S("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(e,t,a)}onceIdle(e){const t=this.messageQueue;0!==t.count()?t.once("idle",e):e()}send(e){e.ackRequired&&this.messageQueue.push(e),this.logger.shouldLog(v.LOG_MICRO)&&v.logActionNoStrip(this.logger,v.LOG_MICRO,"Protocol.send()","sending msg; "+Yt(e.message,this.transport.connectionManager.realtime._RealtimePresence)),e.sendAttempted=!0,this.transport.send(e.message)}getTransport(){return this.transport}getPendingMessages(){return this.messageQueue.copyAll()}clearPendingMessages(){return this.messageQueue.clear()}finish(){const e=this.transport;this.onceIdle((function(){e.disconnect()}))}},sa=class{constructor(e,t,a,r){this.previous=e,this.current=t,a&&(this.retryIn=a),r&&(this.reason=r)}},ia={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001},ca={disconnected:()=>S.fromValues({statusCode:400,code:ia.DISCONNECTED,message:"Connection to server temporarily unavailable"}),suspended:()=>S.fromValues({statusCode:400,code:ia.SUSPENDED,message:"Connection to server unavailable"}),failed:()=>S.fromValues({statusCode:400,code:ia.FAILED,message:"Connection failed or disconnected by server"}),closing:()=>S.fromValues({statusCode:400,code:ia.CLOSING,message:"Connection closing"}),closed:()=>S.fromValues({statusCode:400,code:ia.CLOSED,message:"Connection closed"}),unknownConnectionErr:()=>S.fromValues({statusCode:500,code:ia.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"}),unknownChannelErr:()=>S.fromValues({statusCode:500,code:ia.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})},la=Xt({action:Dt.CLOSE}),ua=Xt({action:Dt.DISCONNECT}),fa=class extends Gt{constructor(e,t,a,r){super(e.logger),r&&(a.format=void 0,a.heartbeats=!0),this.connectionManager=e,this.auth=t,this.params=a,this.timeouts=a.options.timeouts,this.format=a.format,this.isConnected=!1,this.isFinished=!1,this.isDisposed=!1,this.maxIdleInterval=null,this.idleTimer=null,this.lastActivity=null}connect(){}close(){this.isConnected&&this.requestClose(),this.finish("closed",ca.closed())}disconnect(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||ca.disconnected())}fail(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||ca.failed())}finish(e,t){var a;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!=(a=this.idleTimer)?a:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())}onProtocolMessage(e){switch(this.logger.shouldLog(v.LOG_MICRO)&&v.logActionNoStrip(this.logger,v.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+Yt(e,this.connectionManager.realtime._RealtimePresence)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case Dt.HEARTBEAT:v.logActionNoStrip(this.logger,v.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case Dt.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case Dt.CLOSED:this.onClose(e);break;case Dt.DISCONNECTED:this.onDisconnect(e);break;case Dt.ACK:this.emit("ack",e.msgSerial,e.count);break;case Dt.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case Dt.SYNC:this.connectionManager.onChannelMessage(e,this);break;case Dt.ACTIVATE:break;case Dt.AUTH:ne(this.auth.authorize(),(e=>{e&&v.logAction(this.logger,v.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+Y(e))}));break;case Dt.ERROR:if(v.logAction(this.logger,v.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+m.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}this.connectionManager.onChannelMessage(e,this);break;default:this.connectionManager.onChannelMessage(e,this)}}onConnect(e){if(this.isConnected=!0,!e.connectionDetails)throw new Error("Transport.onConnect(): Connect message recieved without connectionDetails");const t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity())}onDisconnect(e){const t=e&&e.error;v.logAction(this.logger,v.LOG_MINOR,"Transport.onDisconnect()","err = "+Y(t)),this.finish("disconnected",t)}onFatalError(e){const t=e&&e.error;v.logAction(this.logger,v.LOG_MINOR,"Transport.onFatalError()","err = "+Y(t)),this.finish("failed",t)}onClose(e){const t=e&&e.error;v.logAction(this.logger,v.LOG_MINOR,"Transport.onClose()","err = "+Y(t)),this.finish("closed",t)}requestClose(){v.logAction(this.logger,v.LOG_MINOR,"Transport.requestClose()",""),this.send(la)}requestDisconnect(){v.logAction(this.logger,v.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(ua)}ping(e){const t={action:Dt.HEARTBEAT};e&&(t.id=e),this.send(Xt(t))}dispose(){v.logAction(this.logger,v.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()}onActivity(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=Date.now(),this.setIdleTimer(this.maxIdleInterval+100))}setIdleTimer(e){this.idleTimer||(this.idleTimer=setTimeout((()=>{this.onIdleTimerExpire()}),e))}onIdleTimerExpire(){if(!this.lastActivity||!this.maxIdleInterval)throw new Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;const e=Date.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){const t="No activity seen from realtime in "+e+"ms; assuming connection has dropped";v.logAction(this.logger,v.LOG_ERROR,"Transport.onIdleTimerExpire()",t),this.disconnect(new S(t,80003,408))}else this.setIdleTimer(t+100)}static tryConnect(e,t,a,r,n){const o=new e(t,a,r);let s;const i=function(e){clearTimeout(s),n({event:this.event,error:e})},c=t.options.timeouts.realtimeRequestTimeout;return s=setTimeout((()=>{o.off(["preconnect","disconnected","failed"]),o.dispose(),i.call({event:"disconnected"},new S("Timeout waiting for transport to indicate itself viable",5e4,500))}),c),o.on(["failed","disconnected"],i),o.on("preconnect",(function(){v.logAction(t.logger,v.LOG_MINOR,"Transport.tryConnect()","viable transport "+o),clearTimeout(s),o.off(["failed","disconnected"],i),n(null,o)})),o.connect(),o}static isAvailable(){throw new S("isAvailable not implemented for transport",5e4,500)}};(ea=Zt||(Zt={})).WebSocket="web_socket",ea.Comet="comet",ea.XhrPolling="xhr_polling";var ha=void 0!==a.g?a.g:"undefined"!=typeof window?window:self,da=()=>{var e;return void 0!==m.WebStorage&&(null==(e=m.WebStorage)?void 0:e.localSupported)},pa=()=>{var e;return void 0!==m.WebStorage&&(null==(e=m.WebStorage)?void 0:e.sessionSupported)},ya=function(){},ga="ably-transport-preference";function ma(e){try{return JSON.parse(e)}catch(e){return null}}var _a=class{constructor(e,t,a,r){this.options=e,this.host=t,this.mode=a,this.connectionKey=r,this.format=e.useBinaryProtocol?"msgpack":"json"}getConnectParams(e){const t=e?A(e):{},a=this.options;switch(this.mode){case"resume":t.resume=this.connectionKey;break;case"recover":{const e=ma(a.recover);e&&(t.recover=e.connectionKey);break}}return void 0!==a.clientId&&(t.clientId=a.clientId),!1===a.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=Re.protocolVersion,t.agent=Ce(this.options),void 0!==a.transportParams&&P(t,a.transportParams),t}toString(){let e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+="]",e}},ka=class e extends Gt{constructor(e,t){super(e.logger),this.supportedTransports={},this.disconnectedRetryCount=0,this.pendingChannelMessagesState={isProcessing:!1,queue:[]},this.realtime=e,this.initTransports(),this.options=t;const a=t.timeouts,r=a.webSocketConnectTimeout+a.realtimeRequestTimeout;if(this.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:r,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:a.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:a.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:a.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},this.state=this.states.initialized,this.errorReason=null,this.queuedMessages=new ra(this.logger),this.msgSerial=0,this.connectionDetails=void 0,this.connectionId=void 0,this.connectionKey=void 0,this.connectionStateTtl=a.connectionStateTtl,this.maxIdleInterval=null,this.transports=U(t.transports||Re.defaultTransports,this.supportedTransports),this.transportPreference=null,this.transports.includes(Zt.WebSocket)&&(this.webSocketTransportAvailable=!0),this.transports.includes(Zt.XhrPolling)?this.baseTransport=Zt.XhrPolling:this.transports.includes(Zt.Comet)&&(this.baseTransport=Zt.Comet),this.httpHosts=Re.getHosts(t),this.wsHosts=Re.getHosts(t,!0),this.activeProtocol=null,this.host=null,this.lastAutoReconnectAttempt=null,this.lastActivity=null,this.forceFallbackHost=!1,this.connectCounter=0,this.wsCheckResult=null,this.webSocketSlowTimer=null,this.webSocketGiveUpTimer=null,this.abandonedWebSocket=!1,v.logAction(this.logger,v.LOG_MINOR,"Realtime.ConnectionManager()","started"),v.logAction(this.logger,v.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(t.transports||Re.defaultTransports)+"]"),v.logAction(this.logger,v.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+this.transports+"]"),v.logAction(this.logger,v.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+this.httpHosts+"]"),!this.transports.length){const e="no requested transports available";throw v.logAction(this.logger,v.LOG_ERROR,"realtime.ConnectionManager()",e),new Error(e)}const n=m.Config.addEventListener;n&&(pa()&&"function"==typeof t.recover&&n("beforeunload",this.persistConnection.bind(this)),!0===t.closeOnUnload&&n("beforeunload",(()=>{v.logAction(this.logger,v.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),this.requestState({state:"closing"})})),n("online",(()=>{var e;this.state==this.states.disconnected||this.state==this.states.suspended?(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager caught browser online event","reattempting connection"),this.requestState({state:"connecting"})):this.state==this.states.connecting&&(null==(e=this.pendingTransport)||e.off(),this.disconnectAllTransports(),this.startConnect())})),n("offline",(()=>{this.state==this.states.connected&&(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager caught browser offline event","disconnecting active transport"),this.disconnectAllTransports())})))}static supportedTransports(e){const t={supportedTransports:{}};return this.initTransports(e,t),t.supportedTransports}static initTransports(e,t){const a=d(d({},m.Transports.bundledImplementations),e);[Zt.WebSocket,...m.Transports.order].forEach((e=>{const r=a[e];r&&r.isAvailable()&&(t.supportedTransports[e]=r)}))}initTransports(){e.initTransports(this.realtime._additionalTransportImplementations,this)}createTransportParams(e,t){return new _a(this.options,e,t,this.connectionKey)}getTransportParams(e){(e=>{if(this.connectionKey)return void e("resume");if("string"==typeof this.options.recover)return void e("recover");const t=this.options.recover,a=this.getSessionRecoverData(),r=this.sessionRecoveryName();if(a&&"function"==typeof t)return v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data (recovery scope: "+r+")"),void t(a,(t=>{t?(this.options.recover=a.recoveryKey,e("recover")):e("clean")}));e("clean")})((t=>{const a=this.createTransportParams(null,t);if("recover"===t){v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+this.options.recover);const e=ma(this.options.recover);e&&(this.msgSerial=e.msgSerial)}else v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+a.toString());e(a)}))}tryATransport(e,t,a){v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),this.proposedTransport=fa.tryConnect(this.supportedTransports[t],this,this.realtime.auth,e,((r,n)=>{const o=this.state;return o==this.states.closing||o==this.states.closed||o==this.states.failed?(n&&(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+o.state+" while we were attempting the transport; closing "+n),n.close()),void a(!0)):r?(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+r.event+", err: "+r.error.toString()),void(!De.isTokenErr(r.error)||this.errorReason&&De.isTokenErr(this.errorReason)?"failed"===r.event?(this.notifyState({state:"failed",error:r.error}),a(!0)):"disconnected"===r.event&&(!(s=r.error).statusCode||!s.code||s.statusCode>=500||Object.values(ia).includes(s.code)?a(!1):(this.notifyState({state:this.states.connecting.failState,error:r.error}),a(!0))):(this.errorReason=r.error,ne(this.realtime.auth._forceNewToken(null,null),(r=>{r?this.actOnErrorFromAuthorize(r):this.tryATransport(e,t,a)}))))):(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),this.setTransportPending(n,e),void a(null,n));var s}))}setTransportPending(e,t){const a=t.mode;v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+a),this.pendingTransport=e,this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),e.once("connected",((t,r,n)=>{this.activateTransport(t,e,r,n),"recover"===a&&this.options.recover&&(delete this.options.recover,this.unpersistConnection())}));const r=this;e.on(["disconnected","closed","failed"],(function(t){r.deactivateTransport(e,this.event,t)})),this.emit("transport.pending",e)}activateTransport(e,t,a,r){v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),a&&v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+a),r&&v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),this.persistTransportPreference(t);const n=this.state,o=this.states.connected.state;if(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+n.state),n.state==this.states.closing.state||n.state==this.states.closed.state||n.state==this.states.failed.state)return v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;if(delete this.pendingTransport,!t.isConnected)return v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;const s=this.activeProtocol;this.activeProtocol=new oa(t),this.host=t.params.host;const i=r.connectionKey;if(i&&this.connectionKey!=i&&this.setConnection(a,r,!!e),this.onConnectionDetailsUpdate(r,t),m.Config.nextTick((()=>{t.on("connected",((e,a,r)=>{this.onConnectionDetailsUpdate(r,t),this.emit("update",new sa(o,o,null,e))}))})),n.state===this.states.connected.state?e&&(this.errorReason=this.realtime.connection.errorReason=e,this.emit("update",new sa(o,o,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),this.emit("transport.active",t),s)if(s.messageQueue.count()>0&&v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+s.transport.shortName+", new one is "+t.shortName+") finishing with "+s.messageQueue.count()+" messages still pending"),s.transport===t){const e="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+(new Error).stack;v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.activateTransport()",e)}else s.finish();return!0}deactivateTransport(e,t,a){const r=this.activeProtocol,n=r&&r.getTransport()===e,o=e===this.pendingTransport,s=this.noTransportsScheduledForActivation();if(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(n?"; was active":o?"; was pending":"")+(s?"":"; another transport is scheduled for activation")),a&&a.message&&v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+a.message),n&&(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),r.clearPendingMessages(),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),n&&s||n&&"failed"===t||"closed"===t||null===r&&o){if("disconnected"===t&&a&&a.statusCode>500&&this.httpHosts.length>1)return this.unpersistTransportPreference(),this.forceFallbackHost=!0,void this.notifyState({state:t,error:a,retryImmediately:!0});const e="failed"===t&&De.isTokenErr(a)?"disconnected":t;this.notifyState({state:e,error:a})}}noTransportsScheduledForActivation(){return!this.pendingTransport||!this.pendingTransport.isConnected}setConnection(e,t,a){const r=this.connectionId;(r&&r!==e||!r&&a)&&(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey}clearConnection(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()}createRecoveryKey(){return this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null}checkConnectionStateFreshness(){if(!this.lastActivity||!this.connectionId)return;const e=Date.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}persistConnection(){if(pa()){const e=this.createRecoveryKey();e&&this.setSessionRecoverData({recoveryKey:e,disconnectedAt:Date.now(),location:ha.location,clientId:this.realtime.auth.clientId})}}unpersistConnection(){this.clearSessionRecoverData()}getError(){if(this.errorReason){const e=C.fromValues(this.errorReason);return e.cause=this.errorReason,e}return this.getStateError()}getStateError(){var e,t;return null==(t=(e=ca)[this.state.state])?void 0:t.call(e)}activeState(){return this.state.queueEvents||this.state.sendEvents}enactStateChange(e){const t="Connection state",a=e.current+(e.reason?"; reason: "+e.reason:"");"failed"===e.current?v.logAction(this.logger,v.LOG_ERROR,t,a):v.logAction(this.logger,v.LOG_MAJOR,t,a),v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));const r=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(r.terminal||"suspended"===r.state)&&this.clearConnection(),this.emit("connectionstate",e)}startTransitionTimer(e){v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout((()=>{this.transitionTimer&&(this.transitionTimer=null,v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),this.notifyState({state:e.failState}))}),e.retryDelay)}cancelTransitionTimer(){v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)}startSuspendTimer(){this.suspendTimer||(this.suspendTimer=setTimeout((()=>{this.suspendTimer&&(this.suspendTimer=null,v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),this.states.connecting.failState="suspended",this.notifyState({state:"suspended"}))}),this.connectionStateTtl))}checkSuspendTimer(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()}cancelSuspendTimer(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)}startRetryTimer(e){this.retryTimer=setTimeout((()=>{v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),this.retryTimer=null,this.requestState({state:"connecting"})}),e)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}startWebSocketSlowTimer(){this.webSocketSlowTimer=setTimeout((()=>{v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager WebSocket slow timer","checking connectivity"),this.checkWsConnectivity().then((()=>{v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager WebSocket slow timer","ws connectivity check succeeded"),this.wsCheckResult=!0})).catch((()=>{v.logAction(this.logger,v.LOG_MAJOR,"ConnectionManager WebSocket slow timer","ws connectivity check failed"),this.wsCheckResult=!1})),this.realtime.http.checkConnectivity&&ne(this.realtime.http.checkConnectivity(),((e,t)=>{e||!t?(v.logAction(this.logger,v.LOG_MAJOR,"ConnectionManager WebSocket slow timer","http connectivity check failed"),this.cancelWebSocketGiveUpTimer(),this.notifyState({state:"disconnected",error:new S("Unable to connect (network unreachable)",80003,404)})):v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager WebSocket slow timer","http connectivity check succeeded")}))}),this.options.timeouts.webSocketSlowTimeout)}cancelWebSocketSlowTimer(){this.webSocketSlowTimer&&(clearTimeout(this.webSocketSlowTimer),this.webSocketSlowTimer=null)}startWebSocketGiveUpTimer(e){this.webSocketGiveUpTimer=setTimeout((()=>{var t,a;this.wsCheckResult||(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager WebSocket give up timer","websocket connection took more than 10s; "+(this.baseTransport?"trying base transport":"")),this.baseTransport?(this.abandonedWebSocket=!0,null==(t=this.proposedTransport)||t.dispose(),null==(a=this.pendingTransport)||a.dispose(),this.connectBase(e,++this.connectCounter)):v.logAction(this.logger,v.LOG_MAJOR,"ConnectionManager WebSocket give up timer","websocket connectivity appears to be unavailable but no other transports to try"))}),this.options.timeouts.webSocketConnectTimeout)}cancelWebSocketGiveUpTimer(){this.webSocketGiveUpTimer&&(clearTimeout(this.webSocketGiveUpTimer),this.webSocketGiveUpTimer=null)}notifyState(e){var t,a;const r=e.state,n="disconnected"===r&&(this.state===this.states.connected||e.retryImmediately||this.state===this.states.connecting&&e.error&&De.isTokenErr(e.error)&&!(this.errorReason&&De.isTokenErr(this.errorReason)));if(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+r+(n?"; will retry connection immediately":"")),r==this.state.state)return;if(this.cancelTransitionTimer(),this.cancelRetryTimer(),this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.checkSuspendTimer(e.state),"suspended"!==r&&"connected"!==r||(this.disconnectedRetryCount=0),this.state.terminal)return;const o=this.states[e.state];let s=o.retryDelay;"disconnected"===o.state&&(this.disconnectedRetryCount++,s=fe(o.retryDelay,this.disconnectedRetryCount));const i=new sa(this.state.state,o.state,s,e.error||(null==(a=(t=ca)[o.state])?void 0:a.call(t)));if(n){const e=()=>{this.state===this.states.disconnected&&(this.lastAutoReconnectAttempt=Date.now(),this.requestState({state:"connecting"}))},t=this.lastAutoReconnectAttempt&&Date.now()-this.lastAutoReconnectAttempt+1;t&&t<1e3?(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+t+"ms ago, waiting another "+(1e3-t)+"ms before trying again"),setTimeout(e,1e3-t)):m.Config.nextTick(e)}else"disconnected"!==r&&"suspended"!==r||this.startRetryTimer(s);("disconnected"===r&&!n||"suspended"===r||o.terminal)&&m.Config.nextTick((()=>{this.disconnectAllTransports()})),"connected"!=r||this.activeProtocol||v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),this.enactStateChange(i),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(r,i.reason),this.failQueuedMessages(i.reason))}requestState(e){var t,a;const r=e.state;if(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+r+"; current state: "+this.state.state),r==this.state.state)return;if(this.cancelWebSocketSlowTimer(),this.cancelWebSocketGiveUpTimer(),this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(r),"connecting"==r&&"connected"==this.state.state)return;if("closing"==r&&"closed"==this.state.state)return;const n=this.states[r],o=new sa(this.state.state,n.state,null,e.error||(null==(a=(t=ca)[n.state])?void 0:a.call(t)));this.enactStateChange(o),"connecting"==r&&m.Config.nextTick((()=>{this.startConnect()})),"closing"==r&&this.closeImpl()}startConnect(){if(this.state!==this.states.connecting)return void v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);const e=this.realtime.auth,t=++this.connectCounter,a=()=>{this.checkConnectionStateFreshness(),this.getTransportParams((e=>{if("recover"===e.mode&&e.options.recover){const t=ma(e.options.recover);t&&this.realtime.channels.recoverChannels(t.channelSerials)}t===this.connectCounter&&this.connectImpl(e,t)}))};if(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===e.method)a();else{const r=e=>{t===this.connectCounter&&(e?this.actOnErrorFromAuthorize(e):a())};this.errorReason&&De.isTokenErr(this.errorReason)?ne(e._forceNewToken(null,null),r):ne(e._ensureValidAuthCredentials(!1),r)}}connectImpl(e,t){const a=this.state.state;if(a!==this.states.connecting.state)return void v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect, but was "+a);const r=this.getTransportPreference();r&&r===this.baseTransport&&this.webSocketTransportAvailable&&this.checkWsConnectivity().then((()=>{this.unpersistTransportPreference(),this.state===this.states.connecting&&(v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.connectImpl():","web socket connectivity available, cancelling connection attempt with "+this.baseTransport),this.disconnectAllTransports(),this.connectWs(e,++this.connectCounter))})).catch(ya),r&&r===this.baseTransport||this.baseTransport&&!this.webSocketTransportAvailable?this.connectBase(e,t):this.connectWs(e,t)}connectWs(e,t){v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.connectWs()"),this.wsCheckResult=null,this.abandonedWebSocket=!1,this.startWebSocketSlowTimer(),this.startWebSocketGiveUpTimer(e),this.tryTransportWithFallbacks("web_socket",e,!0,t,(()=>!1!==this.wsCheckResult&&!this.abandonedWebSocket))}connectBase(e,t){v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.connectBase()"),this.baseTransport?this.tryTransportWithFallbacks(this.baseTransport,e,!1,t,(()=>!0)):this.notifyState({state:"disconnected",error:new S("No transports left to try",8e4,404)})}tryTransportWithFallbacks(e,t,a,r,n){v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.tryTransportWithFallbacks()",e);const o=e=>{this.notifyState({state:this.states.connecting.failState,error:e})},s=a?this.wsHosts.slice():this.httpHosts.slice(),i=(e,t)=>{r===this.connectCounter&&(n()?t||e||l():t&&t.dispose())},c=s.shift();if(!c)return void o(new S("Unable to connect (no available host)",80003,404));t.host=c;const l=()=>{s.length?this.realtime.http.checkConnectivity?ne(this.realtime.http.checkConnectivity(),((a,c)=>{r===this.connectCounter&&n()&&(a?o(a):c?(t.host=K(s),this.tryATransport(t,e,i)):o(new S("Unable to connect (network unreachable)",80003,404)))})):o(new C("Internal error: Http.checkConnectivity not set",null,500)):o(new S("Unable to connect (and no more fallback hosts to try)",80003,404))};if(this.forceFallbackHost&&s.length)return this.forceFallbackHost=!1,void l();this.tryATransport(t,e,i)}closeImpl(){v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),this.pendingTransport&&(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+this.pendingTransport),this.pendingTransport.close()),this.activeProtocol&&(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),this.notifyState({state:"closed"})}onAuthUpdated(e,t){var a;switch(this.state.state){case"connected":{v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport");const r=null==(a=this.activeProtocol)?void 0:a.getTransport();r&&r.onAuthUpdated&&r.onAuthUpdated(e);const n=Xt({action:Dt.AUTH,auth:{accessToken:e.token}});this.send(n);const o=()=>{this.off(s),t(null,e)},s=e=>{"failed"===e.current&&(this.off(o),this.off(s),t(e.reason||this.getStateError()))};this.once("connectiondetails",o),this.on("connectionstate",s);break}case"connecting":v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();default:{v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");const a=r=>{switch(r.current){case"connected":this.off(a),t(null,e);break;case"failed":case"closed":case"suspended":this.off(a),t(r.reason||this.getStateError())}};this.on("connectionstate",a),"connecting"===this.state.state?this.startConnect():this.requestState({state:"connecting"})}}}disconnectAllTransports(){v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"),this.connectCounter++,this.pendingTransport&&(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+this.pendingTransport),this.pendingTransport.disconnect()),delete this.pendingTransport,this.proposedTransport&&(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting proposed transport: "+this.pendingTransport),this.proposedTransport.disconnect()),delete this.pendingTransport,this.activeProtocol&&(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect())}send(e,t,a){a=a||ya;const r=this.state;if(r.sendEvents)return v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.send()","sending event"),void this.sendImpl(new na(e,a));if(!t||!r.queueEvents){const e="rejecting event, queueEvent was "+t+", state was "+r.state;return v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.send()",e),void a(this.errorReason||new S(e,9e4,400))}this.logger.shouldLog(v.LOG_MICRO)&&v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+Yt(e,this.realtime._RealtimePresence)),this.queue(e,a)}sendImpl(e){const t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(e){v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+e.stack)}}queue(e,t){v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.queue()","queueing event");const a=this.queuedMessages.last(),r=this.options.maxMessageSize;a&&!a.sendAttempted&&function(e,t,a){let r;if(e.channel!==t.channel)return!1;if((r=e.action)!==Dt.PRESENCE&&r!==Dt.MESSAGE)return!1;if(r!==t.action)return!1;const n=r===Dt.PRESENCE?"presence":"messages",o=e[n].concat(t[n]);return!(yt(o)>a||!V(o,"clientId")||!o.every((function(e){return!e.id}))||(e[n]=o,0))}(a.message,e,r)?(a.merged||(a.callback=Ie.create(this.logger,[a.callback]),a.merged=!0),a.callback.push(t)):this.queuedMessages.push(new na(e,t))}sendQueuedMessages(){let e;for(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)}queuePendingMessages(e){e&&e.length&&(v.logAction(this.logger,v.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))}failQueuedMessages(e){const t=this.queuedMessages.count();t>0&&(v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+Y(e)),this.queuedMessages.completeAllMessages(e))}onChannelMessage(e,t){this.pendingChannelMessagesState.queue.push({message:e,transport:t}),this.pendingChannelMessagesState.isProcessing||this.processNextPendingChannelMessage()}processNextPendingChannelMessage(){if(this.pendingChannelMessagesState.queue.length>0){this.pendingChannelMessagesState.isProcessing=!0;const e=this.pendingChannelMessagesState.queue.shift();this.processChannelMessage(e.message).catch((e=>{v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.processNextPendingChannelMessage() received error ",e)})).finally((()=>{this.pendingChannelMessagesState.isProcessing=!1,this.processNextPendingChannelMessage()}))}}async processChannelMessage(e){await this.realtime.channels.processChannelMessage(e)}async ping(){var e;if("connected"!==this.state.state)throw new S("Unable to ping service; not connected",4e4,400);const t=null==(e=this.activeProtocol)?void 0:e.getTransport();if(!t)throw this.getStateError();v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.ping()","transport = "+t);const a=Date.now(),r=te();return ke(new Promise((e=>{const n=o=>{o===r&&(t.off("heartbeat",n),e(Date.now()-a))};t.on("heartbeat",n),t.ping(r)})),this.options.timeouts.realtimeRequestTimeout,"Timeout waiting for heartbeat response")}abort(e){this.activeProtocol.getTransport().fail(e)}getTransportPreference(){var e,t;return this.transportPreference||da()&&(null==(t=null==(e=m.WebStorage)?void 0:e.get)?void 0:t.call(e,ga))}persistTransportPreference(e){var t,a;this.transportPreference=e.shortName,da()&&(null==(a=null==(t=m.WebStorage)?void 0:t.set)||a.call(t,ga,e.shortName))}unpersistTransportPreference(){var e,t;this.transportPreference=null,da()&&(null==(t=null==(e=m.WebStorage)?void 0:e.remove)||t.call(e,ga))}actOnErrorFromAuthorize(e){if(40171===e.code)this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===xe.Forbidden){const t="Client configured authentication provider returned 403; failing the connection";v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new S(t,80019,403,e)})}else{const t="Client configured authentication provider request failed";v.logAction(this.logger,v.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new S(t,80019,401,e)})}}onConnectionDetailsUpdate(e,t){if(!e)return;this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);const a=e.clientId;if(a){const e=this.realtime.auth._uncheckedSetClientId(a);if(e)return v.logAction(this.logger,v.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",e.message),void t.fail(e)}const r=e.connectionStateTtl;r&&(this.connectionStateTtl=r),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}checkWsConnectivity(){const e=this.options.wsConnectivityCheckUrl||Re.wsConnectivityCheckUrl,t=new m.Config.WebSocket(e);return new Promise(((e,a)=>{let r=!1;t.onopen=()=>{r||(r=!0,e(),t.close())},t.onclose=t.onerror=()=>{r||(r=!0,a())}}))}sessionRecoveryName(){return this.options.recoveryKeyStorageName||"ably-connection-recovery"}getSessionRecoverData(){var e,t;return pa()&&(null==(t=null==(e=m.WebStorage)?void 0:e.getSession)?void 0:t.call(e,this.sessionRecoveryName()))}setSessionRecoverData(e){var t,a;return pa()&&(null==(a=null==(t=m.WebStorage)?void 0:t.setSession)?void 0:a.call(t,this.sessionRecoveryName(),e))}clearSessionRecoverData(){var e,t;return pa()&&(null==(t=null==(e=m.WebStorage)?void 0:e.removeSession)?void 0:t.call(e,this.sessionRecoveryName()))}},wa=class extends Gt{constructor(e,t){super(e.logger),this.whenState=e=>Gt.prototype.whenState.call(this,e,this.state),this.ably=e,this.connectionManager=new ka(e,t),this.state=this.connectionManager.state.state,this.key=void 0,this.id=void 0,this.errorReason=null,this.connectionManager.on("connectionstate",(e=>{const t=this.state=e.current;m.Config.nextTick((()=>{this.emit(t,e)}))})),this.connectionManager.on("update",(e=>{m.Config.nextTick((()=>{this.emit("update",e)}))}))}connect(){v.logAction(this.logger,v.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})}async ping(){return v.logAction(this.logger,v.LOG_MINOR,"Connection.ping()",""),this.connectionManager.ping()}close(){v.logAction(this.logger,v.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})}get recoveryKey(){return this.logger.deprecationWarning("The `Connection.recoveryKey` attribute has been replaced by the `Connection.createRecoveryKey()` method. Replace your usage of `recoveryKey` with the return value of `createRecoveryKey()`. `recoveryKey` will be removed in a future version."),this.createRecoveryKey()}createRecoveryKey(){return this.connectionManager.createRecoveryKey()}},ba=class{constructor(e,t,a,r,n){this.previous=e,this.current=t,"attached"===t&&(this.resumed=a,this.hasBacklog=r),n&&(this.reason=n)}},va=function(){};function za(e){const t=e||{},{agent:a}=t;return((e,t)=>{var a={};for(var r in e)u.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&l)for(var r of l(e))t.indexOf(r)<0&&f.call(e,r)&&(a[r]=e[r]);return a})(t,["agent"])}var Oa=class e extends Gt{constructor(e,t,a){var r,n;super(e.logger),this.retryCount=0,this.history=async function(e){v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name);const t=this.client.rest.channelMixin;if(e&&e.untilAttach){if("attached"!==this.state)throw new S("option untilAttach requires the channel to be attached",4e4,400);if(!this.properties.attachSerial)throw new S("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400);delete e.untilAttach,e.from_serial=this.properties.attachSerial}return t.history(this,e)},this.whenState=e=>Gt.prototype.whenState.call(this,e,this.state),v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel()","started; name = "+t),this.name=t,this.channelOptions=Pe(null!=(r=e._Crypto)?r:null,this.logger,a),this.client=e,this._presence=e._RealtimePresence?new e._RealtimePresence.RealtimePresence(this):null,this.connectionManager=e.connection.connectionManager,this.state="initialized",this.subscriptions=new Gt(this.logger),this.syncChannelSerial=void 0,this.properties={attachSerial:void 0,channelSerial:void 0},this.setOptions(a),this.errorReason=null,this._requestedFlags=null,this._mode=null,this._attachResume=!1,this._decodingContext={channelOptions:this.channelOptions,plugins:e.options.plugins||{},baseEncodedPreviousPayload:void 0},this._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},this._allChannelChanges=new Gt(this.logger),(null==(n=e.options.plugins)?void 0:n.Push)&&(this._push=new e.options.plugins.Push.PushChannel(this))}get presence(){return this._presence||_e("RealtimePresence"),this._presence}get push(){return this._push||_e("Push"),this._push}invalidStateError(){return new S("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)}static processListenerArgs(e){return"function"==typeof(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),e}async setOptions(e){var t;const a=this.channelOptions,r=function(e){if(e&&"params"in e&&!R(e.params))return new S("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!Array.isArray(e.modes))return new S("options.modes must be an array",4e4,400);for(let t=0;t<e.modes.length;t++){const a=e.modes[t];if(!a||"string"!=typeof a||!Jt.includes(String.prototype.toUpperCase.call(a)))return new S("Invalid channel mode: "+a,4e4,400)}}}(e);if(r)throw r;if(this.channelOptions=Pe(null!=(t=this.client._Crypto)?t:null,this.logger,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e,a))return this.attachImpl(),new Promise(((e,t)=>{this._allChannelChanges.once(["attached","update","detached","failed"],(function(a){switch(this.event){case"update":case"attached":e();break;default:t(a.reason)}}))}))}_shouldReattachToSetOptions(e,t){if("attached"!==this.state&&"attaching"!==this.state)return!1;if(null==e?void 0:e.params){const a=za(e.params),r=za(t.params);if(Object.keys(a).length!==Object.keys(r).length)return!0;if(!de(r,a))return!0}return!(!(null==e?void 0:e.modes)||t.modes&&ge(e.modes,t.modes))}async publish(...e){let t=e[0],a=e.length;if(!this.connectionManager.activeState())throw this.connectionManager.getError();if(1==a)if(R(t))t=[dt(t)];else{if(!Array.isArray(t))throw new S("The single-argument form of publish() expects a message object or an array of message objects",40013,400);t=pt(t)}else t=[dt({name:e[0],data:e[1]})];const r=this.client.options.maxMessageSize;await ut(t,this.channelOptions);const n=yt(t);if(n>r)throw new S("Maximum size of messages that can be published at once exceeded ( was "+n+" bytes; limit is "+r+" bytes)",40009,400);return new Promise(((e,a)=>{this._publish(t,(t=>t?a(t):e()))}))}_publish(e,t){v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.publish()","message count = "+e.length);const a=this.state;switch(a){case"failed":case"suspended":t(S.fromValues(this.invalidStateError()));break;default:{v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+a);const r=new aa;r.action=Dt.MESSAGE,r.channel=this.name,r.messages=e,this.sendMessage(r,t);break}}}onEvent(e){v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.onEvent()","received message");const t=this.subscriptions;for(let a=0;a<e.length;a++){const r=e[a];t.emit(r.name,r)}}async attach(){return"attached"===this.state?null:new Promise(((e,t)=>{this._attach(!1,null,((a,r)=>a?t(a):e(r)))}))}_attach(e,t,a){a||(a=e=>{e&&v.logAction(this.logger,v.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});const r=this.connectionManager;r.activeState()?(("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once((function(e){switch(this.event){case"attached":null==a||a(null,e);break;case"detached":case"suspended":case"failed":null==a||a(e.reason||r.getError()||new S("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==a||a(new S("Attach request superseded by a subsequent detach request",9e4,409))}}))):a(r.getError())}attachImpl(){v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");const e=Xt({action:Dt.ATTACH,channel:this.name,params:this.channelOptions.params,channelSerial:this.properties.channelSerial});this._requestedFlags?e.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&e.encodeModesToFlags(ce(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e,va)}async detach(){const e=this.connectionManager;if(!e.activeState())throw e.getError();switch(this.state){case"suspended":return void this.notifyState("detached");case"detached":return;case"failed":throw new S("Unable to detach; channel state = failed",90001,400);default:this.requestState("detaching");case"detaching":return new Promise(((t,a)=>{this.once((function(r){switch(this.event){case"detached":t();break;case"attached":case"suspended":case"failed":a(r.reason||e.getError()||new S("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":a(new S("Detach request superseded by a subsequent attach request",9e4,409))}}))}))}}detachImpl(e){v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");const t=Xt({action:Dt.DETACH,channel:this.name});this.sendMessage(t,e||va)}async subscribe(...t){const[a,r]=e.processListenerArgs(t);if("failed"===this.state)throw S.fromValues(this.invalidStateError());return a&&"object"==typeof a&&!Array.isArray(a)?this.client._FilteredSubscriptions.subscribeFilter(this,a,r):this.subscriptions.on(a,r),this.attach()}unsubscribe(...t){var a;const[r,n]=e.processListenerArgs(t);"object"==typeof r&&!n||(null==(a=this.filteredSubscriptions)?void 0:a.has(n))?this.client._FilteredSubscriptions.getAndDeleteFilteredSubscriptions(this,r,n).forEach((e=>this.subscriptions.off(e))):this.subscriptions.off(r,n)}sync(){switch(this.state){case"initialized":case"detaching":case"detached":throw new C("Unable to sync to channel; not attached",4e4)}const e=this.connectionManager;if(!e.activeState())throw e.getError();const t=Xt({action:Dt.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)}sendMessage(e,t){this.connectionManager.send(e,this.client.options.queueMessages,t)}sendPresence(e,t){const a=Xt({action:Dt.PRESENCE,channel:this.name,presence:Array.isArray(e)?this.client._RealtimePresence.presenceMessagesFromValuesArray(e):[this.client._RealtimePresence.presenceMessageFromValues(e)]});this.sendMessage(a,t)}async processMessage(e){e.action!==Dt.ATTACHED&&e.action!==Dt.MESSAGE&&e.action!==Dt.PRESENCE||this.setChannelSerial(e.channelSerial);let t,a=!1;switch(e.action){case Dt.ATTACHED:{this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};const t=e.decodeModesFromFlags();this.modes=t&&ie(t)||void 0;const a=e.hasFlag("RESUMED"),r=e.hasFlag("HAS_PRESENCE"),n=e.hasFlag("HAS_BACKLOG");if("attached"===this.state){a||this._presence&&this._presence.onAttached(r);const t=new ba(this.state,this.state,a,n,e.error);this._allChannelChanges.emit("update",t),a&&!this.channelOptions.updateOnAttached||this.emit("update",t)}else"detaching"===this.state?this.checkPendingState():this.notifyState("attached",e.error,a,r,n);break}case Dt.DETACHED:{const t=e.error?S.fromValues(e.error):new S("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",t):"attaching"===this.state?this.notifyState("suspended",t):"attached"!==this.state&&"suspended"!==this.state||this.requestState("attaching",t);break}case Dt.SYNC:if(a=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;case Dt.PRESENCE:{const r=e.presence;if(!r)break;const{id:n,connectionId:o,timestamp:s}=e,i=this.channelOptions;let c;for(let e=0;e<r.length;e++)try{c=r[e],await bt(c,i),c.connectionId||(c.connectionId=o),c.timestamp||(c.timestamp=s),c.id||(c.id=n+":"+e)}catch(e){v.logAction(this.logger,v.LOG_ERROR,"RealtimeChannel.processMessage()",e.toString())}this._presence&&this._presence.setPresence(r,a,t);break}case Dt.MESSAGE:{if("attached"!==this.state)return void v.logAction(this.logger,v.LOG_MAJOR,"RealtimeChannel.processMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');const t=e.messages,a=t[0],r=t[t.length-1],n=e.id,o=e.connectionId,s=e.timestamp;if(a.extras&&a.extras.delta&&a.extras.delta.from!==this._lastPayload.messageId){const t='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';v.logAction(this.logger,v.LOG_ERROR,"RealtimeChannel.processMessage()",t),this._startDecodeFailureRecovery(new S(t,40018,400));break}for(let e=0;e<t.length;e++){const a=t[e];try{await ht(a,this._decodingContext)}catch(e){switch(v.logAction(this.logger,v.LOG_ERROR,"RealtimeChannel.processMessage()",e.toString()),e.code){case 40018:return void this._startDecodeFailureRecovery(e);case 40019:case 40021:return void this.notifyState("failed",e)}}a.connectionId||(a.connectionId=o),a.timestamp||(a.timestamp=s),a.id||(a.id=n+":"+e)}this._lastPayload.messageId=r.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(t);break}case Dt.ERROR:{const t=e.error;t&&80016==t.code?this.checkPendingState():this.notifyState("failed",S.fromValues(t));break}default:v.logAction(this.logger,v.LOG_ERROR,"RealtimeChannel.processMessage()","Fatal protocol error: unrecognised action ("+e.action+")"),this.connectionManager.abort(ca.unknownChannelErr())}}_startDecodeFailureRecovery(e){this._lastPayload.decodeFailureRecoveryInProgress||(v.logAction(this.logger,v.LOG_MAJOR,"RealtimeChannel.processMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,(()=>{this._lastPayload.decodeFailureRecoveryInProgress=!1})))}onAttached(){v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)}notifyState(e,t,a,r,n){if(v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),["detached","suspended","failed"].includes(e)&&(this.properties.channelSerial=null),e===this.state)return;this._presence&&this._presence.actOnChannelState(e,r,t),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);const o=new ba(this.state,e,a,n,t),s='Channel state for channel "'+this.name+'"',i=e+(t?"; reason: "+t:"");"failed"===e?v.logAction(this.logger,v.LOG_ERROR,s,i):v.logAction(this.logger,v.LOG_MAJOR,s,i),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:"detaching"!==e&&"failed"!==e||(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,o),this.emit(e,o)}requestState(e,t){v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),this.checkPendingState()}checkPendingState(){if(this.connectionManager.state.sendEvents)switch(v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":this.sync()}else v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state)}timeoutPendingState(){switch(this.state){case"attaching":{const e=new S("Channel attach timed out",90007,408);this.notifyState("suspended",e);break}case"detaching":{const e=new S("Channel detach timed out",90007,408);this.notifyState("attached",e);break}default:this.checkPendingState()}}startStateTimerIfNotRunning(){this.stateTimer||(this.stateTimer=setTimeout((()=>{v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),this.stateTimer=null,this.timeoutPendingState()}),this.client.options.timeouts.realtimeRequestTimeout))}clearStateTimer(){const e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)}startRetryTimer(){if(this.retryTimer)return;this.retryCount++;const e=fe(this.client.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout((()=>{"suspended"===this.state&&this.connectionManager.state.sendEvents&&(this.retryTimer=null,v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),this.requestState("attaching"))}),e)}cancelRetryTimer(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)}getReleaseErr(){const e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new S("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)}setChannelSerial(e){v.logAction(this.logger,v.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)}async status(){return this.client.rest.channelMixin.status(this)}},Sa=class e extends Je{constructor(t){var a,r;if(super(Re.objectifyOptions(t,!1,"BaseRealtime",v.defaultLogger)),v.logAction(this.logger,v.LOG_MINOR,"Realtime()",""),"string"==typeof EdgeRuntime)throw new S('Ably.Realtime instance cannot be used in Vercel Edge runtime. If you are running Vercel Edge functions, please replace your "new Ably.Realtime()" with "new Ably.Rest()" and use Ably Rest API instead of the Realtime API. If you are server-rendering your application in the Vercel Edge runtime, please use the condition "if (typeof EdgeRuntime === \'string\')" to prevent instantiating Ably.Realtime instance during SSR in the Vercel Edge runtime.',4e4,400);this._additionalTransportImplementations=e.transportImplementationsFromPlugins(this.options.plugins),this._RealtimePresence=null!=(r=null==(a=this.options.plugins)?void 0:a.RealtimePresence)?r:null,this.connection=new wa(this,this.options),this._channels=new Pa(this),!1!==this.options.autoConnect&&this.connect()}static transportImplementationsFromPlugins(e){const t={};return(null==e?void 0:e.WebSocketTransport)&&(t[Zt.WebSocket]=e.WebSocketTransport),(null==e?void 0:e.XHRPolling)&&(t[Zt.XhrPolling]=e.XHRPolling),t}get channels(){return this._channels}connect(){v.logAction(this.logger,v.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()}close(){v.logAction(this.logger,v.LOG_MINOR,"Realtime.close()",""),this.connection.close()}};Sa.EventEmitter=Gt;var Ca=Sa,Pa=class extends Gt{constructor(e){super(e.logger),this.realtime=e,this.all=Object.create(null),e.connection.connectionManager.on("transport.active",(()=>{this.onTransportActive()}))}channelSerials(){let e={};for(const t of F(this.all,!0)){const a=this.all[t];a.properties.channelSerial&&(e[t]=a.properties.channelSerial)}return e}recoverChannels(e){for(const t of F(e,!0))this.get(t).properties.channelSerial=e[t]}async processChannelMessage(e){const t=e.channel;if(void 0===t)return void v.logAction(this.logger,v.LOG_ERROR,"Channels.processChannelMessage()","received event unspecified channel, action = "+e.action);const a=this.all[t];a?await a.processMessage(e):v.logAction(this.logger,v.LOG_ERROR,"Channels.processChannelMessage()","received event for non-existent channel: "+t)}onTransportActive(){for(const e in this.all){const t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&t.requestState("attaching")}}propogateConnectionInterruption(e,t){const a=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(const e in this.all){const n=this.all[e];a.includes(n.state)&&n.notifyState(r,t)}}get(e,t){e=String(e);let a=this.all[e];if(a){if(t){if(a._shouldReattachToSetOptions(t,a.channelOptions))throw new S("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);a.setOptions(t)}}else a=this.all[e]=new Oa(this.realtime,e,t);return a}getDerived(e,t,a){if(t.filter){const a=ye(t.filter),r=pe(e);e=`[filter=${a}${r.qualifierParam}]${r.channelName}`}return this.get(e,a)}release(e){e=String(e);const t=this.all[e];if(!t)return;const a=t.getReleaseErr();if(a)throw a;delete this.all[e]}},Aa=Ca;function ja(e){const t=e.channel.client,a=t.auth.clientId;return(!a||"*"===a)&&"connected"===t.connection.state}function Ra(e,t){if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;const a=e.parseId(),r=t.parseId();return a.msgSerial===r.msgSerial?a.index>r.index:a.msgSerial>r.msgSerial}var Ia=class extends Gt{constructor(e,t){super(e.logger),this.presence=e,this.map=Object.create(null),this.syncInProgress=!1,this.residualMembers=null,this.memberKey=t}get(e){return this.map[e]}getClient(e){const t=this.map,a=[];for(const r in t){const n=t[r];n.clientId==e&&"absent"!=n.action&&a.push(n)}return a}list(e){const t=this.map,a=e&&e.clientId,r=e&&e.connectionId,n=[];for(const e in t){const o=t[e];"absent"!==o.action&&(a&&a!=o.clientId||r&&r!=o.connectionId||n.push(o))}return n}put(e){"enter"!==e.action&&"update"!==e.action||((e=wt(e)).action="present");const t=this.map,a=this.memberKey(e);this.residualMembers&&delete this.residualMembers[a];const r=t[a];return!(r&&!Ra(e,r)||(t[a]=e,0))}values(){const e=this.map,t=[];for(const a in e){const r=e[a];"absent"!=r.action&&t.push(r)}return t}remove(e){const t=this.map,a=this.memberKey(e),r=t[a];return!(r&&!Ra(e,r)||(this.syncInProgress?((e=wt(e)).action="absent",t[a]=e):delete t[a],0))}startSync(){const e=this.map,t=this.syncInProgress;v.logAction(this.logger,v.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=A(e),this.setInProgress(!0))}endSync(){const e=this.map,t=this.syncInProgress;if(v.logAction(this.logger,v.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){for(const t in e)"absent"===e[t].action&&delete e[t];this.presence._synthesizeLeaves(H(this.residualMembers));for(const t in this.residualMembers)delete e[t];this.residualMembers=null,this.setInProgress(!1)}this.emit("sync")}waitSync(e){const t=this.syncInProgress;v.logAction(this.logger,v.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t?this.once("sync",e):e()}clear(){this.map={},this.setInProgress(!1),this.residualMembers=null}setInProgress(e){v.logAction(this.logger,v.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e}},Ta=class extends Gt{constructor(e){super(e.logger),this.channel=e,this.syncComplete=!1,this.members=new Ia(this,(e=>e.clientId+":"+e.connectionId)),this._myMembers=new Ia(this,(e=>e.clientId)),this.subscriptions=new Gt(this.logger),this.pendingPresence=[]}async enter(e){if(ja(this))throw new S("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter")}async update(e){if(ja(this))throw new S("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update")}async enterClient(e,t){return this._enterOrUpdateClient(void 0,e,t,"enter")}async updateClient(e,t){return this._enterOrUpdateClient(void 0,e,t,"update")}async _enterOrUpdateClient(e,t,a,r){const n=this.channel;if(!n.connectionManager.activeState())throw n.connectionManager.getError();v.logAction(this.logger,v.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+n.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.client.auth.clientId));const o=Ot(a);switch(o.action=r,e&&(o.id=e),t&&(o.clientId=t),await lt(o,n.channelOptions),n.state){case"attached":return new Promise(((e,t)=>{n.sendPresence(o,(a=>a?t(a):e()))}));case"initialized":case"detached":n.attach();case"attaching":return new Promise(((e,t)=>{this.pendingPresence.push({presence:o,callback:a=>a?t(a):e()})}));default:{const e=new C("Unable to "+r+" presence channel while in "+n.state+" state",90001);throw e.code=90001,e}}}async leave(e){if(ja(this))throw new S("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e)}async leaveClient(e,t){const a=this.channel;if(!a.connectionManager.activeState())throw a.connectionManager.getError();v.logAction(this.logger,v.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);const r=Ot(t);return r.action="leave",e&&(r.clientId=e),new Promise(((e,t)=>{switch(a.state){case"attached":a.sendPresence(r,(a=>a?t(a):e()));break;case"attaching":this.pendingPresence.push({presence:r,callback:a=>a?t(a):e()});break;case"initialized":case"failed":{const e=new C("Unable to leave presence channel (incompatible state)",90001);t(e);break}default:t(a.invalidStateError())}}))}async get(e){const t=!e||!("waitForSync"in e)||e.waitForSync;return new Promise(((a,r)=>{function n(t){a(e?t.list(e):t.values())}"suspended"!==this.channel.state?function(e,t,a){switch(e.state){case"attached":case"suspended":a();break;case"initialized":case"detached":case"detaching":case"attaching":ne(e.attach(),(function(e){e?t(e):a()}));break;default:t(S.fromValues(e.invalidStateError()))}}(this.channel,(e=>r(e)),(()=>{const e=this.members;t?e.waitSync((function(){n(e)})):n(e)})):t?r(S.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):n(this.members)}))}async history(e){v.logAction(this.logger,v.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name);const t=this.channel.client.rest.presenceMixin;if(e&&e.untilAttach){if("attached"!==this.channel.state)throw new S("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400);delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial}return t.history(this,e)}setPresence(e,t,a){let r,n;v.logAction(this.logger,v.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+a);const o=this.members,s=this._myMembers,i=[],c=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),a&&(n=a.match(/^[\w-]+:(.*)$/))&&(r=n[1]));for(let t=0;t<e.length;t++){const a=wt(e[t]);switch(a.action){case"leave":o.remove(a)&&i.push(a),a.connectionId!==c||a.isSynthesized()||s.remove(a);break;case"enter":case"present":case"update":o.put(a)&&i.push(a),a.connectionId===c&&s.put(a)}}t&&!r&&(o.endSync(),this.channel.syncChannelSerial=null);for(let e=0;e<i.length;e++){const t=i[e];this.subscriptions.emit(t.action,t)}}onAttached(e){v.logAction(this.logger,v.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),this._ensureMyMembersPresent();const t=this.pendingPresence,a=t.length;if(a){this.pendingPresence=[];const e=[],r=Ie.create(this.logger);v.logAction(this.logger,v.LOG_MICRO,"RealtimePresence.onAttached","sending "+a+" queued presence messages");for(let n=0;n<a;n++){const a=t[n];e.push(a.presence),r.push(a.callback)}this.channel.sendPresence(e,r)}}actOnChannelState(e,t,a){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();case"suspended":this.failPendingPresence(a)}}failPendingPresence(e){if(this.pendingPresence.length){v.logAction(this.logger,v.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+Y(e));for(let t=0;t<this.pendingPresence.length;t++)try{this.pendingPresence[t].callback(e)}catch(e){}this.pendingPresence=[]}}_clearMyMembers(){this._myMembers.clear()}_ensureMyMembersPresent(){const e=this._myMembers,t=e=>{if(e){const t="Presence auto-re-enter failed: "+e.toString(),a=new S(t,91004,400);v.logAction(this.logger,v.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",t);const r=new ba(this.channel.state,this.channel.state,!0,!1,a);this.channel.emit("update",r)}};for(const a in e.map){const r=e.map[a];v.logAction(this.logger,v.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+r.clientId+'" into the presence set'),ne(this._enterOrUpdateClient(r.id,r.clientId,r.data,"enter"),t)}}_synthesizeLeaves(e){const t=this.subscriptions;e.forEach((function(e){const a=wt({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:Date.now()});t.emit("leave",a)}))}async subscribe(...e){const t=Oa.processListenerArgs(e),a=t[0],r=t[1],n=this.channel;if("failed"===n.state)throw S.fromValues(n.invalidStateError());this.subscriptions.on(a,r),await n.attach()}unsubscribe(...e){const t=Oa.processListenerArgs(e),a=t[0],r=t[1];this.subscriptions.off(a,r)}},Ea=Zt.WebSocket,Ma=class extends fa{constructor(e,t,a){super(e,t,a),this.shortName=Ea,a.heartbeats=m.Config.useProtocolHeartbeats,this.wsHost=a.host}static isAvailable(){return!!m.Config.WebSocket}createWebSocket(e,t){return this.uri=e+$(t),new m.Config.WebSocket(this.uri)}toString(){return"WebSocketTransport; uri="+this.uri}connect(){v.logAction(this.logger,v.LOG_MINOR,"WebSocketTransport.connect()","starting"),fa.prototype.connect.call(this);const e=this,t=this.params,a=t.options,r=(a.tls?"wss://":"ws://")+this.wsHost+":"+Re.getPort(a)+"/";v.logAction(this.logger,v.LOG_MINOR,"WebSocketTransport.connect()","uri: "+r),ne(this.auth.getAuthParams(),(function(a,n){if(e.isDisposed)return;let o="";for(const e in n)o+=" "+e+": "+n[e]+";";if(v.logAction(e.logger,v.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+o+" err: "+a),a)return void e.disconnect(a);const s=t.getConnectParams(n);try{const t=e.wsConnection=e.createWebSocket(r,s);t.binaryType=m.Config.binaryType,t.onopen=function(){e.onWsOpen()},t.onclose=function(t){e.onWsClose(t)},t.onmessage=function(t){e.onWsData(t.data)},t.onerror=function(t){e.onWsError(t)},t.on&&t.on("ping",(function(){e.onActivity()}))}catch(t){v.logAction(e.logger,v.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(t.stack||t.message)),e.disconnect(t)}}))}send(e){const t=this.wsConnection;if(t)try{t.send(Kt(e,this.connectionManager.realtime._MsgPack,this.params.format))}catch(e){const t="Exception from ws connection when trying to send: "+Y(e);v.logAction(this.logger,v.LOG_ERROR,"WebSocketTransport.send()",t),this.finish("disconnected",new S(t,5e4,500))}else v.logAction(this.logger,v.LOG_ERROR,"WebSocketTransport.send()","No socket connection")}onWsData(e){v.logAction(this.logger,v.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage((t=e,a=this.connectionManager.realtime._MsgPack,r=this.connectionManager.realtime._RealtimePresence,$t(oe(t,a,this.format),r)))}catch(e){v.logAction(this.logger,v.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+e.stack)}var t,a,r}onWsOpen(){v.logAction(this.logger,v.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")}onWsClose(e){let t,a;if("object"==typeof e?(a=e.code,t=e.wasClean||1e3===a):(a=e,t=1e3==a),delete this.wsConnection,t){v.logAction(this.logger,v.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");const e=new S("Websocket closed",80003,400);this.finish("disconnected",e)}else{const e="Unclean disconnection of WebSocket ; code = "+a,t=new S(e,80003,400);v.logAction(this.logger,v.LOG_MINOR,"WebSocketTransport.onWsClose()",e),this.finish("disconnected",t)}this.emit("disposed")}onWsError(e){v.logAction(this.logger,v.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),m.Config.nextTick((()=>{this.disconnect(Error(e.message))}))}dispose(){v.logAction(this.logger,v.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;const e=this.wsConnection;e&&(e.onmessage=function(){},delete this.wsConnection,m.Config.nextTick((()=>{if(v.logAction(this.logger,v.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw new Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()})))}},xa=class{static subscribeFilter(e,t,a){const r=e=>{var r,n,o,s,i,c;const l={name:e.name,refTimeserial:null==(n=null==(r=e.extras)?void 0:r.ref)?void 0:n.timeserial,refType:null==(s=null==(o=e.extras)?void 0:o.ref)?void 0:s.type,isRef:!!(null==(c=null==(i=e.extras)?void 0:i.ref)?void 0:c.timeserial),clientId:e.clientId};Object.entries(t).find((([e,t])=>void 0!==t&&l[e]!==t))||a(e)};this.addFilteredSubscription(e,t,a,r),e.subscriptions.on(r)}static addFilteredSubscription(e,t,a,r){var n;if(e.filteredSubscriptions||(e.filteredSubscriptions=new Map),e.filteredSubscriptions.has(a)){const o=e.filteredSubscriptions.get(a);o.set(t,(null==(n=null==o?void 0:o.get(t))?void 0:n.concat(r))||[r])}else e.filteredSubscriptions.set(a,new Map([[t,[r]]]))}static getAndDeleteFilteredSubscriptions(e,t,a){if(!e.filteredSubscriptions)return[];if(!a&&t)return Array.from(e.filteredSubscriptions.entries()).map((([a,r])=>{var n;let o=r.get(t);return r.delete(t),0===r.size&&(null==(n=e.filteredSubscriptions)||n.delete(a)),o})).reduce(((e,t)=>t?e.concat(...t):e),[]);if(!a||!e.filteredSubscriptions.has(a))return[];const r=e.filteredSubscriptions.get(a);if(!t){const t=Array.from(r.values()).reduce(((e,t)=>e.concat(...t)),[]);return e.filteredSubscriptions.delete(a),t}let n=r.get(t);return r.delete(t),n||[]}},qa=class e extends Aa{constructor(t){var a;const r=e._MsgPack;if(!r)throw new Error("Expected DefaultRealtime._MsgPack to have been set");super(Re.objectifyOptions(t,!0,"Realtime",v.defaultLogger,p(d({},xt),{Crypto:null!=(a=e.Crypto)?a:void 0,MsgPack:r,RealtimePresence:{RealtimePresence:Ta,presenceMessageFromValues:wt,presenceMessagesFromValuesArray:zt},WebSocketTransport:Ma,MessageInteractions:xa})))}static get Crypto(){if(null===this._Crypto)throw new Error("Encryption not enabled; use ably.encryption.js instead");return this._Crypto}static set Crypto(e){this._Crypto=e}};qa.Utils=z,qa.ConnectionManager=ka,qa.ProtocolMessage=aa,qa._Crypto=null,qa.Message=qt,qa.PresenceMessage=Ut,qa._MsgPack=null,qa._Http=We;var Ua=qa,La=Uint8Array,Na=Uint32Array,Ba=Math.pow,Ga=new Na(8),Da=[],Fa=new Na(64);function Ha(e){return(e-(0|e))*Ba(2,32)|0}for(var Wa,Va,Ja=2,Ka=0;Ka<64;){for(Wa=!0,Va=2;Va<=Ja/2;Va++)Ja%Va==0&&(Wa=!1);Wa&&(Ka<8&&(Ga[Ka]=Ha(Ba(Ja,.5))),Da[Ka]=Ha(Ba(Ja,1/3)),Ka++),Ja++}var $a=!!new La(new Na([1]).buffer)[0];function Qa(e){return $a?e>>>24|(e>>>16&255)<<8|(65280&e)<<8|e<<24:e}function Xa(e,t){return e>>>t|e<<32-t}function Ya(e){var t,a=Ga.slice(),r=e.length,n=8*r,o=512-(n+64)%512-1+n+65,s=new La(o/8),i=new Na(s.buffer);s.set(e,0),s[r]=128,i[i.length-1]=Qa(n);for(var c=0;c<o/32;c+=16){var l=a.slice();for(t=0;t<64;t++){var u;if(t<16)u=Qa(i[c+t]);else{var f=Fa[t-15],h=Fa[t-2];u=Fa[t-7]+Fa[t-16]+(Xa(f,7)^Xa(f,18)^f>>>3)+(Xa(h,17)^Xa(h,19)^h>>>10)}Fa[t]=u|=0;for(var d=(Xa(l[4],6)^Xa(l[4],11)^Xa(l[4],25))+(l[4]&l[5]^~l[4]&l[6])+l[7]+u+Da[t],p=(Xa(l[0],2)^Xa(l[0],13)^Xa(l[0],22))+(l[0]&l[1]^l[2]&(l[0]^l[1])),y=7;y>0;y--)l[y]=l[y-1];l[0]=d+p|0,l[4]=l[4]+d|0}for(t=0;t<8;t++)a[t]=a[t]+l[t]|0}return new La(new Na(a.map((function(e){return Qa(e)}))).buffer)}var Za,er=new class{constructor(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}uint8ViewToBase64(e){let t="";const a=this.base64CharSet,r=e.byteLength,n=r%3,o=r-n;let s,i,c,l,u;for(let r=0;r<o;r+=3)u=e[r]<<16|e[r+1]<<8|e[r+2],s=(16515072&u)>>18,i=(258048&u)>>12,c=(4032&u)>>6,l=63&u,t+=a[s]+a[i]+a[c]+a[l];return 1==n?(u=e[o],s=(252&u)>>2,i=(3&u)<<4,t+=a[s]+a[i]+"=="):2==n&&(u=e[o]<<8|e[o+1],s=(64512&u)>>10,i=(1008&u)>>4,c=(15&u)<<2,t+=a[s]+a[i]+a[c]+"="),t}base64ToArrayBuffer(e){const t=null==atob?void 0:atob(e),a=t.length,r=new Uint8Array(a);for(let e=0;e<a;e++){const a=t.charCodeAt(e);r[e]=a}return this.toArrayBuffer(r)}isBuffer(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}toBuffer(e){if(!ArrayBuffer)throw new Error("Can't convert to Buffer: browser does not support the necessary types");if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(this.toArrayBuffer(e));throw new Error("BufferUtils.toBuffer expected an ArrayBuffer or a view onto one")}toArrayBuffer(e){if(!ArrayBuffer)throw new Error("Can't convert to ArrayBuffer: browser does not support the necessary types");if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);throw new Error("BufferUtils.toArrayBuffer expected an ArrayBuffer or a view onto one")}base64Encode(e){return this.uint8ViewToBase64(this.toBuffer(e))}base64Decode(e){if(ArrayBuffer&&m.Config.atob)return this.base64ToArrayBuffer(e);throw new Error("Expected ArrayBuffer to exist and Platform.Config.atob to be configured")}hexEncode(e){return this.toBuffer(e).reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}hexDecode(e){if(e.length%2!=0)throw new Error("Can't create a byte array from a hex string of odd length");const t=new Uint8Array(e.length/2);for(let a=0;a<t.length;a++)t[a]=parseInt(e.slice(2*a,2*(a+1)),16);return this.toArrayBuffer(t)}utf8Encode(e){if(m.Config.TextEncoder){const t=(new m.Config.TextEncoder).encode(e);return this.toArrayBuffer(t)}throw new Error("Expected TextEncoder to be configured")}utf8Decode(e){if(!this.isBuffer(e))throw new Error("Expected input of utf8decode to be an arraybuffer or typed array");if(TextDecoder)return(new TextDecoder).decode(e);throw new Error("Expected TextDecoder to be configured")}areBuffersEqual(e,t){if(!e||!t)return!1;const a=this.toArrayBuffer(e),r=this.toArrayBuffer(t);if(a.byteLength!=r.byteLength)return!1;const n=new Uint8Array(a),o=new Uint8Array(r);for(var s=0;s<n.length;s++)if(n[s]!=o[s])return!1;return!0}byteLength(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}arrayBufferViewToBuffer(e){return this.toArrayBuffer(e)}hmacSha256(e,t){const a=function(e,t){if(e.length>64&&(e=Ya(e)),e.length<64){const t=new Uint8Array(64);t.set(e,0),e=t}for(var a=new Uint8Array(64),r=new Uint8Array(64),n=0;n<64;n++)a[n]=54^e[n],r[n]=92^e[n];var o=new Uint8Array(t.length+64);o.set(a,0),o.set(t,64);var s=new Uint8Array(96);return s.set(r,0),s.set(Ya(o),64),Ya(s)}(this.toBuffer(t),this.toBuffer(e));return this.toArrayBuffer(a)}},tr=(e=>(e[e.REQ_SEND=0]="REQ_SEND",e[e.REQ_RECV=1]="REQ_RECV",e[e.REQ_RECV_POLL=2]="REQ_RECV_POLL",e[e.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",e))(tr||{}),ar=tr;function rr(){return new S("No HTTP request plugin provided. Provide at least one of the FetchRequest or XHRRequest plugins.",400,4e4)}var nr=((Za=class{constructor(e){var t;this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this.client=null!=e?e:null;const a=(null==e?void 0:e.options.connectivityCheckUrl)||Re.connectivityCheckUrl,r=null!=(t=null==e?void 0:e.options.connectivityCheckParams)?t:null,n=!(null==e?void 0:e.options.connectivityCheckUrl),o=d(d({},nr.bundledRequestImplementations),null==e?void 0:e._additionalHTTPRequestImplementations),s=o.XHRRequest,i=o.FetchRequest,c=!(!s&&!i);if(!c)throw rr();m.Config.xhrSupported&&s?(this.supportsAuthHeaders=!0,this.Request=async function(t,a,r,n,o){return new Promise((i=>{var c;const l=s.createRequest(a,r,n,o,ar.REQ_SEND,null!=(c=e&&e.options.timeouts)?c:null,this.logger,t);l.once("complete",((e,t,a,r,n)=>i({error:e,body:t,headers:a,unpacked:r,statusCode:n}))),l.exec()}))},(null==e?void 0:e.options.disableConnectivityCheck)?this.checkConnectivity=async function(){return!0}:this.checkConnectivity=async function(){var e;v.logAction(this.logger,v.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+a);const t=await this.doUri(Ee.Get,a,null,null,r);let o=!1;var s;return o=n?!t.error&&"yes"==(null==(e=t.body)?void 0:e.replace(/\n/,"")):!t.error&&(s=t.statusCode)>=200&&s<400,v.logAction(this.logger,v.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+o),o}):m.Config.fetchSupported&&i?(this.supportsAuthHeaders=!0,this.Request=async(t,a,r,n,o)=>i(t,null!=e?e:null,a,r,n,o),this.checkConnectivity=async function(){var e;v.logAction(this.logger,v.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+a);const t=await this.doUri(Ee.Get,a,null,null,null),r=!t.error&&"yes"==(null==(e=t.body)?void 0:e.replace(/\n/,""));return v.logAction(this.logger,v.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+r),r}):this.Request=async()=>({error:c?new C("no supported HTTP transports available",null,400):rr()})}get logger(){var e,t;return null!=(t=null==(e=this.client)?void 0:e.logger)?t:v.defaultLogger}async doUri(e,t,a,r,n){return this.Request?this.Request(e,t,a,n,r):{error:new C("Request invoked before assigned to",null,500)}}shouldFallback(e){const t=e.statusCode;return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}}).methods=[Ee.Get,Ee.Delete,Ee.Post,Ee.Put,Ee.Patch],Za.methodsWithoutBody=[Ee.Get,Ee.Delete],Za.methodsWithBody=[Ee.Post,Ee.Put,Ee.Patch],Za),or=nr,sr="ablyjs-storage-test",ir=void 0!==a.g?a.g:"undefined"!=typeof window?window:self,cr=new class{constructor(){try{ir.sessionStorage.setItem(sr,sr),ir.sessionStorage.removeItem(sr),this.sessionSupported=!0}catch(e){this.sessionSupported=!1}try{ir.localStorage.setItem(sr,sr),ir.localStorage.removeItem(sr),this.localSupported=!0}catch(e){this.localSupported=!1}}get(e){return this._get(e,!1)}getSession(e){return this._get(e,!0)}remove(e){return this._remove(e,!1)}removeSession(e){return this._remove(e,!0)}set(e,t,a){return this._set(e,t,a,!1)}setSession(e,t,a){return this._set(e,t,a,!0)}_set(e,t,a,r){const n={value:t};return a&&(n.expires=Date.now()+a),this.storageInterface(r).setItem(e,JSON.stringify(n))}_get(e,t){if(t&&!this.sessionSupported)throw new Error("Session Storage not supported");if(!t&&!this.localSupported)throw new Error("Local Storage not supported");const a=this.storageInterface(t).getItem(e);if(!a)return null;const r=JSON.parse(a);return r.expires&&r.expires<Date.now()?(this.storageInterface(t).removeItem(e),null):r.value}_remove(e,t){return this.storageInterface(t).removeItem(e)}storageInterface(e){return e?ir.sessionStorage:ir.localStorage}},lr=he(),ur="string"==typeof EdgeRuntime;"undefined"!=typeof Window||"undefined"!=typeof WorkerGlobalScope||ur||console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var fr={agent:"browser",logTimestamps:!0,userAgent:lr.navigator&&lr.navigator.userAgent.toString(),currentUrl:lr.location&&lr.location.href,binaryType:"arraybuffer",WebSocket:lr.WebSocket,fetchSupported:!!lr.fetch,xhrSupported:lr.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,allowComet:function(){const e=lr.location;return!lr.WebSocket||!e||!e.origin||e.origin.indexOf("http")>-1}(),useProtocolHeartbeats:!0,supportsBinary:!!lr.TextDecoder,preferBinary:!1,ArrayBuffer:lr.ArrayBuffer,atob:lr.atob,nextTick:void 0!==lr.setImmediate?lr.setImmediate.bind(lr):function(e){setTimeout(e,0)},addEventListener:lr.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){return lr.TextDecoder&&(new lr.TextEncoder).encode(e).length||e.length},TextEncoder:lr.TextEncoder,TextDecoder:lr.TextDecoder,getRandomArrayBuffer:async function(e){const t=new Uint8Array(e);return lr.crypto.getRandomValues(t),t.buffer},isWebworker:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,push:{platform:"browser",formFactor:"desktop",storage:cr}};function hr(e){return function(e){return!!e.code&&!De.isTokenErr(e)&&(!![80015,80017,80030].includes(e.code)||e.code>=4e4&&e.code<5e4)}(e)?[Xt({action:Dt.ERROR,error:e})]:[Xt({action:Dt.DISCONNECTED,error:e})]}var dr=class extends fa{constructor(e,t,a){super(e,t,a,!0),this.onAuthUpdated=e=>{this.authParams={access_token:e.token}},this.stream=!("stream"in a)||a.stream,this.sendRequest=null,this.recvRequest=null,this.pendingCallback=null,this.pendingItems=null}connect(){v.logAction(this.logger,v.LOG_MINOR,"CometTransport.connect()","starting"),fa.prototype.connect.call(this);const e=this.params,t=e.options,a=Re.getHost(t,e.host),r=Re.getPort(t),n=t.tls?"https://":"http://";this.baseUri=n+a+":"+r+"/comet/";const o=this.baseUri+"connect";v.logAction(this.logger,v.LOG_MINOR,"CometTransport.connect()","uri: "+o),ne(this.auth.getAuthParams(),((e,t)=>{if(e)return void this.disconnect(e);if(this.isDisposed)return;this.authParams=t;const a=this.params.getConnectParams(t);"stream"in a&&(this.stream=a.stream),v.logAction(this.logger,v.LOG_MINOR,"CometTransport.connect()","connectParams:"+$(a));let r=!1;const n=this.recvRequest=this.createRequest(o,null,a,null,this.stream?ar.REQ_RECV_STREAM:ar.REQ_RECV);n.on("data",(e=>{this.recvRequest&&(r||(r=!0,this.emit("preconnect")),this.onData(e))})),n.on("complete",(e=>{this.recvRequest||(e=e||new S("Request cancelled",80003,400)),this.recvRequest=null,r||e||(r=!0,this.emit("preconnect")),this.onActivity(),e?e.code?this.onData(hr(e)):this.disconnect(e):m.Config.nextTick((()=>{this.recv()}))})),n.exec()}))}requestClose(){v.logAction(this.logger,v.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)}requestDisconnect(){v.logAction(this.logger,v.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)}_requestCloseOrDisconnect(e){const t=e?this.closeUri:this.disconnectUri;if(t){const a=this.createRequest(t,null,this.authParams,null,ar.REQ_SEND);a.on("complete",(t=>{t&&(v.logAction(this.logger,v.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+Y(t)),this.finish("disconnected",t))})),a.exec()}}dispose(){v.logAction(this.logger,v.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(v.logAction(this.logger,v.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),this.finish("disconnected",ca.disconnected()),m.Config.nextTick((()=>{this.emit("disposed")})))}onConnect(e){var t;if(this.isDisposed)return;const a=null==(t=e.connectionDetails)?void 0:t.connectionKey;fa.prototype.onConnect.call(this,e);const r=this.baseUri+a;v.logAction(this.logger,v.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+r),this.sendUri=r+"/send",this.recvUri=r+"/recv",this.closeUri=r+"/close",this.disconnectUri=r+"/disconnect"}send(e){if(this.sendRequest)return this.pendingItems=this.pendingItems||[],void this.pendingItems.push(e);const t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)}sendAnyPending(){const e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))}sendItems(e){const t=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),ar.REQ_SEND);t.on("complete",((e,t)=>{e&&v.logAction(this.logger,v.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+Y(e)),this.sendRequest=null,e?e.code?this.onData(hr(e)):this.disconnect(e):(t&&this.onData(t),this.pendingItems&&m.Config.nextTick((()=>{this.sendRequest||this.sendAnyPending()})))})),t.exec()}recv(){if(this.recvRequest)return;if(!this.isConnected)return;const e=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?ar.REQ_RECV_STREAM:ar.REQ_RECV_POLL);e.on("data",(e=>{this.onData(e)})),e.on("complete",(e=>{this.recvRequest=null,this.onActivity(),e?e.code?this.onData(hr(e)):this.disconnect(e):m.Config.nextTick((()=>{this.recv()}))})),e.exec()}onData(e){try{const t=this.decodeResponse(e);if(t&&t.length)for(let e=0;e<t.length;e++)this.onProtocolMessage($t(t[e],this.connectionManager.realtime._RealtimePresence))}catch(e){v.logAction(this.logger,v.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+e.stack)}}encodeRequest(e){return JSON.stringify(e)}decodeResponse(e){return"string"==typeof e?JSON.parse(e):e}};var pr=function(){},yr=0,gr={},mr=class e extends Gt{constructor(e,t,a,r,n,o,s,i){super(s),(a=a||{}).rnd=te(),this.uri=e+$(a),this.headers=t||{},this.body=r,this.method=i?i.toUpperCase():T(r)?"GET":"POST",this.requestMode=n,this.timeouts=o,this.timedOut=!1,this.requestComplete=!1,this.id=String(++yr),gr[this.id]=this}static createRequest(t,a,r,n,o,s,i,c){const l=s||Re.TIMEOUTS;return new e(t,a,A(r),n,o,l,i,c)}complete(e,t,a,r,n){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,a,r,n),this.dispose())}abort(){this.dispose()}exec(){let e=this.headers;const t=this.requestMode==ar.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,a=this.timer=setTimeout((()=>{this.timedOut=!0,n.abort()}),t),r=this.method,n=this.xhr=new XMLHttpRequest,o=e.accept;let s=this.body,i="text";o?0===o.indexOf("application/x-msgpack")&&(i="arraybuffer"):e.accept="application/json",s&&(e["content-type"]||(e["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof s&&(s=JSON.stringify(s)),n.open(r,this.uri,!0),n.responseType=i,"authorization"in e&&(n.withCredentials=!0);for(const t in e)n.setRequestHeader(t,e[t]);const c=(e,t,a,r)=>{var n;let o=t+" (event type: "+e.type+")";(null==(n=null==this?void 0:this.xhr)?void 0:n.statusText)&&(o+=", current statusText is "+this.xhr.statusText),v.logAction(this.logger,v.LOG_ERROR,"Request.on"+e.type+"()",o),this.complete(new C(o,a,r))};let l,u,f;n.onerror=function(e){c(e,"XHR error occurred",null,400)},n.onabort=e=>{this.timedOut?c(e,"Request aborted due to request timeout expiring",null,408):c(e,"Request cancelled",null,400)},n.ontimeout=function(e){c(e,"Request timed out",null,408)};let h=0,d=!1;const p=()=>{clearTimeout(a),f=u<400,204!=u?l=this.requestMode==ar.REQ_RECV_STREAM&&f&&function(e){return e.getResponseHeader&&(e.getResponseHeader("transfer-encoding")||!e.getResponseHeader("content-length"))}(n):this.complete(null,null,null,null,u)},y=()=>{let t;try{const a=function(e){return e.getResponseHeader&&e.getResponseHeader("content-type")}(n);if(a?a.indexOf("application/json")>=0:"text"==n.responseType){const e="arraybuffer"===n.responseType?m.BufferUtils.utf8Decode(n.response):String(n.responseText);t=e.length?JSON.parse(e):e,d=!0}else t=n.response;void 0!==t.response?(u=t.statusCode,f=u<400,e=t.headers,t=t.response):e=function(e){const t=e.getAllResponseHeaders().trim().split("\r\n"),a={};for(let e=0;e<t.length;e++){const r=t[e].split(":").map((e=>e.trim()));a[r[0].toLowerCase()]=r[1]}return a}(n)}catch(e){return void this.complete(new C("Malformed response body from server: "+e.message,null,400))}if(f||Array.isArray(t))return void this.complete(null,t,e,d,u);let a=function(e,t){if(function(e,t){return ie(F(t)).includes("x-ably-errorcode")}(0,t))return e.error&&S.fromValues(e.error)}(t,e);a||(a=new C("Error response received from server: "+u+" body was: "+m.Config.inspect(t),null,u)),this.complete(a,t,e,d,u)};function g(){const e=n.responseText,t=e.length-1;let a,r;for(;h<t&&(a=e.indexOf("\n",h))>-1;)r=e.slice(h,a),h=a+1,_(r)}const _=e=>{try{e=JSON.parse(e)}catch(e){return void this.complete(new C("Malformed response body from server: "+e.message,null,400))}this.emit("data",e)},k=()=>{g(),this.streamComplete=!0,m.Config.nextTick((()=>{this.complete()}))};n.onreadystatechange=function(){const e=n.readyState;e<3||0!==n.status&&(void 0===u&&(u=n.status,p()),3==e&&l?g():4==e&&(l?k():y()))},n.send(s)}dispose(){const e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=pr,this.xhr=null;const t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete gr[this.id]}},_r=Zt.XhrPolling,kr={order:["xhr_polling"],bundledImplementations:{web_socket:Ma,xhr_polling:class extends dr{constructor(e,t,a){super(e,t,a),this.shortName=_r,a.stream=!1,this.shortName=_r}static isAvailable(){return!(!m.Config.xhrSupported||!m.Config.allowComet)}toString(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected}createRequest(e,t,a,r,n){return mr.createRequest(e,t,a,r,n,this.timeouts,this.logger)}}}},wr={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",wsConnectivityCheckUrl:"wss://ws-up.ably-realtime.com",defaultTransports:[Zt.XhrPolling,Zt.WebSocket]};function br(e,t,a){for(let r=0,n=a.length;r<n;r++){const n=a.charCodeAt(r);if(n<128)e.setUint8(t++,n>>>0&127);else if(n<2048)e.setUint8(t++,n>>>6&31|192),e.setUint8(t++,n>>>0&63|128);else if(n<65536)e.setUint8(t++,n>>>12&15|224),e.setUint8(t++,n>>>6&63|128),e.setUint8(t++,n>>>0&63|128);else{if(!(n<1114112))throw new Error("bad codepoint "+n);e.setUint8(t++,n>>>18&7|240),e.setUint8(t++,n>>>12&63|128),e.setUint8(t++,n>>>6&63|128),e.setUint8(t++,n>>>0&63|128)}}}function vr(e,t,a){let r="";for(let n=t,o=t+a;n<o;n++){const t=e.getUint8(n);if(128&t)if(192!=(224&t))if(224!=(240&t)){if(240!=(248&t))throw new Error("Invalid byte "+t.toString(16));r+=String.fromCharCode((7&t)<<18|(63&e.getUint8(++n))<<12|(63&e.getUint8(++n))<<6|63&e.getUint8(++n))}else r+=String.fromCharCode((15&t)<<12|(63&e.getUint8(++n))<<6|63&e.getUint8(++n));else r+=String.fromCharCode((15&t)<<6|63&e.getUint8(++n));else r+=String.fromCharCode(t)}return r}function zr(e){let t=0;for(let a=0,r=e.length;a<r;a++){const r=e.charCodeAt(a);if(r<128)t+=1;else if(r<2048)t+=2;else if(r<65536)t+=3;else{if(!(r<1114112))throw new Error("bad codepoint "+r);t+=4}}return t}var Or=4294967296,Sr=1/Or,Cr=class{constructor(e,t){this.map=e=>{const t={};for(let a=0;a<e;a++)t[this.parse()]=this.parse();return t},this.bin=e=>{const t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(this.view.buffer,this.offset,e),0),this.offset+=e,t},this.buf=this.bin,this.str=e=>{const t=vr(this.view,this.offset,e);return this.offset+=e,t},this.array=e=>{const t=new Array(e);for(let a=0;a<e;a++)t[a]=this.parse();return t},this.ext=e=>(this.offset+=e,{type:this.view.getInt8(this.offset),data:this.buf(e)}),this.parse=()=>{const e=this.view.getUint8(this.offset);let t,a;if(!(128&e))return this.offset++,e;if(128==(240&e))return a=15&e,this.offset++,this.map(a);if(144==(240&e))return a=15&e,this.offset++,this.array(a);if(160==(224&e))return a=31&e,this.offset++,this.str(a);if(!(224&~e))return t=this.view.getInt8(this.offset),this.offset++,t;switch(e){case 192:return this.offset++,null;case 193:return void this.offset++;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.bin(a);case 197:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.bin(a);case 198:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.bin(a);case 199:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.ext(a);case 200:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.ext(a);case 201:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.ext(a);case 202:return t=this.view.getFloat32(this.offset+1),this.offset+=5,t;case 203:return t=this.view.getFloat64(this.offset+1),this.offset+=9,t;case 204:return t=this.view.getUint8(this.offset+1),this.offset+=2,t;case 205:return t=this.view.getUint16(this.offset+1),this.offset+=3,t;case 206:return t=this.view.getUint32(this.offset+1),this.offset+=5,t;case 207:return t=function(e,t){return t=t||0,e.getUint32(t)*Or+e.getUint32(t+4)}(this.view,this.offset+1),this.offset+=9,t;case 208:return t=this.view.getInt8(this.offset+1),this.offset+=2,t;case 209:return t=this.view.getInt16(this.offset+1),this.offset+=3,t;case 210:return t=this.view.getInt32(this.offset+1),this.offset+=5,t;case 211:return t=function(e,t){return t=t||0,e.getInt32(t)*Or+e.getUint32(t+4)}(this.view,this.offset+1),this.offset+=9,t;case 212:return a=1,this.offset++,this.ext(a);case 213:return a=2,this.offset++,this.ext(a);case 214:return a=4,this.offset++,this.ext(a);case 215:return a=8,this.offset++,this.ext(a);case 216:return a=16,this.offset++,this.ext(a);case 217:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.str(a);case 218:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.str(a);case 219:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.str(a);case 220:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.array(a);case 221:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.array(a);case 222:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.map(a);case 223:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.map(a)}throw new Error("Unknown type 0x"+e.toString(16))},this.offset=t||0,this.view=e}};function Pr(e,t){return Object.keys(e).filter((function(a){const r=e[a];return!(t&&null==r||"function"==typeof r&&!r.toJSON)}))}function Ar(e,t,a,r){const n=typeof e;if("string"==typeof e){const r=zr(e);if(r<32)return t.setUint8(a,160|r),br(t,a+1,e),1+r;if(r<256)return t.setUint8(a,217),t.setUint8(a+1,r),br(t,a+2,e),2+r;if(r<65536)return t.setUint8(a,218),t.setUint16(a+1,r),br(t,a+3,e),3+r;if(r<4294967296)return t.setUint8(a,219),t.setUint32(a+1,r),br(t,a+5,e),5+r}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){const r=e.byteLength;if(r<256)return t.setUint8(a,196),t.setUint8(a+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),a+2),2+r;if(r<65536)return t.setUint8(a,197),t.setUint16(a+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),a+3),3+r;if(r<4294967296)return t.setUint8(a,198),t.setUint32(a+1,r),new Uint8Array(t.buffer).set(new Uint8Array(e),a+5),5+r}if("number"==typeof e){if(Math.floor(e)!==e)return t.setUint8(a,203),t.setFloat64(a+1,e),9;if(e>=0){if(e<128)return t.setUint8(a,e),1;if(e<256)return t.setUint8(a,204),t.setUint8(a+1,e),2;if(e<65536)return t.setUint8(a,205),t.setUint16(a+1,e),3;if(e<4294967296)return t.setUint8(a,206),t.setUint32(a+1,e),5;if(e<0x10000000000000000)return t.setUint8(a,207),function(e,t,a){a<0x10000000000000000?(e.setUint32(t,Math.floor(a*Sr)),e.setInt32(t+4,-1&a)):(e.setUint32(t,4294967295),e.setUint32(t+4,4294967295))}(t,a+1,e),9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(a,e),1;if(e>=-128)return t.setUint8(a,208),t.setInt8(a+1,e),2;if(e>=-32768)return t.setUint8(a,209),t.setInt16(a+1,e),3;if(e>=-2147483648)return t.setUint8(a,210),t.setInt32(a+1,e),5;if(e>=-0x8000000000000000)return t.setUint8(a,211),function(e,t,a){a<0x8000000000000000?(e.setInt32(t,Math.floor(a*Sr)),e.setInt32(t+4,-1&a)):(e.setUint32(t,2147483647),e.setUint32(t+4,2147483647))}(t,a+1,e),9;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if("undefined"===n)return r?0:(t.setUint8(a,212),t.setUint8(a+1,0),t.setUint8(a+2,0),3);if(null===e)return r?0:(t.setUint8(a,192),1);if("boolean"===n)return t.setUint8(a,e?195:194),1;if("function"==typeof e.toJSON)return Ar(e.toJSON(),t,a,r);if("object"===n){let n,o,s=0;const i=Array.isArray(e);if(i?n=e.length:(o=Pr(e,r),n=o.length),n<16?(t.setUint8(a,n|(i?144:128)),s=1):n<65536?(t.setUint8(a,i?220:222),t.setUint16(a+1,n),s=3):n<4294967296&&(t.setUint8(a,i?221:223),t.setUint32(a+1,n),s=5),i)for(let o=0;o<n;o++)s+=Ar(e[o],t,a+s,r);else if(o)for(let i=0;i<n;i++){const n=o[i];s+=Ar(n,t,a+s),s+=Ar(e[n],t,a+s,r)}return s}if("function"===n)return 0;throw new Error("Unknown type "+n)}function jr(e,t){const a=typeof e;if("string"===a){const t=zr(e);if(t<32)return 1+t;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if(ArrayBuffer.isView&&ArrayBuffer.isView(e)&&(e=e.buffer),e instanceof ArrayBuffer){const t=e.byteLength;if(t<256)return 2+t;if(t<65536)return 3+t;if(t<4294967296)return 5+t}if("number"==typeof e){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===a)return 1;if(null===e)return t?0:1;if(void 0===e)return t?0:3;if("function"==typeof e.toJSON)return jr(e.toJSON(),t);if("object"===a){let a,r=0;if(Array.isArray(e)){a=e.length;for(let n=0;n<a;n++)r+=jr(e[n],t)}else{const n=Pr(e,t);a=n.length;for(let o=0;o<a;o++){const a=n[o];r+=jr(a)+jr(e[a],t)}}if(a<16)return 1+r;if(a<65536)return 3+r;if(a<4294967296)return 5+r;throw new Error("Array or object too long 0x"+a.toString(16))}if("function"===a)return 0;throw new Error("Unknown type "+a)}var Rr,Ir={encode:function(e,t){const a=jr(e,t);if(0===a)return;const r=new ArrayBuffer(a);return Ar(e,new DataView(r),0,t),r},decode:function(e){const t=new DataView(e),a=new Cr(t),r=a.parse();if(a.offset!==e.byteLength)throw new Error(e.byteLength-a.offset+" trailing bytes");return r},inspect:function(e){if(void 0===e)return"undefined";let t,a;if(e instanceof ArrayBuffer?(a="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(a="DataView",t=e),!t)return JSON.stringify(e);const r=[];for(let a=0;a<e.byteLength;a++){if(a>20){r.push("...");break}let e=t.getUint8(a).toString(16);1===e.length&&(e="0"+e),r.push(e)}return"<"+a+" "+r.join(" ")+">"},utf8Write:br,utf8Read:vr,utf8ByteCount:zr},Tr={XHRRequest:mr,FetchRequest:async function(e,t,a,r,n,o){const s=new Headers(r||{}),i=e?e.toUpperCase():T(o)?"GET":"POST",c=new AbortController;let l;const u=new Promise((e=>{l=setTimeout((()=>{c.abort(),e({error:new C("Request timed out",null,408)})}),t?t.options.timeouts.httpRequestTimeout:Re.TIMEOUTS.httpRequestTimeout)})),f={method:i,headers:s,body:o,signal:c.signal};m.Config.isWebworker||(f.credentials=s.has("authorization")?"include":"same-origin");const h=(async()=>{try{const e=new URLSearchParams(n||{});e.set("rnd",te());const t=a+"?"+e,r=await he().fetch(t,f);if(clearTimeout(l),204==r.status)return{error:null,statusCode:r.status};const o=r.headers.get("Content-Type");let s;s=o&&o.indexOf("application/x-msgpack")>-1?await r.arrayBuffer():o&&o.indexOf("application/json")>-1?await r.json():await r.text();const i=!!o&&-1===o.indexOf("application/x-msgpack"),c=function(e){const t={};return e.forEach(((e,a)=>{t[a]=e})),t}(r.headers);if(r.ok)return{error:null,body:s,headers:c,unpacked:i,statusCode:r.status};{const e=function(e,t){if(function(e,t){return!!t.get("x-ably-errorcode")}(0,t))return e.error&&S.fromValues(e.error)}(s,r.headers)||new C("Error response received from server: "+r.status+" body was: "+m.Config.inspect(s),null,r.status);return{error:e,body:s,headers:c,unpacked:i,statusCode:r.status}}}catch(e){return clearTimeout(l),{error:e}}})();return Promise.race([u,h])}},Er=function(e,t){class a{constructor(e,t,a,r){this.algorithm=e,this.keyLength=t,this.mode=a,this.key=r}}class r{static getDefaultParams(e){var r;if(!e.key)throw new Error("Crypto.getDefaultParams: a key is required");r="string"==typeof e.key?t.toArrayBuffer(t.base64Decode(e.key.replace("_","/").replace("-","+"))):e.key instanceof ArrayBuffer?e.key:t.toArrayBuffer(e.key);var n=e.algorithm||"aes",o=8*r.byteLength,s=e.mode||"cbc",i=new a(n,o,s,r);if(e.keyLength&&e.keyLength!==i.keyLength)throw new Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+i.keyLength);return function(e){if("aes"===e.algorithm&&"cbc"===e.mode){if(128===e.keyLength||256===e.keyLength)return;throw new Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}}(i),i}static async generateRandomKey(t){try{return e.getRandomArrayBuffer((t||256)/8)}catch(e){throw new S("Failed to generate random key: "+e.message,400,5e4,e)}}static getCipher(e,t){var r,o=function(e){return e instanceof a}(e)?e:this.getDefaultParams(e);return{cipherParams:o,cipher:new n(o,null!=(r=e.iv)?r:null,t)}}}r.CipherParams=a;class n{constructor(e,a,r){if(this.logger=r,!crypto.subtle)throw isSecureContext?new Error("Crypto operations are not possible since the browsers SubtleCrypto class is unavailable (reason unknown)."):new Error("Crypto operations are is not possible since the current environment is a non-secure context and hence the browsers SubtleCrypto class is not available.");this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.webCryptoAlgorithm=e.algorithm+"-"+e.mode,this.key=t.toArrayBuffer(e.key),this.iv=a?t.toArrayBuffer(a):null}concat(e,a){const r=new ArrayBuffer(e.byteLength+a.byteLength),n=new DataView(r),o=new DataView(t.toArrayBuffer(e));for(let e=0;e<o.byteLength;e++)n.setInt8(e,o.getInt8(e));const s=new DataView(t.toArrayBuffer(a));for(let e=0;e<s.byteLength;e++)n.setInt8(o.byteLength+e,s.getInt8(e));return r}async encrypt(e){v.logAction(this.logger,v.LOG_MICRO,"CBCCipher.encrypt()","");const t=await this.getIv(),a=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["encrypt"]),r=await crypto.subtle.encrypt({name:this.webCryptoAlgorithm,iv:t},a,e);return this.concat(t,r)}async decrypt(e){v.logAction(this.logger,v.LOG_MICRO,"CBCCipher.decrypt()","");const a=t.toArrayBuffer(e),r=a.slice(0,16),n=a.slice(16),o=await crypto.subtle.importKey("raw",this.key,this.webCryptoAlgorithm,!1,["decrypt"]);return crypto.subtle.decrypt({name:this.webCryptoAlgorithm,iv:r},o,n)}async getIv(){if(this.iv){var a=this.iv;return this.iv=null,a}const r=await e.getRandomArrayBuffer(16);return t.toArrayBuffer(r)}}return r}(fr,er);m.Crypto=Er,m.BufferUtils=er,m.Http=or,m.Config=fr,m.Transports=kr,m.WebStorage=cr;for(const e of[Nt,Ua])e.Crypto=Er,e._MsgPack=Ir;or.bundledRequestImplementations=Tr,v.initLogHandlers(),m.Defaults=(Rr=wr,Object.assign(be,Rr)),m.Config.agent&&(m.Defaults.agent+=" "+m.Config.agent);var Mr={ErrorInfo:S,Rest:Nt,Realtime:Ua,msgpack:Ir};return"object"==typeof r.exports&&(r.exports=((e,t,a,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of Object.getOwnPropertyNames(t))Object.prototype.hasOwnProperty.call(e,a)||undefined===a||Object.defineProperty(e,a,{get:()=>t[a],enumerable:!(r=Object.getOwnPropertyDescriptor(t,a))||r.enumerable});return e})(r.exports,t)),r.exports},e.exports=r()},947:e=>{"use strict";e.exports=()=>{const e="\\ud800-\\udfff",t=`[${e}]`,a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",r="\\ud83c[\\udffb-\\udfff]",n=`[^${e}]`,o="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",i=`(?:${a}|${r})?`,c="[\\ufe0e\\ufe0f]?",l=c+i+`(?:\\u200d(?:${[n,o,s].join("|")})${c+i})*`,u=`(?:${[`${n}${a}?`,a,o,s,t,"[\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93]"].join("|")})`;return new RegExp(`(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)|${r}(?=${r})|${u+l}`,"g")}},756:(e,t,a)=>{e.exports={lib:a(802),ordered:a(62),fitzpatrick_scale_modifiers:["","","","",""]}},733:function(e){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)e[r]=a[r]}return e}return function t(a,r){function n(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var i in o)o[i]&&(s+="; "+i,!0!==o[i]&&(s+="="+o[i].split(";")[0]));return document.cookie=t+"="+a.write(n,t)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},n=0;n<t.length;n++){var o=t[n].split("="),s=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(r[i]=a.read(s,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(t,a){n(t,"",e({},a,{expires:-1}))},withAttributes:function(a){return t(this.converter,e({},this.attributes,a))},withConverter:function(a){return t(e({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(a)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},983:(e,t,a)=>{"use strict";const r=a(15),n=new Map([["none",""],["white",""],["creamWhite",""],["lightBrown",""],["brown",""],["darkBrown",""]]);e.exports=(e,t)=>{if(!n.has(t))throw new TypeError(`Unexpected \`skinTone\` name: ${t}`);return e=e.replace(/[\u{1f3fb}-\u{1f3ff}]/u,""),r.has(e.codePointAt(0))&&"none"!==t&&(e+=n.get(t)),e}},15:e=>{e.exports=new Set([9757,9977,9994,9995,9996,9997,127877,127939,127940,127946,127947,128066,128067,128070,128071,128072,128073,128074,128075,128076,128077,128078,128079,128080,128102,128103,128104,128105,128110,128112,128113,128114,128115,128116,128117,128118,128119,128120,128124,128129,128130,128131,128133,128134,128135,128170,128373,128378,128400,128405,128406,128581,128582,128583,128587,128588,128589,128590,128591,128675,128692,128693,128694,128704,129304,129305,129306,129307,129308,129309,129310,129318,129328,129331,129332,129333,129334,129335,129336,129337,129340,129341,129342])},831:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MAX",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v1ToV6",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"v6",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"v6ToV1",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"v7",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return g.default}});var r=m(a(213)),n=m(a(808)),o=m(a(792)),s=m(a(910)),i=m(a(518)),c=m(a(343)),l=m(a(948)),u=m(a(73)),f=m(a(186)),h=m(a(671)),d=m(a(507)),p=m(a(744)),y=m(a(37)),g=m(a(775));function m(e){return e&&e.__esModule?e:{default:e}}},213:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="ffffffff-ffff-ffff-ffff-ffffffffffff"},311:(e,t)=>{"use strict";function a(e){return 14+(e+64>>>9<<4)+1}function r(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function n(e,t,a,n,o,s){return r((i=r(r(t,e),r(n,s)))<<(c=o)|i>>>32-c,a);var i,c}function o(e,t,a,r,o,s,i){return n(t&a|~t&r,e,t,o,s,i)}function s(e,t,a,r,o,s,i){return n(t&r|a&~r,e,t,o,s,i)}function i(e,t,a,r,o,s,i){return n(t^a^r,e,t,o,s,i)}function c(e,t,a,r,o,s,i){return n(a^(t|~r),e,t,o,s,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],a=32*e.length,r="0123456789abcdef",n=0;n<a;n+=8){var o=e[n>>5]>>>n%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[a(t)-1]=t;for(var n=1732584193,l=-271733879,u=-1732584194,f=271733878,h=0;h<e.length;h+=16){var d=n,p=l,y=u,g=f;n=o(n,l,u,f,e[h],7,-680876936),f=o(f,n,l,u,e[h+1],12,-389564586),u=o(u,f,n,l,e[h+2],17,606105819),l=o(l,u,f,n,e[h+3],22,-1044525330),n=o(n,l,u,f,e[h+4],7,-176418897),f=o(f,n,l,u,e[h+5],12,1200080426),u=o(u,f,n,l,e[h+6],17,-1473231341),l=o(l,u,f,n,e[h+7],22,-45705983),n=o(n,l,u,f,e[h+8],7,1770035416),f=o(f,n,l,u,e[h+9],12,-1958414417),u=o(u,f,n,l,e[h+10],17,-42063),l=o(l,u,f,n,e[h+11],22,-1990404162),n=o(n,l,u,f,e[h+12],7,1804603682),f=o(f,n,l,u,e[h+13],12,-40341101),u=o(u,f,n,l,e[h+14],17,-1502002290),n=s(n,l=o(l,u,f,n,e[h+15],22,1236535329),u,f,e[h+1],5,-165796510),f=s(f,n,l,u,e[h+6],9,-1069501632),u=s(u,f,n,l,e[h+11],14,643717713),l=s(l,u,f,n,e[h],20,-373897302),n=s(n,l,u,f,e[h+5],5,-701558691),f=s(f,n,l,u,e[h+10],9,38016083),u=s(u,f,n,l,e[h+15],14,-660478335),l=s(l,u,f,n,e[h+4],20,-405537848),n=s(n,l,u,f,e[h+9],5,568446438),f=s(f,n,l,u,e[h+14],9,-1019803690),u=s(u,f,n,l,e[h+3],14,-187363961),l=s(l,u,f,n,e[h+8],20,1163531501),n=s(n,l,u,f,e[h+13],5,-1444681467),f=s(f,n,l,u,e[h+2],9,-51403784),u=s(u,f,n,l,e[h+7],14,1735328473),n=i(n,l=s(l,u,f,n,e[h+12],20,-1926607734),u,f,e[h+5],4,-378558),f=i(f,n,l,u,e[h+8],11,-2022574463),u=i(u,f,n,l,e[h+11],16,1839030562),l=i(l,u,f,n,e[h+14],23,-35309556),n=i(n,l,u,f,e[h+1],4,-1530992060),f=i(f,n,l,u,e[h+4],11,1272893353),u=i(u,f,n,l,e[h+7],16,-155497632),l=i(l,u,f,n,e[h+10],23,-1094730640),n=i(n,l,u,f,e[h+13],4,681279174),f=i(f,n,l,u,e[h],11,-358537222),u=i(u,f,n,l,e[h+3],16,-722521979),l=i(l,u,f,n,e[h+6],23,76029189),n=i(n,l,u,f,e[h+9],4,-640364487),f=i(f,n,l,u,e[h+12],11,-421815835),u=i(u,f,n,l,e[h+15],16,530742520),n=c(n,l=i(l,u,f,n,e[h+2],23,-995338651),u,f,e[h],6,-198630844),f=c(f,n,l,u,e[h+7],10,1126891415),u=c(u,f,n,l,e[h+14],15,-1416354905),l=c(l,u,f,n,e[h+5],21,-57434055),n=c(n,l,u,f,e[h+12],6,1700485571),f=c(f,n,l,u,e[h+3],10,-1894986606),u=c(u,f,n,l,e[h+10],15,-1051523),l=c(l,u,f,n,e[h+1],21,-2054922799),n=c(n,l,u,f,e[h+8],6,1873313359),f=c(f,n,l,u,e[h+15],10,-30611744),u=c(u,f,n,l,e[h+6],15,-1560198380),l=c(l,u,f,n,e[h+13],21,1309151649),n=c(n,l,u,f,e[h+4],6,-145523070),f=c(f,n,l,u,e[h+11],10,-1120210379),u=c(u,f,n,l,e[h+2],15,718787259),l=c(l,u,f,n,e[h+9],21,-343485551),n=r(n,d),l=r(l,p),u=r(u,y),f=r(f,g)}return[n,l,u,f]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(a(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}},140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:a}},808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},792:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(37))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");var t,a=new Uint8Array(16);return a[0]=(t=parseInt(e.slice(0,8),16))>>>24,a[1]=t>>>16&255,a[2]=t>>>8&255,a[3]=255&t,a[4]=(t=parseInt(e.slice(9,13),16))>>>8,a[5]=255&t,a[6]=(t=parseInt(e.slice(14,18),16))>>>8,a[7]=255&t,a[8]=(t=parseInt(e.slice(19,23),16))>>>8,a[9]=255&t,a[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,a[11]=t/4294967296&255,a[12]=t>>>24&255,a[13]=t>>>16&255,a[14]=t>>>8&255,a[15]=255&t,a}},656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i},858:(e,t)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(r)};var r=new Uint8Array(16)},42:(e,t)=>{"use strict";function a(e,t,a,r){switch(e){case 0:return t&a^~t&r;case 1:case 3:return t^a^r;case 2:return t&a^t&r^a&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=[];for(var s=0;s<o.length;++s)e.push(o.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,c=Math.ceil(i/16),l=new Array(c),u=0;u<c;++u){for(var f=new Uint32Array(16),h=0;h<16;++h)f[h]=e[64*u+4*h]<<24|e[64*u+4*h+1]<<16|e[64*u+4*h+2]<<8|e[64*u+4*h+3];l[u]=f}l[c-1][14]=8*(e.length-1)/Math.pow(2,32),l[c-1][14]=Math.floor(l[c-1][14]),l[c-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<c;++d){for(var p=new Uint32Array(80),y=0;y<16;++y)p[y]=l[d][y];for(var g=16;g<80;++g)p[g]=r(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var m=n[0],_=n[1],k=n[2],w=n[3],b=n[4],v=0;v<80;++v){var z=Math.floor(v/20),O=r(m,5)+a(z,_,k,w)+b+t[z]+p[v]>>>0;b=w,w=k,k=r(_,30)>>>0,_=m,m=O}n[0]=n[0]+m>>>0,n[1]=n[1]+_>>>0,n[2]=n[2]+k>>>0,n[3]=n[3]+w>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},910:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=i;for(var r,n=(r=a(37))&&r.__esModule?r:{default:r},o=[],s=0;s<256;++s)o.push((s+256).toString(16).slice(1));function i(e,t=0){return(o[e[t+0]]+o[e[t+1]]+o[e[t+2]]+o[e[t+3]]+"-"+o[e[t+4]]+o[e[t+5]]+"-"+o[e[t+6]]+o[e[t+7]]+"-"+o[e[t+8]]+o[e[t+9]]+"-"+o[e[t+10]]+o[e[t+11]]+o[e[t+12]]+o[e[t+13]]+o[e[t+14]]+o[e[t+15]]).toLowerCase()}t.default=function(e,t=0){var a=i(e,t);if(!(0,n.default)(a))throw TypeError("Stringified UUID is invalid");return a}},518:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,o,s=(r=a(858))&&r.__esModule?r:{default:r},i=a(910),c=0,l=0;t.default=function(e,t,a){var r=t&&a||0,u=t||new Array(16),f=(e=e||{}).node,h=e.clockseq;if(e._v6||(f||(f=n),null==h&&(h=o)),null==f||null==h){var d=e.random||(e.rng||s.default)();null==f&&(f=[d[0],d[1],d[2],d[3],d[4],d[5]],n||e._v6||(f[0]|=1,n=f)),null==h&&(h=16383&(d[6]<<8|d[7]),void 0!==o||e._v6||(o=h))}var p=void 0!==e.msecs?e.msecs:Date.now(),y=void 0!==e.nsecs?e.nsecs:l+1,g=p-c+(y-l)/1e4;if(g<0&&void 0===e.clockseq&&(h=h+1&16383),(g<0||p>c)&&void 0===e.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,l=y,o=h;var m=(1e4*(268435455&(p+=122192928e5))+y)%4294967296;u[r++]=m>>>24&255,u[r++]=m>>>16&255,u[r++]=m>>>8&255,u[r++]=255&m;var _=p/4294967296*1e4&268435455;u[r++]=_>>>8&255,u[r++]=255&_,u[r++]=_>>>24&15|16,u[r++]=_>>>16&255,u[r++]=h>>>8|128,u[r++]=255&h;for(var k=0;k<6;++k)u[r+k]=f[k];return t||(0,i.unsafeStringify)(u)}},343:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=(t="string"==typeof e?(0,n.default)(e):e,Uint8Array.of((15&t[6])<<4|t[7]>>4&15,(15&t[7])<<4|(240&t[4])>>4,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,(15&t[1])<<4|(240&t[2])>>4,96|15&t[2],t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,o.unsafeStringify)(a):a};var r,n=(r=a(792))&&r.__esModule?r:{default:r},o=a(910)},948:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(25)),n=o(a(311));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v3",48,n.default);t.default=s},25:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,a){function r(e,r,s,i){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],a=0;a<e.length;++a)t.push(e.charCodeAt(a));return t}(e)),"string"==typeof r&&(r=(0,o.default)(r)),16!==(null===(c=r)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),(l=a(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,s){i=i||0;for(var u=0;u<16;++u)s[i+u]=l[u];return s}return(0,n.unsafeStringify)(l)}try{r.name=e}catch(e){}return r.DNS=s,r.URL=i,r};var r,n=a(910),o=(r=a(792))&&r.__esModule?r:{default:r},s=t.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",i=t.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"},73:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(a(140)),n=s(a(858)),o=a(910);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,a){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();var s=(e=e||{}).random||(e.rng||n.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){a=a||0;for(var i=0;i<16;++i)t[a+i]=s[i];return t}return(0,o.unsafeStringify)(s)}},186:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(25)),n=o(a(42));function o(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.default)("v5",80,n.default);t.default=s},671:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e={},t,a=0){var s=(0,n.default)(c(c({},e),{},{_v6:!0}),new Uint8Array(16));if(s=(0,o.default)(s),t){for(var i=0;i<16;i++)t[a+i]=s[i];return t}return(0,r.unsafeStringify)(s)};var r=a(910),n=s(a(518)),o=s(a(343));function s(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t,a){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},507:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,a=(t="string"==typeof e?(0,n.default)(e):e,Uint8Array.of((15&t[3])<<4|t[4]>>4&15,(15&t[4])<<4|(240&t[5])>>4,(15&t[5])<<4|15&t[6],t[7],(15&t[1])<<4|(240&t[2])>>4,(15&t[2])<<4|(240&t[3])>>4,16|(240&t[0])>>4,(15&t[0])<<4|(240&t[1])>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));return"string"==typeof e?(0,o.unsafeStringify)(a):a};var r,n=(r=a(792))&&r.__esModule?r:{default:r},o=a(910)},744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(858))&&r.__esModule?r:{default:r},o=a(910),s=null,i=null,c=0;t.default=function(e,t,a){e=e||{};var r=t&&a||0,l=t||new Uint8Array(16),u=e.random||(e.rng||n.default)(),f=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.seq?e.seq:null,d=i,p=s;return f>c&&void 0===e.msecs&&(c=f,null!==h&&(d=null,p=null)),null!==h&&(h>2147483647&&(h=2147483647),d=h>>>19&4095,p=524287&h),null!==d&&null!==p||(d=(d=127&u[6])<<8|u[7],p=(p=(p=63&u[8])<<8|u[9])<<5|u[10]>>>3),f+1e4>c&&null===h?++p>524287&&(p=0,++d>4095&&(d=0,c++)):c=f,i=d,s=p,l[r++]=c/1099511627776&255,l[r++]=c/4294967296&255,l[r++]=c/16777216&255,l[r++]=c/65536&255,l[r++]=c/256&255,l[r++]=255&c,l[r++]=d>>>4&15|112,l[r++]=255&d,l[r++]=p>>>13&63|128,l[r++]=p>>>5&255,l[r++]=p<<3&255|7&u[10],l[r++]=u[11],l[r++]=u[12],l[r++]=u[13],l[r++]=u[14],l[r++]=u[15],t||(0,o.unsafeStringify)(l)}},37:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(656))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&n.default.test(e)}},775:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n=(r=a(37))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,n.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},944:(e,t,a)=>{const r=a(640),n=a(831);e.exports=()=>new Promise(((e,t)=>{const a=document.createElement("input");a.type="file",a.accept="image/*";const o=new r.UploadManager({apiKey:"public_kW15cEC3sfYLFmDQCZcpvDWdes81"});a.addEventListener("change",(async t=>{const a=t.target.files[0];a.name=`${n.v4()}.${a.name}`;try{const{fileUrl:t,filePath:r}=await o.upload({data:a});e(t)}catch(e){alert(`Error:\n${e.message}`)}})),a.click()}))},890:(e,t,a)=>{"use strict";var r,n=Object.create,o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,u=(e,t,a,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))l.call(e,n)||n===a||o(e,n,{get:()=>t[n],enumerable:!(r=s(t,n))||r.enumerable});return e},f=(e,t,a)=>(a=null!=e?n(c(e)):{},u(!t&&e&&e.__esModule?a:o(a,"default",{value:e,enumerable:!0}),e)),h={};((e,t)=>{for(var a in t)o(e,a,{get:t[a],enumerable:!0})})(h,{emojify:()=>C,find:()=>j,get:()=>I,has:()=>E,random:()=>M,replace:()=>q,search:()=>L,strip:()=>N,unemojify:()=>H,which:()=>F}),e.exports=(r=h,u(o({},"__esModule",{value:!0}),r));var d=f(a(509),1),p=a(509),y=f(a(756),1),g=(0,f(a(947),1).default)();function m(e){return"function"==typeof e?e:()=>e}var _=String.fromCharCode(65039),k=new RegExp(_,"g");function w(e){return e.replace(k,"")}function b(e){return/:.+:/.test(e)?e.slice(1,-1):e}var v=Object.entries(y.default.lib).map((([e,{char:t}])=>[e,t])),z=new Map(v),O=new Map(v.map((([e,t])=>[w(t),e]))),S=e=>{p.assert.string(e);const t=b(e),a=z.get(t);return a?{emoji:a,key:t}:void 0},C=(e,{fallback:t,format:a=e=>e}={})=>{const r=void 0===t?t:m(t);return d.default.assert.string(e),d.default.assert.any([d.default.default.undefined,d.default.default.function_],r),d.default.assert.function_(a),e.replace(/:[\w\-+]+:/g,(t=>{const n=S(t);return n?a(n.emoji,t,e):a(r?r(b(t)):t)}))},P=a(509),A=e=>{P.assert.string(e);const t=w(e),a=O.get(t);return a?{emoji:t,key:a}:void 0},j=e=>A(e)??S(e),R=a(509),I=e=>(R.assert.string(e),z.get(b(e))),T=a(509),E=e=>(T.assert.string(e),z.has(b(e))||O.has(w(e))),M=()=>{const[e,t]=(a=v)[Math.floor(Math.random()*a.length)];var a;return{emoji:t,name:e}},x=a(509),q=(e,t,{preserveSpaces:a=!1}={})=>{const r=m(t);x.assert.string(e),x.assert.function_(r),x.assert.boolean(a);const n=e.match(g);return null===n?e:n.map(((t,o)=>{const s=A(t);return s?(a||" "!==n[o+1]||(n[o+1]=""),r(s,o,e)):t})).join("")},U=a(509),L=e=>(U.assert.string(e),e=b(e),v.filter((([t])=>t.includes(e))).map((([e,t])=>({emoji:t,name:e})))),N=(e,{preserveSpaces:t}={})=>q(e,"",{preserveSpaces:t}),B=a(509),G=a(509),D=f(a(983),1),F=(e,{markdown:t=!1}={})=>{G.assert.string(e),G.assert.boolean(t);const a=A((0,D.default)(e,"none"));if(void 0!==a)return t?`:${a.key}:`:a.key},H=e=>{B.assert.string(e);const t=e.match(g);return null===t?e:t.map((e=>F(e,{markdown:!0})??e)).join("")}},802:e=>{"use strict";e.exports=JSON.parse('{"100":{"keywords":["score","perfect","numbers","century","exam","quiz","test","pass","hundred"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"1234":{"keywords":["numbers","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"grinning":{"keywords":["face","smile","happy","joy",":D","grin"],"char":"","fitzpatrick_scale":false,"category":"people"},"grimacing":{"keywords":["face","grimace","teeth"],"char":"","fitzpatrick_scale":false,"category":"people"},"grin":{"keywords":["face","happy","smile","joy","kawaii"],"char":"","fitzpatrick_scale":false,"category":"people"},"joy":{"keywords":["face","cry","tears","weep","happy","happytears","haha"],"char":"","fitzpatrick_scale":false,"category":"people"},"rofl":{"keywords":["face","rolling","floor","laughing","lol","haha"],"char":"","fitzpatrick_scale":false,"category":"people"},"partying":{"keywords":["face","celebration","woohoo"],"char":"","fitzpatrick_scale":false,"category":"people"},"smiley":{"keywords":["face","happy","joy","haha",":D",":)","smile","funny"],"char":"","fitzpatrick_scale":false,"category":"people"},"smile":{"keywords":["face","happy","joy","funny","haha","laugh","like",":D",":)"],"char":"","fitzpatrick_scale":false,"category":"people"},"sweat_smile":{"keywords":["face","hot","happy","laugh","sweat","smile","relief"],"char":"","fitzpatrick_scale":false,"category":"people"},"laughing":{"keywords":["happy","joy","lol","satisfied","haha","face","glad","XD","laugh"],"char":"","fitzpatrick_scale":false,"category":"people"},"innocent":{"keywords":["face","angel","heaven","halo"],"char":"","fitzpatrick_scale":false,"category":"people"},"wink":{"keywords":["face","happy","mischievous","secret",";)","smile","eye"],"char":"","fitzpatrick_scale":false,"category":"people"},"blush":{"keywords":["face","smile","happy","flushed","crush","embarrassed","shy","joy"],"char":"","fitzpatrick_scale":false,"category":"people"},"slightly_smiling_face":{"keywords":["face","smile"],"char":"","fitzpatrick_scale":false,"category":"people"},"upside_down_face":{"keywords":["face","flipped","silly","smile"],"char":"","fitzpatrick_scale":false,"category":"people"},"relaxed":{"keywords":["face","blush","massage","happiness"],"char":"","fitzpatrick_scale":false,"category":"people"},"yum":{"keywords":["happy","joy","tongue","smile","face","silly","yummy","nom","delicious","savouring"],"char":"","fitzpatrick_scale":false,"category":"people"},"relieved":{"keywords":["face","relaxed","phew","massage","happiness"],"char":"","fitzpatrick_scale":false,"category":"people"},"heart_eyes":{"keywords":["face","love","like","affection","valentines","infatuation","crush","heart"],"char":"","fitzpatrick_scale":false,"category":"people"},"smiling_face_with_three_hearts":{"keywords":["face","love","like","affection","valentines","infatuation","crush","hearts","adore"],"char":"","fitzpatrick_scale":false,"category":"people"},"kissing_heart":{"keywords":["face","love","like","affection","valentines","infatuation","kiss"],"char":"","fitzpatrick_scale":false,"category":"people"},"kissing":{"keywords":["love","like","face","3","valentines","infatuation","kiss"],"char":"","fitzpatrick_scale":false,"category":"people"},"kissing_smiling_eyes":{"keywords":["face","affection","valentines","infatuation","kiss"],"char":"","fitzpatrick_scale":false,"category":"people"},"kissing_closed_eyes":{"keywords":["face","love","like","affection","valentines","infatuation","kiss"],"char":"","fitzpatrick_scale":false,"category":"people"},"stuck_out_tongue_winking_eye":{"keywords":["face","prank","childish","playful","mischievous","smile","wink","tongue"],"char":"","fitzpatrick_scale":false,"category":"people"},"zany":{"keywords":["face","goofy","crazy"],"char":"","fitzpatrick_scale":false,"category":"people"},"raised_eyebrow":{"keywords":["face","distrust","scepticism","disapproval","disbelief","surprise"],"char":"","fitzpatrick_scale":false,"category":"people"},"monocle":{"keywords":["face","stuffy","wealthy"],"char":"","fitzpatrick_scale":false,"category":"people"},"stuck_out_tongue_closed_eyes":{"keywords":["face","prank","playful","mischievous","smile","tongue"],"char":"","fitzpatrick_scale":false,"category":"people"},"stuck_out_tongue":{"keywords":["face","prank","childish","playful","mischievous","smile","tongue"],"char":"","fitzpatrick_scale":false,"category":"people"},"money_mouth_face":{"keywords":["face","rich","dollar","money"],"char":"","fitzpatrick_scale":false,"category":"people"},"nerd_face":{"keywords":["face","nerdy","geek","dork"],"char":"","fitzpatrick_scale":false,"category":"people"},"sunglasses":{"keywords":["face","cool","smile","summer","beach","sunglass"],"char":"","fitzpatrick_scale":false,"category":"people"},"star_struck":{"keywords":["face","smile","starry","eyes","grinning"],"char":"","fitzpatrick_scale":false,"category":"people"},"clown_face":{"keywords":["face"],"char":"","fitzpatrick_scale":false,"category":"people"},"cowboy_hat_face":{"keywords":["face","cowgirl","hat"],"char":"","fitzpatrick_scale":false,"category":"people"},"hugs":{"keywords":["face","smile","hug"],"char":"","fitzpatrick_scale":false,"category":"people"},"smirk":{"keywords":["face","smile","mean","prank","smug","sarcasm"],"char":"","fitzpatrick_scale":false,"category":"people"},"no_mouth":{"keywords":["face","hellokitty"],"char":"","fitzpatrick_scale":false,"category":"people"},"neutral_face":{"keywords":["indifference","meh",":|","neutral"],"char":"","fitzpatrick_scale":false,"category":"people"},"expressionless":{"keywords":["face","indifferent","-_-","meh","deadpan"],"char":"","fitzpatrick_scale":false,"category":"people"},"unamused":{"keywords":["indifference","bored","straight face","serious","sarcasm","unimpressed","skeptical","dubious","side_eye"],"char":"","fitzpatrick_scale":false,"category":"people"},"roll_eyes":{"keywords":["face","eyeroll","frustrated"],"char":"","fitzpatrick_scale":false,"category":"people"},"thinking":{"keywords":["face","hmmm","think","consider"],"char":"","fitzpatrick_scale":false,"category":"people"},"lying_face":{"keywords":["face","lie","pinocchio"],"char":"","fitzpatrick_scale":false,"category":"people"},"hand_over_mouth":{"keywords":["face","whoops","shock","surprise"],"char":"","fitzpatrick_scale":false,"category":"people"},"shushing":{"keywords":["face","quiet","shhh"],"char":"","fitzpatrick_scale":false,"category":"people"},"symbols_over_mouth":{"keywords":["face","swearing","cursing","cussing","profanity","expletive"],"char":"","fitzpatrick_scale":false,"category":"people"},"exploding_head":{"keywords":["face","shocked","mind","blown"],"char":"","fitzpatrick_scale":false,"category":"people"},"flushed":{"keywords":["face","blush","shy","flattered"],"char":"","fitzpatrick_scale":false,"category":"people"},"disappointed":{"keywords":["face","sad","upset","depressed",":("],"char":"","fitzpatrick_scale":false,"category":"people"},"worried":{"keywords":["face","concern","nervous",":("],"char":"","fitzpatrick_scale":false,"category":"people"},"angry":{"keywords":["mad","face","annoyed","frustrated"],"char":"","fitzpatrick_scale":false,"category":"people"},"rage":{"keywords":["angry","mad","hate","despise"],"char":"","fitzpatrick_scale":false,"category":"people"},"pensive":{"keywords":["face","sad","depressed","upset"],"char":"","fitzpatrick_scale":false,"category":"people"},"confused":{"keywords":["face","indifference","huh","weird","hmmm",":/"],"char":"","fitzpatrick_scale":false,"category":"people"},"slightly_frowning_face":{"keywords":["face","frowning","disappointed","sad","upset"],"char":"","fitzpatrick_scale":false,"category":"people"},"frowning_face":{"keywords":["face","sad","upset","frown"],"char":"","fitzpatrick_scale":false,"category":"people"},"persevere":{"keywords":["face","sick","no","upset","oops"],"char":"","fitzpatrick_scale":false,"category":"people"},"confounded":{"keywords":["face","confused","sick","unwell","oops",":S"],"char":"","fitzpatrick_scale":false,"category":"people"},"tired_face":{"keywords":["sick","whine","upset","frustrated"],"char":"","fitzpatrick_scale":false,"category":"people"},"weary":{"keywords":["face","tired","sleepy","sad","frustrated","upset"],"char":"","fitzpatrick_scale":false,"category":"people"},"pleading":{"keywords":["face","begging","mercy"],"char":"","fitzpatrick_scale":false,"category":"people"},"triumph":{"keywords":["face","gas","phew","proud","pride"],"char":"","fitzpatrick_scale":false,"category":"people"},"open_mouth":{"keywords":["face","surprise","impressed","wow","whoa",":O"],"char":"","fitzpatrick_scale":false,"category":"people"},"scream":{"keywords":["face","munch","scared","omg"],"char":"","fitzpatrick_scale":false,"category":"people"},"fearful":{"keywords":["face","scared","terrified","nervous","oops","huh"],"char":"","fitzpatrick_scale":false,"category":"people"},"cold_sweat":{"keywords":["face","nervous","sweat"],"char":"","fitzpatrick_scale":false,"category":"people"},"hushed":{"keywords":["face","woo","shh"],"char":"","fitzpatrick_scale":false,"category":"people"},"frowning":{"keywords":["face","aw","what"],"char":"","fitzpatrick_scale":false,"category":"people"},"anguished":{"keywords":["face","stunned","nervous"],"char":"","fitzpatrick_scale":false,"category":"people"},"cry":{"keywords":["face","tears","sad","depressed","upset",":\'("],"char":"","fitzpatrick_scale":false,"category":"people"},"disappointed_relieved":{"keywords":["face","phew","sweat","nervous"],"char":"","fitzpatrick_scale":false,"category":"people"},"drooling_face":{"keywords":["face"],"char":"","fitzpatrick_scale":false,"category":"people"},"sleepy":{"keywords":["face","tired","rest","nap"],"char":"","fitzpatrick_scale":false,"category":"people"},"sweat":{"keywords":["face","hot","sad","tired","exercise"],"char":"","fitzpatrick_scale":false,"category":"people"},"hot":{"keywords":["face","feverish","heat","red","sweating"],"char":"","fitzpatrick_scale":false,"category":"people"},"cold":{"keywords":["face","blue","freezing","frozen","frostbite","icicles"],"char":"","fitzpatrick_scale":false,"category":"people"},"sob":{"keywords":["face","cry","tears","sad","upset","depressed"],"char":"","fitzpatrick_scale":false,"category":"people"},"dizzy_face":{"keywords":["spent","unconscious","xox","dizzy"],"char":"","fitzpatrick_scale":false,"category":"people"},"astonished":{"keywords":["face","xox","surprised","poisoned"],"char":"","fitzpatrick_scale":false,"category":"people"},"zipper_mouth_face":{"keywords":["face","sealed","zipper","secret"],"char":"","fitzpatrick_scale":false,"category":"people"},"nauseated_face":{"keywords":["face","vomit","gross","green","sick","throw up","ill"],"char":"","fitzpatrick_scale":false,"category":"people"},"sneezing_face":{"keywords":["face","gesundheit","sneeze","sick","allergy"],"char":"","fitzpatrick_scale":false,"category":"people"},"vomiting":{"keywords":["face","sick"],"char":"","fitzpatrick_scale":false,"category":"people"},"mask":{"keywords":["face","sick","ill","disease"],"char":"","fitzpatrick_scale":false,"category":"people"},"face_with_thermometer":{"keywords":["sick","temperature","thermometer","cold","fever"],"char":"","fitzpatrick_scale":false,"category":"people"},"face_with_head_bandage":{"keywords":["injured","clumsy","bandage","hurt"],"char":"","fitzpatrick_scale":false,"category":"people"},"woozy":{"keywords":["face","dizzy","intoxicated","tipsy","wavy"],"char":"","fitzpatrick_scale":false,"category":"people"},"sleeping":{"keywords":["face","tired","sleepy","night","zzz"],"char":"","fitzpatrick_scale":false,"category":"people"},"zzz":{"keywords":["sleepy","tired","dream"],"char":"","fitzpatrick_scale":false,"category":"people"},"poop":{"keywords":["hankey","shitface","fail","turd","shit"],"char":"","fitzpatrick_scale":false,"category":"people"},"smiling_imp":{"keywords":["devil","horns"],"char":"","fitzpatrick_scale":false,"category":"people"},"imp":{"keywords":["devil","angry","horns"],"char":"","fitzpatrick_scale":false,"category":"people"},"japanese_ogre":{"keywords":["monster","red","mask","halloween","scary","creepy","devil","demon","japanese","ogre"],"char":"","fitzpatrick_scale":false,"category":"people"},"japanese_goblin":{"keywords":["red","evil","mask","monster","scary","creepy","japanese","goblin"],"char":"","fitzpatrick_scale":false,"category":"people"},"skull":{"keywords":["dead","skeleton","creepy","death"],"char":"","fitzpatrick_scale":false,"category":"people"},"ghost":{"keywords":["halloween","spooky","scary"],"char":"","fitzpatrick_scale":false,"category":"people"},"alien":{"keywords":["UFO","paul","weird","outer_space"],"char":"","fitzpatrick_scale":false,"category":"people"},"robot":{"keywords":["computer","machine","bot"],"char":"","fitzpatrick_scale":false,"category":"people"},"smiley_cat":{"keywords":["animal","cats","happy","smile"],"char":"","fitzpatrick_scale":false,"category":"people"},"smile_cat":{"keywords":["animal","cats","smile"],"char":"","fitzpatrick_scale":false,"category":"people"},"joy_cat":{"keywords":["animal","cats","haha","happy","tears"],"char":"","fitzpatrick_scale":false,"category":"people"},"heart_eyes_cat":{"keywords":["animal","love","like","affection","cats","valentines","heart"],"char":"","fitzpatrick_scale":false,"category":"people"},"smirk_cat":{"keywords":["animal","cats","smirk"],"char":"","fitzpatrick_scale":false,"category":"people"},"kissing_cat":{"keywords":["animal","cats","kiss"],"char":"","fitzpatrick_scale":false,"category":"people"},"scream_cat":{"keywords":["animal","cats","munch","scared","scream"],"char":"","fitzpatrick_scale":false,"category":"people"},"crying_cat_face":{"keywords":["animal","tears","weep","sad","cats","upset","cry"],"char":"","fitzpatrick_scale":false,"category":"people"},"pouting_cat":{"keywords":["animal","cats"],"char":"","fitzpatrick_scale":false,"category":"people"},"palms_up":{"keywords":["hands","gesture","cupped","prayer"],"char":"","fitzpatrick_scale":true,"category":"people"},"raised_hands":{"keywords":["gesture","hooray","yea","celebration","hands"],"char":"","fitzpatrick_scale":true,"category":"people"},"clap":{"keywords":["hands","praise","applause","congrats","yay"],"char":"","fitzpatrick_scale":true,"category":"people"},"wave":{"keywords":["hands","gesture","goodbye","solong","farewell","hello","hi","palm"],"char":"","fitzpatrick_scale":true,"category":"people"},"call_me_hand":{"keywords":["hands","gesture"],"char":"","fitzpatrick_scale":true,"category":"people"},"+1":{"keywords":["thumbsup","yes","awesome","good","agree","accept","cool","hand","like"],"char":"","fitzpatrick_scale":true,"category":"people"},"-1":{"keywords":["thumbsdown","no","dislike","hand"],"char":"","fitzpatrick_scale":true,"category":"people"},"facepunch":{"keywords":["angry","violence","fist","hit","attack","hand"],"char":"","fitzpatrick_scale":true,"category":"people"},"fist":{"keywords":["fingers","hand","grasp"],"char":"","fitzpatrick_scale":true,"category":"people"},"fist_left":{"keywords":["hand","fistbump"],"char":"","fitzpatrick_scale":true,"category":"people"},"fist_right":{"keywords":["hand","fistbump"],"char":"","fitzpatrick_scale":true,"category":"people"},"v":{"keywords":["fingers","ohyeah","hand","peace","victory","two"],"char":"","fitzpatrick_scale":true,"category":"people"},"ok_hand":{"keywords":["fingers","limbs","perfect","ok","okay"],"char":"","fitzpatrick_scale":true,"category":"people"},"raised_hand":{"keywords":["fingers","stop","highfive","palm","ban"],"char":"","fitzpatrick_scale":true,"category":"people"},"raised_back_of_hand":{"keywords":["fingers","raised","backhand"],"char":"","fitzpatrick_scale":true,"category":"people"},"open_hands":{"keywords":["fingers","butterfly","hands","open"],"char":"","fitzpatrick_scale":true,"category":"people"},"muscle":{"keywords":["arm","flex","hand","summer","strong","biceps"],"char":"","fitzpatrick_scale":true,"category":"people"},"pray":{"keywords":["please","hope","wish","namaste","highfive"],"char":"","fitzpatrick_scale":true,"category":"people"},"foot":{"keywords":["kick","stomp"],"char":"","fitzpatrick_scale":true,"category":"people"},"leg":{"keywords":["kick","limb"],"char":"","fitzpatrick_scale":true,"category":"people"},"handshake":{"keywords":["agreement","shake"],"char":"","fitzpatrick_scale":false,"category":"people"},"point_up":{"keywords":["hand","fingers","direction","up"],"char":"","fitzpatrick_scale":true,"category":"people"},"point_up_2":{"keywords":["fingers","hand","direction","up"],"char":"","fitzpatrick_scale":true,"category":"people"},"point_down":{"keywords":["fingers","hand","direction","down"],"char":"","fitzpatrick_scale":true,"category":"people"},"point_left":{"keywords":["direction","fingers","hand","left"],"char":"","fitzpatrick_scale":true,"category":"people"},"point_right":{"keywords":["fingers","hand","direction","right"],"char":"","fitzpatrick_scale":true,"category":"people"},"fu":{"keywords":["hand","fingers","rude","middle","flipping"],"char":"","fitzpatrick_scale":true,"category":"people"},"raised_hand_with_fingers_splayed":{"keywords":["hand","fingers","palm"],"char":"","fitzpatrick_scale":true,"category":"people"},"love_you":{"keywords":["hand","fingers","gesture"],"char":"","fitzpatrick_scale":true,"category":"people"},"metal":{"keywords":["hand","fingers","evil_eye","sign_of_horns","rock_on"],"char":"","fitzpatrick_scale":true,"category":"people"},"crossed_fingers":{"keywords":["good","lucky"],"char":"","fitzpatrick_scale":true,"category":"people"},"vulcan_salute":{"keywords":["hand","fingers","spock","star trek"],"char":"","fitzpatrick_scale":true,"category":"people"},"writing_hand":{"keywords":["lower_left_ballpoint_pen","stationery","write","compose"],"char":"","fitzpatrick_scale":true,"category":"people"},"selfie":{"keywords":["camera","phone"],"char":"","fitzpatrick_scale":true,"category":"people"},"nail_care":{"keywords":["beauty","manicure","finger","fashion","nail"],"char":"","fitzpatrick_scale":true,"category":"people"},"lips":{"keywords":["mouth","kiss"],"char":"","fitzpatrick_scale":false,"category":"people"},"tooth":{"keywords":["teeth","dentist"],"char":"","fitzpatrick_scale":false,"category":"people"},"tongue":{"keywords":["mouth","playful"],"char":"","fitzpatrick_scale":false,"category":"people"},"ear":{"keywords":["face","hear","sound","listen"],"char":"","fitzpatrick_scale":true,"category":"people"},"nose":{"keywords":["smell","sniff"],"char":"","fitzpatrick_scale":true,"category":"people"},"eye":{"keywords":["face","look","see","watch","stare"],"char":"","fitzpatrick_scale":false,"category":"people"},"eyes":{"keywords":["look","watch","stalk","peek","see"],"char":"","fitzpatrick_scale":false,"category":"people"},"brain":{"keywords":["smart","intelligent"],"char":"","fitzpatrick_scale":false,"category":"people"},"bust_in_silhouette":{"keywords":["user","person","human"],"char":"","fitzpatrick_scale":false,"category":"people"},"busts_in_silhouette":{"keywords":["user","person","human","group","team"],"char":"","fitzpatrick_scale":false,"category":"people"},"speaking_head":{"keywords":["user","person","human","sing","say","talk"],"char":"","fitzpatrick_scale":false,"category":"people"},"baby":{"keywords":["child","boy","girl","toddler"],"char":"","fitzpatrick_scale":true,"category":"people"},"child":{"keywords":["gender-neutral","young"],"char":"","fitzpatrick_scale":true,"category":"people"},"boy":{"keywords":["man","male","guy","teenager"],"char":"","fitzpatrick_scale":true,"category":"people"},"girl":{"keywords":["female","woman","teenager"],"char":"","fitzpatrick_scale":true,"category":"people"},"adult":{"keywords":["gender-neutral","person"],"char":"","fitzpatrick_scale":true,"category":"people"},"man":{"keywords":["mustache","father","dad","guy","classy","sir","moustache"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman":{"keywords":["female","girls","lady"],"char":"","fitzpatrick_scale":true,"category":"people"},"blonde_woman":{"keywords":["woman","female","girl","blonde","person"],"char":"","fitzpatrick_scale":true,"category":"people"},"blonde_man":{"keywords":["man","male","boy","blonde","guy","person"],"char":"","fitzpatrick_scale":true,"category":"people"},"bearded_person":{"keywords":["person","bewhiskered"],"char":"","fitzpatrick_scale":true,"category":"people"},"older_adult":{"keywords":["human","elder","senior","gender-neutral"],"char":"","fitzpatrick_scale":true,"category":"people"},"older_man":{"keywords":["human","male","men","old","elder","senior"],"char":"","fitzpatrick_scale":true,"category":"people"},"older_woman":{"keywords":["human","female","women","lady","old","elder","senior"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_with_gua_pi_mao":{"keywords":["male","boy","chinese"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_with_headscarf":{"keywords":["female","hijab","mantilla","tichel"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_with_turban":{"keywords":["female","indian","hinduism","arabs","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_with_turban":{"keywords":["male","indian","hinduism","arabs"],"char":"","fitzpatrick_scale":true,"category":"people"},"policewoman":{"keywords":["woman","police","law","legal","enforcement","arrest","911","female"],"char":"","fitzpatrick_scale":true,"category":"people"},"policeman":{"keywords":["man","police","law","legal","enforcement","arrest","911"],"char":"","fitzpatrick_scale":true,"category":"people"},"construction_worker_woman":{"keywords":["female","human","wip","build","construction","worker","labor","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"construction_worker_man":{"keywords":["male","human","wip","guy","build","construction","worker","labor"],"char":"","fitzpatrick_scale":true,"category":"people"},"guardswoman":{"keywords":["uk","gb","british","female","royal","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"guardsman":{"keywords":["uk","gb","british","male","guy","royal"],"char":"","fitzpatrick_scale":true,"category":"people"},"female_detective":{"keywords":["human","spy","detective","female","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"male_detective":{"keywords":["human","spy","detective"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_health_worker":{"keywords":["doctor","nurse","therapist","healthcare","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_health_worker":{"keywords":["doctor","nurse","therapist","healthcare","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_farmer":{"keywords":["rancher","gardener","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_farmer":{"keywords":["rancher","gardener","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_cook":{"keywords":["chef","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_cook":{"keywords":["chef","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_student":{"keywords":["graduate","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_student":{"keywords":["graduate","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_singer":{"keywords":["rockstar","entertainer","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_singer":{"keywords":["rockstar","entertainer","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_teacher":{"keywords":["instructor","professor","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_teacher":{"keywords":["instructor","professor","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_factory_worker":{"keywords":["assembly","industrial","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_factory_worker":{"keywords":["assembly","industrial","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_technologist":{"keywords":["coder","developer","engineer","programmer","software","woman","human","laptop","computer"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_technologist":{"keywords":["coder","developer","engineer","programmer","software","man","human","laptop","computer"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_office_worker":{"keywords":["business","manager","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_office_worker":{"keywords":["business","manager","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_mechanic":{"keywords":["plumber","woman","human","wrench"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_mechanic":{"keywords":["plumber","man","human","wrench"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_scientist":{"keywords":["biologist","chemist","engineer","physicist","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_scientist":{"keywords":["biologist","chemist","engineer","physicist","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_artist":{"keywords":["painter","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_artist":{"keywords":["painter","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_firefighter":{"keywords":["fireman","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_firefighter":{"keywords":["fireman","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_pilot":{"keywords":["aviator","plane","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_pilot":{"keywords":["aviator","plane","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_astronaut":{"keywords":["space","rocket","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_astronaut":{"keywords":["space","rocket","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_judge":{"keywords":["justice","court","woman","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_judge":{"keywords":["justice","court","man","human"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_superhero":{"keywords":["woman","female","good","heroine","superpowers"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_superhero":{"keywords":["man","male","good","hero","superpowers"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_supervillain":{"keywords":["woman","female","evil","bad","criminal","heroine","superpowers"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_supervillain":{"keywords":["man","male","evil","bad","criminal","hero","superpowers"],"char":"","fitzpatrick_scale":true,"category":"people"},"mrs_claus":{"keywords":["woman","female","xmas","mother christmas"],"char":"","fitzpatrick_scale":true,"category":"people"},"santa":{"keywords":["festival","man","male","xmas","father christmas"],"char":"","fitzpatrick_scale":true,"category":"people"},"sorceress":{"keywords":["woman","female","mage","witch"],"char":"","fitzpatrick_scale":true,"category":"people"},"wizard":{"keywords":["man","male","mage","sorcerer"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_elf":{"keywords":["woman","female"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_elf":{"keywords":["man","male"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_vampire":{"keywords":["woman","female"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_vampire":{"keywords":["man","male","dracula"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_zombie":{"keywords":["woman","female","undead","walking dead"],"char":"","fitzpatrick_scale":false,"category":"people"},"man_zombie":{"keywords":["man","male","dracula","undead","walking dead"],"char":"","fitzpatrick_scale":false,"category":"people"},"woman_genie":{"keywords":["woman","female"],"char":"","fitzpatrick_scale":false,"category":"people"},"man_genie":{"keywords":["man","male"],"char":"","fitzpatrick_scale":false,"category":"people"},"mermaid":{"keywords":["woman","female","merwoman","ariel"],"char":"","fitzpatrick_scale":true,"category":"people"},"merman":{"keywords":["man","male","triton"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_fairy":{"keywords":["woman","female"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_fairy":{"keywords":["man","male"],"char":"","fitzpatrick_scale":true,"category":"people"},"angel":{"keywords":["heaven","wings","halo"],"char":"","fitzpatrick_scale":true,"category":"people"},"pregnant_woman":{"keywords":["baby"],"char":"","fitzpatrick_scale":true,"category":"people"},"breastfeeding":{"keywords":["nursing","baby"],"char":"","fitzpatrick_scale":true,"category":"people"},"princess":{"keywords":["girl","woman","female","blond","crown","royal","queen"],"char":"","fitzpatrick_scale":true,"category":"people"},"prince":{"keywords":["boy","man","male","crown","royal","king"],"char":"","fitzpatrick_scale":true,"category":"people"},"bride_with_veil":{"keywords":["couple","marriage","wedding","woman","bride"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_in_tuxedo":{"keywords":["couple","marriage","wedding","groom"],"char":"","fitzpatrick_scale":true,"category":"people"},"running_woman":{"keywords":["woman","walking","exercise","race","running","female"],"char":"","fitzpatrick_scale":true,"category":"people"},"running_man":{"keywords":["man","walking","exercise","race","running"],"char":"","fitzpatrick_scale":true,"category":"people"},"walking_woman":{"keywords":["human","feet","steps","woman","female"],"char":"","fitzpatrick_scale":true,"category":"people"},"walking_man":{"keywords":["human","feet","steps"],"char":"","fitzpatrick_scale":true,"category":"people"},"dancer":{"keywords":["female","girl","woman","fun"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_dancing":{"keywords":["male","boy","fun","dancer"],"char":"","fitzpatrick_scale":true,"category":"people"},"dancing_women":{"keywords":["female","bunny","women","girls"],"char":"","fitzpatrick_scale":false,"category":"people"},"dancing_men":{"keywords":["male","bunny","men","boys"],"char":"","fitzpatrick_scale":false,"category":"people"},"couple":{"keywords":["pair","people","human","love","date","dating","like","affection","valentines","marriage"],"char":"","fitzpatrick_scale":false,"category":"people"},"two_men_holding_hands":{"keywords":["pair","couple","love","like","bromance","friendship","people","human"],"char":"","fitzpatrick_scale":false,"category":"people"},"two_women_holding_hands":{"keywords":["pair","friendship","couple","love","like","female","people","human"],"char":"","fitzpatrick_scale":false,"category":"people"},"bowing_woman":{"keywords":["woman","female","girl"],"char":"","fitzpatrick_scale":true,"category":"people"},"bowing_man":{"keywords":["man","male","boy"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_facepalming":{"keywords":["man","male","boy","disbelief"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_facepalming":{"keywords":["woman","female","girl","disbelief"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_shrugging":{"keywords":["woman","female","girl","confused","indifferent","doubt"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_shrugging":{"keywords":["man","male","boy","confused","indifferent","doubt"],"char":"","fitzpatrick_scale":true,"category":"people"},"tipping_hand_woman":{"keywords":["female","girl","woman","human","information"],"char":"","fitzpatrick_scale":true,"category":"people"},"tipping_hand_man":{"keywords":["male","boy","man","human","information"],"char":"","fitzpatrick_scale":true,"category":"people"},"no_good_woman":{"keywords":["female","girl","woman","nope"],"char":"","fitzpatrick_scale":true,"category":"people"},"no_good_man":{"keywords":["male","boy","man","nope"],"char":"","fitzpatrick_scale":true,"category":"people"},"ok_woman":{"keywords":["women","girl","female","pink","human","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"ok_man":{"keywords":["men","boy","male","blue","human","man"],"char":"","fitzpatrick_scale":true,"category":"people"},"raising_hand_woman":{"keywords":["female","girl","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"raising_hand_man":{"keywords":["male","boy","man"],"char":"","fitzpatrick_scale":true,"category":"people"},"pouting_woman":{"keywords":["female","girl","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"pouting_man":{"keywords":["male","boy","man"],"char":"","fitzpatrick_scale":true,"category":"people"},"frowning_woman":{"keywords":["female","girl","woman","sad","depressed","discouraged","unhappy"],"char":"","fitzpatrick_scale":true,"category":"people"},"frowning_man":{"keywords":["male","boy","man","sad","depressed","discouraged","unhappy"],"char":"","fitzpatrick_scale":true,"category":"people"},"haircut_woman":{"keywords":["female","girl","woman"],"char":"","fitzpatrick_scale":true,"category":"people"},"haircut_man":{"keywords":["male","boy","man"],"char":"","fitzpatrick_scale":true,"category":"people"},"massage_woman":{"keywords":["female","girl","woman","head"],"char":"","fitzpatrick_scale":true,"category":"people"},"massage_man":{"keywords":["male","boy","man","head"],"char":"","fitzpatrick_scale":true,"category":"people"},"woman_in_steamy_room":{"keywords":["female","woman","spa","steamroom","sauna"],"char":"","fitzpatrick_scale":true,"category":"people"},"man_in_steamy_room":{"keywords":["male","man","spa","steamroom","sauna"],"char":"","fitzpatrick_scale":true,"category":"people"},"couple_with_heart_woman_man":{"keywords":["pair","love","like","affection","human","dating","valentines","marriage"],"char":"","fitzpatrick_scale":false,"category":"people"},"couple_with_heart_woman_woman":{"keywords":["pair","love","like","affection","human","dating","valentines","marriage"],"char":"","fitzpatrick_scale":false,"category":"people"},"couple_with_heart_man_man":{"keywords":["pair","love","like","affection","human","dating","valentines","marriage"],"char":"","fitzpatrick_scale":false,"category":"people"},"couplekiss_man_woman":{"keywords":["pair","valentines","love","like","dating","marriage"],"char":"","fitzpatrick_scale":false,"category":"people"},"couplekiss_woman_woman":{"keywords":["pair","valentines","love","like","dating","marriage"],"char":"","fitzpatrick_scale":false,"category":"people"},"couplekiss_man_man":{"keywords":["pair","valentines","love","like","dating","marriage"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_woman_boy":{"keywords":["home","parents","child","mom","dad","father","mother","people","human"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_woman_girl":{"keywords":["home","parents","people","human","child"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_woman_girl_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_woman_boy_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_woman_girl_girl":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_woman_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_woman_girl":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_woman_girl_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_woman_boy_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_woman_girl_girl":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_man_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_man_girl":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_man_girl_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_man_boy_boy":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_man_girl_girl":{"keywords":["home","parents","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_boy":{"keywords":["home","parent","people","human","child"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_girl":{"keywords":["home","parent","people","human","child"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_girl_boy":{"keywords":["home","parent","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_boy_boy":{"keywords":["home","parent","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_woman_girl_girl":{"keywords":["home","parent","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_boy":{"keywords":["home","parent","people","human","child"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_girl":{"keywords":["home","parent","people","human","child"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_girl_boy":{"keywords":["home","parent","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_boy_boy":{"keywords":["home","parent","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"family_man_girl_girl":{"keywords":["home","parent","people","human","children"],"char":"","fitzpatrick_scale":false,"category":"people"},"yarn":{"keywords":["ball","crochet","knit"],"char":"","fitzpatrick_scale":false,"category":"people"},"thread":{"keywords":["needle","sewing","spool","string"],"char":"","fitzpatrick_scale":false,"category":"people"},"coat":{"keywords":["jacket"],"char":"","fitzpatrick_scale":false,"category":"people"},"labcoat":{"keywords":["doctor","experiment","scientist","chemist"],"char":"","fitzpatrick_scale":false,"category":"people"},"womans_clothes":{"keywords":["fashion","shopping_bags","female"],"char":"","fitzpatrick_scale":false,"category":"people"},"tshirt":{"keywords":["fashion","cloth","casual","shirt","tee"],"char":"","fitzpatrick_scale":false,"category":"people"},"jeans":{"keywords":["fashion","shopping"],"char":"","fitzpatrick_scale":false,"category":"people"},"necktie":{"keywords":["shirt","suitup","formal","fashion","cloth","business"],"char":"","fitzpatrick_scale":false,"category":"people"},"dress":{"keywords":["clothes","fashion","shopping"],"char":"","fitzpatrick_scale":false,"category":"people"},"bikini":{"keywords":["swimming","female","woman","girl","fashion","beach","summer"],"char":"","fitzpatrick_scale":false,"category":"people"},"kimono":{"keywords":["dress","fashion","women","female","japanese"],"char":"","fitzpatrick_scale":false,"category":"people"},"lipstick":{"keywords":["female","girl","fashion","woman"],"char":"","fitzpatrick_scale":false,"category":"people"},"kiss":{"keywords":["face","lips","love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"people"},"footprints":{"keywords":["feet","tracking","walking","beach"],"char":"","fitzpatrick_scale":false,"category":"people"},"flat_shoe":{"keywords":["ballet","slip-on","slipper"],"char":"","fitzpatrick_scale":false,"category":"people"},"high_heel":{"keywords":["fashion","shoes","female","pumps","stiletto"],"char":"","fitzpatrick_scale":false,"category":"people"},"sandal":{"keywords":["shoes","fashion","flip flops"],"char":"","fitzpatrick_scale":false,"category":"people"},"boot":{"keywords":["shoes","fashion"],"char":"","fitzpatrick_scale":false,"category":"people"},"mans_shoe":{"keywords":["fashion","male"],"char":"","fitzpatrick_scale":false,"category":"people"},"athletic_shoe":{"keywords":["shoes","sports","sneakers"],"char":"","fitzpatrick_scale":false,"category":"people"},"hiking_boot":{"keywords":["backpacking","camping","hiking"],"char":"","fitzpatrick_scale":false,"category":"people"},"socks":{"keywords":["stockings","clothes"],"char":"","fitzpatrick_scale":false,"category":"people"},"gloves":{"keywords":["hands","winter","clothes"],"char":"","fitzpatrick_scale":false,"category":"people"},"scarf":{"keywords":["neck","winter","clothes"],"char":"","fitzpatrick_scale":false,"category":"people"},"womans_hat":{"keywords":["fashion","accessories","female","lady","spring"],"char":"","fitzpatrick_scale":false,"category":"people"},"tophat":{"keywords":["magic","gentleman","classy","circus"],"char":"","fitzpatrick_scale":false,"category":"people"},"billed_hat":{"keywords":["cap","baseball"],"char":"","fitzpatrick_scale":false,"category":"people"},"rescue_worker_helmet":{"keywords":["construction","build"],"char":"","fitzpatrick_scale":false,"category":"people"},"mortar_board":{"keywords":["school","college","degree","university","graduation","cap","hat","legal","learn","education"],"char":"","fitzpatrick_scale":false,"category":"people"},"crown":{"keywords":["king","kod","leader","royalty","lord"],"char":"","fitzpatrick_scale":false,"category":"people"},"school_satchel":{"keywords":["student","education","bag","backpack"],"char":"","fitzpatrick_scale":false,"category":"people"},"luggage":{"keywords":["packing","travel"],"char":"","fitzpatrick_scale":false,"category":"people"},"pouch":{"keywords":["bag","accessories","shopping"],"char":"","fitzpatrick_scale":false,"category":"people"},"purse":{"keywords":["fashion","accessories","money","sales","shopping"],"char":"","fitzpatrick_scale":false,"category":"people"},"handbag":{"keywords":["fashion","accessory","accessories","shopping"],"char":"","fitzpatrick_scale":false,"category":"people"},"briefcase":{"keywords":["business","documents","work","law","legal","job","career"],"char":"","fitzpatrick_scale":false,"category":"people"},"eyeglasses":{"keywords":["fashion","accessories","eyesight","nerdy","dork","geek"],"char":"","fitzpatrick_scale":false,"category":"people"},"dark_sunglasses":{"keywords":["face","cool","accessories"],"char":"","fitzpatrick_scale":false,"category":"people"},"goggles":{"keywords":["eyes","protection","safety"],"char":"","fitzpatrick_scale":false,"category":"people"},"ring":{"keywords":["wedding","propose","marriage","valentines","diamond","fashion","jewelry","gem","engagement"],"char":"","fitzpatrick_scale":false,"category":"people"},"closed_umbrella":{"keywords":["weather","rain","drizzle"],"char":"","fitzpatrick_scale":false,"category":"people"},"dog":{"keywords":["animal","friend","nature","woof","puppy","pet","faithful"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cat":{"keywords":["animal","meow","nature","pet","kitten"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"mouse":{"keywords":["animal","nature","cheese_wedge","rodent"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"hamster":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"rabbit":{"keywords":["animal","nature","pet","spring","magic","bunny"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"fox_face":{"keywords":["animal","nature","face"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"bear":{"keywords":["animal","nature","wild"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"panda_face":{"keywords":["animal","nature","panda"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"koala":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"tiger":{"keywords":["animal","cat","danger","wild","nature","roar"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"lion":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cow":{"keywords":["beef","ox","animal","nature","moo","milk"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"pig":{"keywords":["animal","oink","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"pig_nose":{"keywords":["animal","oink"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"frog":{"keywords":["animal","nature","croak","toad"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"squid":{"keywords":["animal","nature","ocean","sea"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"octopus":{"keywords":["animal","creature","ocean","sea","nature","beach"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"shrimp":{"keywords":["animal","ocean","nature","seafood"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"monkey_face":{"keywords":["animal","nature","circus"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"gorilla":{"keywords":["animal","nature","circus"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"see_no_evil":{"keywords":["monkey","animal","nature","haha"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"hear_no_evil":{"keywords":["animal","monkey","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"speak_no_evil":{"keywords":["monkey","animal","nature","omg"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"monkey":{"keywords":["animal","nature","banana","circus"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"chicken":{"keywords":["animal","cluck","nature","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"penguin":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"bird":{"keywords":["animal","nature","fly","tweet","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"baby_chick":{"keywords":["animal","chicken","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"hatching_chick":{"keywords":["animal","chicken","egg","born","baby","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"hatched_chick":{"keywords":["animal","chicken","baby","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"duck":{"keywords":["animal","nature","bird","mallard"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"eagle":{"keywords":["animal","nature","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"owl":{"keywords":["animal","nature","bird","hoot"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"bat":{"keywords":["animal","nature","blind","vampire"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"wolf":{"keywords":["animal","nature","wild"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"boar":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"horse":{"keywords":["animal","brown","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"unicorn":{"keywords":["animal","nature","mystical"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"honeybee":{"keywords":["animal","insect","nature","bug","spring","honey"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"bug":{"keywords":["animal","insect","nature","worm"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"butterfly":{"keywords":["animal","insect","nature","caterpillar"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"snail":{"keywords":["slow","animal","shell"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"beetle":{"keywords":["animal","insect","nature","ladybug"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"ant":{"keywords":["animal","insect","nature","bug"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"grasshopper":{"keywords":["animal","cricket","chirp"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"spider":{"keywords":["animal","arachnid"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"scorpion":{"keywords":["animal","arachnid"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"crab":{"keywords":["animal","crustacean"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"snake":{"keywords":["animal","evil","nature","hiss","python"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"lizard":{"keywords":["animal","nature","reptile"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"t-rex":{"keywords":["animal","nature","dinosaur","tyrannosaurus","extinct"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sauropod":{"keywords":["animal","nature","dinosaur","brachiosaurus","brontosaurus","diplodocus","extinct"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"turtle":{"keywords":["animal","slow","nature","tortoise"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"tropical_fish":{"keywords":["animal","swim","ocean","beach","nemo"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"fish":{"keywords":["animal","food","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"blowfish":{"keywords":["animal","nature","food","sea","ocean"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dolphin":{"keywords":["animal","nature","fish","sea","ocean","flipper","fins","beach"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"shark":{"keywords":["animal","nature","fish","sea","ocean","jaws","fins","beach"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"whale":{"keywords":["animal","nature","sea","ocean"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"whale2":{"keywords":["animal","nature","sea","ocean"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"crocodile":{"keywords":["animal","nature","reptile","lizard","alligator"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"leopard":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"zebra":{"keywords":["animal","nature","stripes","safari"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"tiger2":{"keywords":["animal","nature","roar"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"water_buffalo":{"keywords":["animal","nature","ox","cow"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"ox":{"keywords":["animal","cow","beef"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cow2":{"keywords":["beef","ox","animal","nature","moo","milk"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"deer":{"keywords":["animal","nature","horns","venison"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dromedary_camel":{"keywords":["animal","hot","desert","hump"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"camel":{"keywords":["animal","nature","hot","desert","hump"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"giraffe":{"keywords":["animal","nature","spots","safari"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"elephant":{"keywords":["animal","nature","nose","th","circus"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"rhinoceros":{"keywords":["animal","nature","horn"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"goat":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"ram":{"keywords":["animal","sheep","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sheep":{"keywords":["animal","nature","wool","shipit"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"racehorse":{"keywords":["animal","gamble","luck"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"pig2":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"rat":{"keywords":["animal","mouse","rodent"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"mouse2":{"keywords":["animal","nature","rodent"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"rooster":{"keywords":["animal","nature","chicken"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"turkey":{"keywords":["animal","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dove":{"keywords":["animal","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dog2":{"keywords":["animal","nature","friend","doge","pet","faithful"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"poodle":{"keywords":["dog","animal","101","nature","pet"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cat2":{"keywords":["animal","meow","pet","cats"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"rabbit2":{"keywords":["animal","nature","pet","magic","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"chipmunk":{"keywords":["animal","nature","rodent","squirrel"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"hedgehog":{"keywords":["animal","nature","spiny"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"raccoon":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"llama":{"keywords":["animal","nature","alpaca"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"hippopotamus":{"keywords":["animal","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"kangaroo":{"keywords":["animal","nature","australia","joey","hop","marsupial"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"badger":{"keywords":["animal","nature","honey"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"swan":{"keywords":["animal","nature","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"peacock":{"keywords":["animal","nature","peahen","bird"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"parrot":{"keywords":["animal","nature","bird","pirate","talk"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"lobster":{"keywords":["animal","nature","bisque","claws","seafood"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"mosquito":{"keywords":["animal","nature","insect","malaria"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"paw_prints":{"keywords":["animal","tracking","footprints","dog","cat","pet","feet"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dragon":{"keywords":["animal","myth","nature","chinese","green"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dragon_face":{"keywords":["animal","myth","nature","chinese","green"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cactus":{"keywords":["vegetable","plant","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"christmas_tree":{"keywords":["festival","vacation","december","xmas","celebration"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"evergreen_tree":{"keywords":["plant","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"deciduous_tree":{"keywords":["plant","nature"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"palm_tree":{"keywords":["plant","vegetable","nature","summer","beach","mojito","tropical"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"seedling":{"keywords":["plant","nature","grass","lawn","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"herb":{"keywords":["vegetable","plant","medicine","weed","grass","lawn"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"shamrock":{"keywords":["vegetable","plant","nature","irish","clover"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"four_leaf_clover":{"keywords":["vegetable","plant","nature","lucky","irish"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"bamboo":{"keywords":["plant","nature","vegetable","panda","pine_decoration"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"tanabata_tree":{"keywords":["plant","nature","branch","summer"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"leaves":{"keywords":["nature","plant","tree","vegetable","grass","lawn","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"fallen_leaf":{"keywords":["nature","plant","vegetable","leaves"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"maple_leaf":{"keywords":["nature","plant","vegetable","ca","fall"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"ear_of_rice":{"keywords":["nature","plant"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"hibiscus":{"keywords":["plant","vegetable","flowers","beach"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sunflower":{"keywords":["nature","plant","fall"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"rose":{"keywords":["flowers","valentines","love","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"wilted_flower":{"keywords":["plant","nature","flower"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"tulip":{"keywords":["flowers","plant","nature","summer","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"blossom":{"keywords":["nature","flowers","yellow"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cherry_blossom":{"keywords":["nature","plant","spring","flower"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"bouquet":{"keywords":["flowers","nature","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"mushroom":{"keywords":["plant","vegetable"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"chestnut":{"keywords":["food","squirrel"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"jack_o_lantern":{"keywords":["halloween","light","pumpkin","creepy","fall"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"shell":{"keywords":["nature","sea","beach"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"spider_web":{"keywords":["animal","insect","arachnid","silk"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"earth_americas":{"keywords":["globe","world","USA","international"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"earth_africa":{"keywords":["globe","world","international"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"earth_asia":{"keywords":["globe","world","east","international"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"full_moon":{"keywords":["nature","yellow","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"waning_gibbous_moon":{"keywords":["nature","twilight","planet","space","night","evening","sleep","waxing_gibbous_moon"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"last_quarter_moon":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"waning_crescent_moon":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"new_moon":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"waxing_crescent_moon":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"first_quarter_moon":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"waxing_gibbous_moon":{"keywords":["nature","night","sky","gray","twilight","planet","space","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"new_moon_with_face":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"full_moon_with_face":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"first_quarter_moon_with_face":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"last_quarter_moon_with_face":{"keywords":["nature","twilight","planet","space","night","evening","sleep"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sun_with_face":{"keywords":["nature","morning","sky"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"crescent_moon":{"keywords":["night","sleep","sky","evening","magic"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"star":{"keywords":["night","yellow"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"star2":{"keywords":["night","sparkle","awesome","good","magic"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dizzy":{"keywords":["star","sparkle","shoot","magic"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sparkles":{"keywords":["stars","shine","shiny","cool","awesome","good","magic"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"comet":{"keywords":["space"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sunny":{"keywords":["weather","nature","brightness","summer","beach","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sun_behind_small_cloud":{"keywords":["weather"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"partly_sunny":{"keywords":["weather","nature","cloudy","morning","fall","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sun_behind_large_cloud":{"keywords":["weather"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sun_behind_rain_cloud":{"keywords":["weather"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cloud":{"keywords":["weather","sky"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cloud_with_rain":{"keywords":["weather"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cloud_with_lightning_and_rain":{"keywords":["weather","lightning"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cloud_with_lightning":{"keywords":["weather","thunder"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"zap":{"keywords":["thunder","weather","lightning bolt","fast"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"fire":{"keywords":["hot","cook","flame"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"boom":{"keywords":["bomb","explode","explosion","collision","blown"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"snowflake":{"keywords":["winter","season","cold","weather","christmas","xmas"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"cloud_with_snow":{"keywords":["weather"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"snowman":{"keywords":["winter","season","cold","weather","christmas","xmas","frozen","without_snow"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"snowman_with_snow":{"keywords":["winter","season","cold","weather","christmas","xmas","frozen"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"wind_face":{"keywords":["gust","air"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"dash":{"keywords":["wind","air","fast","shoo","fart","smoke","puff"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"tornado":{"keywords":["weather","cyclone","twister"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"fog":{"keywords":["weather"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"open_umbrella":{"keywords":["weather","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"umbrella":{"keywords":["rainy","weather","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"droplet":{"keywords":["water","drip","faucet","spring"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"sweat_drops":{"keywords":["water","drip","oops"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"ocean":{"keywords":["sea","water","wave","nature","tsunami","disaster"],"char":"","fitzpatrick_scale":false,"category":"animals_and_nature"},"green_apple":{"keywords":["fruit","nature"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"apple":{"keywords":["fruit","mac","school"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"pear":{"keywords":["fruit","nature","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"tangerine":{"keywords":["food","fruit","nature","orange"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"lemon":{"keywords":["fruit","nature"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"banana":{"keywords":["fruit","food","monkey"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"watermelon":{"keywords":["fruit","food","picnic","summer"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"grapes":{"keywords":["fruit","food","wine"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"strawberry":{"keywords":["fruit","food","nature"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"melon":{"keywords":["fruit","nature","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cherries":{"keywords":["food","fruit"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"peach":{"keywords":["fruit","nature","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"pineapple":{"keywords":["fruit","nature","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"coconut":{"keywords":["fruit","nature","food","palm"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"kiwi_fruit":{"keywords":["fruit","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"mango":{"keywords":["fruit","food","tropical"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"avocado":{"keywords":["fruit","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"broccoli":{"keywords":["fruit","food","vegetable"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"tomato":{"keywords":["fruit","vegetable","nature","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"eggplant":{"keywords":["vegetable","nature","food","aubergine"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cucumber":{"keywords":["fruit","food","pickle"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"carrot":{"keywords":["vegetable","food","orange"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"hot_pepper":{"keywords":["food","spicy","chilli","chili"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"potato":{"keywords":["food","tuber","vegatable","starch"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"corn":{"keywords":["food","vegetable","plant"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"leafy_greens":{"keywords":["food","vegetable","plant","bok choy","cabbage","kale","lettuce"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"sweet_potato":{"keywords":["food","nature"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"peanuts":{"keywords":["food","nut"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"honey_pot":{"keywords":["bees","sweet","kitchen"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"croissant":{"keywords":["food","bread","french"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"bread":{"keywords":["food","wheat","breakfast","toast"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"baguette_bread":{"keywords":["food","bread","french"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"bagel":{"keywords":["food","bread","bakery","schmear"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"pretzel":{"keywords":["food","bread","twisted"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cheese":{"keywords":["food","chadder"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"egg":{"keywords":["food","chicken","breakfast"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"bacon":{"keywords":["food","breakfast","pork","pig","meat"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"steak":{"keywords":["food","cow","meat","cut","chop","lambchop","porkchop"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"pancakes":{"keywords":["food","breakfast","flapjacks","hotcakes"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"poultry_leg":{"keywords":["food","meat","drumstick","bird","chicken","turkey"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"meat_on_bone":{"keywords":["good","food","drumstick"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"bone":{"keywords":["skeleton"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"fried_shrimp":{"keywords":["food","animal","appetizer","summer"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"fried_egg":{"keywords":["food","breakfast","kitchen","egg"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"hamburger":{"keywords":["meat","fast food","beef","cheeseburger","mcdonalds","burger king"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"fries":{"keywords":["chips","snack","fast food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"stuffed_flatbread":{"keywords":["food","flatbread","stuffed","gyro"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"hotdog":{"keywords":["food","frankfurter"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"pizza":{"keywords":["food","party"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"sandwich":{"keywords":["food","lunch","bread"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"canned_food":{"keywords":["food","soup"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"spaghetti":{"keywords":["food","italian","noodle"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"taco":{"keywords":["food","mexican"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"burrito":{"keywords":["food","mexican"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"green_salad":{"keywords":["food","healthy","lettuce"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"shallow_pan_of_food":{"keywords":["food","cooking","casserole","paella"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"ramen":{"keywords":["food","japanese","noodle","chopsticks"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"stew":{"keywords":["food","meat","soup"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"fish_cake":{"keywords":["food","japan","sea","beach","narutomaki","pink","swirl","kamaboko","surimi","ramen"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"fortune_cookie":{"keywords":["food","prophecy"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"sushi":{"keywords":["food","fish","japanese","rice"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"bento":{"keywords":["food","japanese","box"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"curry":{"keywords":["food","spicy","hot","indian"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"rice_ball":{"keywords":["food","japanese"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"rice":{"keywords":["food","china","asian"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"rice_cracker":{"keywords":["food","japanese"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"oden":{"keywords":["food","japanese"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"dango":{"keywords":["food","dessert","sweet","japanese","barbecue","meat"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"shaved_ice":{"keywords":["hot","dessert","summer"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"ice_cream":{"keywords":["food","hot","dessert"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"icecream":{"keywords":["food","hot","dessert","summer"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"pie":{"keywords":["food","dessert","pastry"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cake":{"keywords":["food","dessert"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cupcake":{"keywords":["food","dessert","bakery","sweet"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"moon_cake":{"keywords":["food","autumn"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"birthday":{"keywords":["food","dessert","cake"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"custard":{"keywords":["dessert","food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"candy":{"keywords":["snack","dessert","sweet","lolly"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"lollipop":{"keywords":["food","snack","candy","sweet"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"chocolate_bar":{"keywords":["food","snack","dessert","sweet"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"popcorn":{"keywords":["food","movie theater","films","snack"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"dumpling":{"keywords":["food","empanada","pierogi","potsticker"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"doughnut":{"keywords":["food","dessert","snack","sweet","donut"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cookie":{"keywords":["food","snack","oreo","chocolate","sweet","dessert"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"milk_glass":{"keywords":["beverage","drink","cow"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"beer":{"keywords":["relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"beers":{"keywords":["relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"clinking_glasses":{"keywords":["beverage","drink","party","alcohol","celebrate","cheers","wine","champagne","toast"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"wine_glass":{"keywords":["drink","beverage","drunk","alcohol","booze"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"tumbler_glass":{"keywords":["drink","beverage","drunk","alcohol","liquor","booze","bourbon","scotch","whisky","glass","shot"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cocktail":{"keywords":["drink","drunk","alcohol","beverage","booze","mojito"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"tropical_drink":{"keywords":["beverage","cocktail","summer","beach","alcohol","booze","mojito"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"champagne":{"keywords":["drink","wine","bottle","celebration"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"sake":{"keywords":["wine","drink","drunk","beverage","japanese","alcohol","booze"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"tea":{"keywords":["drink","bowl","breakfast","green","british"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"cup_with_straw":{"keywords":["drink","soda"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"coffee":{"keywords":["beverage","caffeine","latte","espresso"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"baby_bottle":{"keywords":["food","container","milk"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"salt":{"keywords":["condiment","shaker"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"spoon":{"keywords":["cutlery","kitchen","tableware"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"fork_and_knife":{"keywords":["cutlery","kitchen"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"plate_with_cutlery":{"keywords":["food","eat","meal","lunch","dinner","restaurant"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"bowl_with_spoon":{"keywords":["food","breakfast","cereal","oatmeal","porridge"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"takeout_box":{"keywords":["food","leftovers"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"chopsticks":{"keywords":["food"],"char":"","fitzpatrick_scale":false,"category":"food_and_drink"},"soccer":{"keywords":["sports","football"],"char":"","fitzpatrick_scale":false,"category":"activity"},"basketball":{"keywords":["sports","balls","NBA"],"char":"","fitzpatrick_scale":false,"category":"activity"},"football":{"keywords":["sports","balls","NFL"],"char":"","fitzpatrick_scale":false,"category":"activity"},"baseball":{"keywords":["sports","balls"],"char":"","fitzpatrick_scale":false,"category":"activity"},"softball":{"keywords":["sports","balls"],"char":"","fitzpatrick_scale":false,"category":"activity"},"tennis":{"keywords":["sports","balls","green"],"char":"","fitzpatrick_scale":false,"category":"activity"},"volleyball":{"keywords":["sports","balls"],"char":"","fitzpatrick_scale":false,"category":"activity"},"rugby_football":{"keywords":["sports","team"],"char":"","fitzpatrick_scale":false,"category":"activity"},"flying_disc":{"keywords":["sports","frisbee","ultimate"],"char":"","fitzpatrick_scale":false,"category":"activity"},"8ball":{"keywords":["pool","hobby","game","luck","magic"],"char":"","fitzpatrick_scale":false,"category":"activity"},"golf":{"keywords":["sports","business","flag","hole","summer"],"char":"","fitzpatrick_scale":false,"category":"activity"},"golfing_woman":{"keywords":["sports","business","woman","female"],"char":"","fitzpatrick_scale":false,"category":"activity"},"golfing_man":{"keywords":["sports","business"],"char":"","fitzpatrick_scale":true,"category":"activity"},"ping_pong":{"keywords":["sports","pingpong"],"char":"","fitzpatrick_scale":false,"category":"activity"},"badminton":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"goal_net":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"ice_hockey":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"field_hockey":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"lacrosse":{"keywords":["sports","ball","stick"],"char":"","fitzpatrick_scale":false,"category":"activity"},"cricket":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"ski":{"keywords":["sports","winter","cold","snow"],"char":"","fitzpatrick_scale":false,"category":"activity"},"skier":{"keywords":["sports","winter","snow"],"char":"","fitzpatrick_scale":false,"category":"activity"},"snowboarder":{"keywords":["sports","winter"],"char":"","fitzpatrick_scale":true,"category":"activity"},"person_fencing":{"keywords":["sports","fencing","sword"],"char":"","fitzpatrick_scale":false,"category":"activity"},"women_wrestling":{"keywords":["sports","wrestlers"],"char":"","fitzpatrick_scale":false,"category":"activity"},"men_wrestling":{"keywords":["sports","wrestlers"],"char":"","fitzpatrick_scale":false,"category":"activity"},"woman_cartwheeling":{"keywords":["gymnastics"],"char":"","fitzpatrick_scale":true,"category":"activity"},"man_cartwheeling":{"keywords":["gymnastics"],"char":"","fitzpatrick_scale":true,"category":"activity"},"woman_playing_handball":{"keywords":["sports"],"char":"","fitzpatrick_scale":true,"category":"activity"},"man_playing_handball":{"keywords":["sports"],"char":"","fitzpatrick_scale":true,"category":"activity"},"ice_skate":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"curling_stone":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"skateboard":{"keywords":["board"],"char":"","fitzpatrick_scale":false,"category":"activity"},"sled":{"keywords":["sleigh","luge","toboggan"],"char":"","fitzpatrick_scale":false,"category":"activity"},"bow_and_arrow":{"keywords":["sports"],"char":"","fitzpatrick_scale":false,"category":"activity"},"fishing_pole_and_fish":{"keywords":["food","hobby","summer"],"char":"","fitzpatrick_scale":false,"category":"activity"},"boxing_glove":{"keywords":["sports","fighting"],"char":"","fitzpatrick_scale":false,"category":"activity"},"martial_arts_uniform":{"keywords":["judo","karate","taekwondo"],"char":"","fitzpatrick_scale":false,"category":"activity"},"rowing_woman":{"keywords":["sports","hobby","water","ship","woman","female"],"char":"","fitzpatrick_scale":true,"category":"activity"},"rowing_man":{"keywords":["sports","hobby","water","ship"],"char":"","fitzpatrick_scale":true,"category":"activity"},"climbing_woman":{"keywords":["sports","hobby","woman","female","rock"],"char":"","fitzpatrick_scale":true,"category":"activity"},"climbing_man":{"keywords":["sports","hobby","man","male","rock"],"char":"","fitzpatrick_scale":true,"category":"activity"},"swimming_woman":{"keywords":["sports","exercise","human","athlete","water","summer","woman","female"],"char":"","fitzpatrick_scale":true,"category":"activity"},"swimming_man":{"keywords":["sports","exercise","human","athlete","water","summer"],"char":"","fitzpatrick_scale":true,"category":"activity"},"woman_playing_water_polo":{"keywords":["sports","pool"],"char":"","fitzpatrick_scale":true,"category":"activity"},"man_playing_water_polo":{"keywords":["sports","pool"],"char":"","fitzpatrick_scale":true,"category":"activity"},"woman_in_lotus_position":{"keywords":["woman","female","meditation","yoga","serenity","zen","mindfulness"],"char":"","fitzpatrick_scale":true,"category":"activity"},"man_in_lotus_position":{"keywords":["man","male","meditation","yoga","serenity","zen","mindfulness"],"char":"","fitzpatrick_scale":true,"category":"activity"},"surfing_woman":{"keywords":["sports","ocean","sea","summer","beach","woman","female"],"char":"","fitzpatrick_scale":true,"category":"activity"},"surfing_man":{"keywords":["sports","ocean","sea","summer","beach"],"char":"","fitzpatrick_scale":true,"category":"activity"},"bath":{"keywords":["clean","shower","bathroom"],"char":"","fitzpatrick_scale":true,"category":"activity"},"basketball_woman":{"keywords":["sports","human","woman","female"],"char":"","fitzpatrick_scale":true,"category":"activity"},"basketball_man":{"keywords":["sports","human"],"char":"","fitzpatrick_scale":true,"category":"activity"},"weight_lifting_woman":{"keywords":["sports","training","exercise","woman","female"],"char":"","fitzpatrick_scale":true,"category":"activity"},"weight_lifting_man":{"keywords":["sports","training","exercise"],"char":"","fitzpatrick_scale":true,"category":"activity"},"biking_woman":{"keywords":["sports","bike","exercise","hipster","woman","female"],"char":"","fitzpatrick_scale":true,"category":"activity"},"biking_man":{"keywords":["sports","bike","exercise","hipster"],"char":"","fitzpatrick_scale":true,"category":"activity"},"mountain_biking_woman":{"keywords":["transportation","sports","human","race","bike","woman","female"],"char":"","fitzpatrick_scale":true,"category":"activity"},"mountain_biking_man":{"keywords":["transportation","sports","human","race","bike"],"char":"","fitzpatrick_scale":true,"category":"activity"},"horse_racing":{"keywords":["animal","betting","competition","gambling","luck"],"char":"","fitzpatrick_scale":true,"category":"activity"},"business_suit_levitating":{"keywords":["suit","business","levitate","hover","jump"],"char":"","fitzpatrick_scale":true,"category":"activity"},"trophy":{"keywords":["win","award","contest","place","ftw","ceremony"],"char":"","fitzpatrick_scale":false,"category":"activity"},"running_shirt_with_sash":{"keywords":["play","pageant"],"char":"","fitzpatrick_scale":false,"category":"activity"},"medal_sports":{"keywords":["award","winning"],"char":"","fitzpatrick_scale":false,"category":"activity"},"medal_military":{"keywords":["award","winning","army"],"char":"","fitzpatrick_scale":false,"category":"activity"},"1st_place_medal":{"keywords":["award","winning","first"],"char":"","fitzpatrick_scale":false,"category":"activity"},"2nd_place_medal":{"keywords":["award","second"],"char":"","fitzpatrick_scale":false,"category":"activity"},"3rd_place_medal":{"keywords":["award","third"],"char":"","fitzpatrick_scale":false,"category":"activity"},"reminder_ribbon":{"keywords":["sports","cause","support","awareness"],"char":"","fitzpatrick_scale":false,"category":"activity"},"rosette":{"keywords":["flower","decoration","military"],"char":"","fitzpatrick_scale":false,"category":"activity"},"ticket":{"keywords":["event","concert","pass"],"char":"","fitzpatrick_scale":false,"category":"activity"},"tickets":{"keywords":["sports","concert","entrance"],"char":"","fitzpatrick_scale":false,"category":"activity"},"performing_arts":{"keywords":["acting","theater","drama"],"char":"","fitzpatrick_scale":false,"category":"activity"},"art":{"keywords":["design","paint","draw","colors"],"char":"","fitzpatrick_scale":false,"category":"activity"},"circus_tent":{"keywords":["festival","carnival","party"],"char":"","fitzpatrick_scale":false,"category":"activity"},"woman_juggling":{"keywords":["juggle","balance","skill","multitask"],"char":"","fitzpatrick_scale":true,"category":"activity"},"man_juggling":{"keywords":["juggle","balance","skill","multitask"],"char":"","fitzpatrick_scale":true,"category":"activity"},"microphone":{"keywords":["sound","music","PA","sing","talkshow"],"char":"","fitzpatrick_scale":false,"category":"activity"},"headphones":{"keywords":["music","score","gadgets"],"char":"","fitzpatrick_scale":false,"category":"activity"},"musical_score":{"keywords":["treble","clef","compose"],"char":"","fitzpatrick_scale":false,"category":"activity"},"musical_keyboard":{"keywords":["piano","instrument","compose"],"char":"","fitzpatrick_scale":false,"category":"activity"},"drum":{"keywords":["music","instrument","drumsticks","snare"],"char":"","fitzpatrick_scale":false,"category":"activity"},"saxophone":{"keywords":["music","instrument","jazz","blues"],"char":"","fitzpatrick_scale":false,"category":"activity"},"trumpet":{"keywords":["music","brass"],"char":"","fitzpatrick_scale":false,"category":"activity"},"guitar":{"keywords":["music","instrument"],"char":"","fitzpatrick_scale":false,"category":"activity"},"violin":{"keywords":["music","instrument","orchestra","symphony"],"char":"","fitzpatrick_scale":false,"category":"activity"},"clapper":{"keywords":["movie","film","record"],"char":"","fitzpatrick_scale":false,"category":"activity"},"video_game":{"keywords":["play","console","PS4","controller"],"char":"","fitzpatrick_scale":false,"category":"activity"},"space_invader":{"keywords":["game","arcade","play"],"char":"","fitzpatrick_scale":false,"category":"activity"},"dart":{"keywords":["game","play","bar","target","bullseye"],"char":"","fitzpatrick_scale":false,"category":"activity"},"game_die":{"keywords":["dice","random","tabletop","play","luck"],"char":"","fitzpatrick_scale":false,"category":"activity"},"chess_pawn":{"keywords":["expendable"],"char":"","fitzpatrick_scale":false,"category":"activity"},"slot_machine":{"keywords":["bet","gamble","vegas","fruit machine","luck","casino"],"char":"","fitzpatrick_scale":false,"category":"activity"},"jigsaw":{"keywords":["interlocking","puzzle","piece"],"char":"","fitzpatrick_scale":false,"category":"activity"},"bowling":{"keywords":["sports","fun","play"],"char":"","fitzpatrick_scale":false,"category":"activity"},"red_car":{"keywords":["red","transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"taxi":{"keywords":["uber","vehicle","cars","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"blue_car":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"bus":{"keywords":["car","vehicle","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"trolleybus":{"keywords":["bart","transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"racing_car":{"keywords":["sports","race","fast","formula","f1"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"police_car":{"keywords":["vehicle","cars","transportation","law","legal","enforcement"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"ambulance":{"keywords":["health","911","hospital"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"fire_engine":{"keywords":["transportation","cars","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"minibus":{"keywords":["vehicle","car","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"truck":{"keywords":["cars","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"articulated_lorry":{"keywords":["vehicle","cars","transportation","express"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"tractor":{"keywords":["vehicle","car","farming","agriculture"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"kick_scooter":{"keywords":["vehicle","kick","razor"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"motorcycle":{"keywords":["race","sports","fast"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"bike":{"keywords":["sports","bicycle","exercise","hipster"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"motor_scooter":{"keywords":["vehicle","vespa","sasha"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"rotating_light":{"keywords":["police","ambulance","911","emergency","alert","error","pinged","law","legal"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"oncoming_police_car":{"keywords":["vehicle","law","legal","enforcement","911"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"oncoming_bus":{"keywords":["vehicle","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"oncoming_automobile":{"keywords":["car","vehicle","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"oncoming_taxi":{"keywords":["vehicle","cars","uber"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"aerial_tramway":{"keywords":["transportation","vehicle","ski"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"mountain_cableway":{"keywords":["transportation","vehicle","ski"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"suspension_railway":{"keywords":["vehicle","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"railway_car":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"train":{"keywords":["transportation","vehicle","carriage","public","travel"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"monorail":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"bullettrain_side":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"bullettrain_front":{"keywords":["transportation","vehicle","speed","fast","public","travel"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"light_rail":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"mountain_railway":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"steam_locomotive":{"keywords":["transportation","vehicle","train"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"train2":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"metro":{"keywords":["transportation","blue-square","mrt","underground","tube"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"tram":{"keywords":["transportation","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"station":{"keywords":["transportation","vehicle","public"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"flying_saucer":{"keywords":["transportation","vehicle","ufo"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"helicopter":{"keywords":["transportation","vehicle","fly"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"small_airplane":{"keywords":["flight","transportation","fly","vehicle"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"airplane":{"keywords":["vehicle","transportation","flight","fly"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"flight_departure":{"keywords":["airport","flight","landing"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"flight_arrival":{"keywords":["airport","flight","boarding"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"sailboat":{"keywords":["ship","summer","transportation","water","sailing"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"motor_boat":{"keywords":["ship"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"speedboat":{"keywords":["ship","transportation","vehicle","summer"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"ferry":{"keywords":["boat","ship","yacht"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"passenger_ship":{"keywords":["yacht","cruise","ferry"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"rocket":{"keywords":["launch","ship","staffmode","NASA","outer space","outer_space","fly"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"artificial_satellite":{"keywords":["communication","gps","orbit","spaceflight","NASA","ISS"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"seat":{"keywords":["sit","airplane","transport","bus","flight","fly"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"canoe":{"keywords":["boat","paddle","water","ship"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"anchor":{"keywords":["ship","ferry","sea","boat"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"construction":{"keywords":["wip","progress","caution","warning"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"fuelpump":{"keywords":["gas station","petroleum"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"busstop":{"keywords":["transportation","wait"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"vertical_traffic_light":{"keywords":["transportation","driving"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"traffic_light":{"keywords":["transportation","signal"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"checkered_flag":{"keywords":["contest","finishline","race","gokart"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"ship":{"keywords":["transportation","titanic","deploy"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"ferris_wheel":{"keywords":["photo","carnival","londoneye"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"roller_coaster":{"keywords":["carnival","playground","photo","fun"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"carousel_horse":{"keywords":["photo","carnival"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"building_construction":{"keywords":["wip","working","progress"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"foggy":{"keywords":["photo","mountain"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"tokyo_tower":{"keywords":["photo","japanese"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"factory":{"keywords":["building","industry","pollution","smoke"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"fountain":{"keywords":["photo","summer","water","fresh"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"rice_scene":{"keywords":["photo","japan","asia","tsukimi"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"mountain":{"keywords":["photo","nature","environment"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"mountain_snow":{"keywords":["photo","nature","environment","winter","cold"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"mount_fuji":{"keywords":["photo","mountain","nature","japanese"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"volcano":{"keywords":["photo","nature","disaster"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"japan":{"keywords":["nation","country","japanese","asia"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"camping":{"keywords":["photo","outdoors","tent"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"tent":{"keywords":["photo","camping","outdoors"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"national_park":{"keywords":["photo","environment","nature"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"motorway":{"keywords":["road","cupertino","interstate","highway"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"railway_track":{"keywords":["train","transportation"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"sunrise":{"keywords":["morning","view","vacation","photo"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"sunrise_over_mountains":{"keywords":["view","vacation","photo"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"desert":{"keywords":["photo","warm","saharah"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"beach_umbrella":{"keywords":["weather","summer","sunny","sand","mojito"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"desert_island":{"keywords":["photo","tropical","mojito"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"city_sunrise":{"keywords":["photo","good morning","dawn"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"city_sunset":{"keywords":["photo","evening","sky","buildings"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"cityscape":{"keywords":["photo","night life","urban"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"night_with_stars":{"keywords":["evening","city","downtown"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"bridge_at_night":{"keywords":["photo","sanfrancisco"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"milky_way":{"keywords":["photo","space","stars"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"stars":{"keywords":["night","photo"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"sparkler":{"keywords":["stars","night","shine"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"fireworks":{"keywords":["photo","festival","carnival","congratulations"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"rainbow":{"keywords":["nature","happy","unicorn_face","photo","sky","spring"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"houses":{"keywords":["buildings","photo"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"european_castle":{"keywords":["building","royalty","history"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"japanese_castle":{"keywords":["photo","building"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"stadium":{"keywords":["photo","place","sports","concert","venue"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"statue_of_liberty":{"keywords":["american","newyork"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"house":{"keywords":["building","home"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"house_with_garden":{"keywords":["home","plant","nature"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"derelict_house":{"keywords":["abandon","evict","broken","building"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"office":{"keywords":["building","bureau","work"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"department_store":{"keywords":["building","shopping","mall"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"post_office":{"keywords":["building","envelope","communication"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"european_post_office":{"keywords":["building","email"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"hospital":{"keywords":["building","health","surgery","doctor"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"bank":{"keywords":["building","money","sales","cash","business","enterprise"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"hotel":{"keywords":["building","accomodation","checkin"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"convenience_store":{"keywords":["building","shopping","groceries"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"school":{"keywords":["building","student","education","learn","teach"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"love_hotel":{"keywords":["like","affection","dating"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"wedding":{"keywords":["love","like","affection","couple","marriage","bride","groom"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"classical_building":{"keywords":["art","culture","history"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"church":{"keywords":["building","religion","christ"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"mosque":{"keywords":["islam","worship","minaret"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"synagogue":{"keywords":["judaism","worship","temple","jewish"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"kaaba":{"keywords":["mecca","mosque","islam"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"shinto_shrine":{"keywords":["temple","japan","kyoto"],"char":"","fitzpatrick_scale":false,"category":"travel_and_places"},"watch":{"keywords":["time","accessories"],"char":"","fitzpatrick_scale":false,"category":"objects"},"iphone":{"keywords":["technology","apple","gadgets","dial"],"char":"","fitzpatrick_scale":false,"category":"objects"},"calling":{"keywords":["iphone","incoming"],"char":"","fitzpatrick_scale":false,"category":"objects"},"computer":{"keywords":["technology","laptop","screen","display","monitor"],"char":"","fitzpatrick_scale":false,"category":"objects"},"keyboard":{"keywords":["technology","computer","type","input","text"],"char":"","fitzpatrick_scale":false,"category":"objects"},"desktop_computer":{"keywords":["technology","computing","screen"],"char":"","fitzpatrick_scale":false,"category":"objects"},"printer":{"keywords":["paper","ink"],"char":"","fitzpatrick_scale":false,"category":"objects"},"computer_mouse":{"keywords":["click"],"char":"","fitzpatrick_scale":false,"category":"objects"},"trackball":{"keywords":["technology","trackpad"],"char":"","fitzpatrick_scale":false,"category":"objects"},"joystick":{"keywords":["game","play"],"char":"","fitzpatrick_scale":false,"category":"objects"},"clamp":{"keywords":["tool"],"char":"","fitzpatrick_scale":false,"category":"objects"},"minidisc":{"keywords":["technology","record","data","disk","90s"],"char":"","fitzpatrick_scale":false,"category":"objects"},"floppy_disk":{"keywords":["oldschool","technology","save","90s","80s"],"char":"","fitzpatrick_scale":false,"category":"objects"},"cd":{"keywords":["technology","dvd","disk","disc","90s"],"char":"","fitzpatrick_scale":false,"category":"objects"},"dvd":{"keywords":["cd","disk","disc"],"char":"","fitzpatrick_scale":false,"category":"objects"},"vhs":{"keywords":["record","video","oldschool","90s","80s"],"char":"","fitzpatrick_scale":false,"category":"objects"},"camera":{"keywords":["gadgets","photography"],"char":"","fitzpatrick_scale":false,"category":"objects"},"camera_flash":{"keywords":["photography","gadgets"],"char":"","fitzpatrick_scale":false,"category":"objects"},"video_camera":{"keywords":["film","record"],"char":"","fitzpatrick_scale":false,"category":"objects"},"movie_camera":{"keywords":["film","record"],"char":"","fitzpatrick_scale":false,"category":"objects"},"film_projector":{"keywords":["video","tape","record","movie"],"char":"","fitzpatrick_scale":false,"category":"objects"},"film_strip":{"keywords":["movie"],"char":"","fitzpatrick_scale":false,"category":"objects"},"telephone_receiver":{"keywords":["technology","communication","dial"],"char":"","fitzpatrick_scale":false,"category":"objects"},"phone":{"keywords":["technology","communication","dial","telephone"],"char":"","fitzpatrick_scale":false,"category":"objects"},"pager":{"keywords":["bbcall","oldschool","90s"],"char":"","fitzpatrick_scale":false,"category":"objects"},"fax":{"keywords":["communication","technology"],"char":"","fitzpatrick_scale":false,"category":"objects"},"tv":{"keywords":["technology","program","oldschool","show","television"],"char":"","fitzpatrick_scale":false,"category":"objects"},"radio":{"keywords":["communication","music","podcast","program"],"char":"","fitzpatrick_scale":false,"category":"objects"},"studio_microphone":{"keywords":["sing","recording","artist","talkshow"],"char":"","fitzpatrick_scale":false,"category":"objects"},"level_slider":{"keywords":["scale"],"char":"","fitzpatrick_scale":false,"category":"objects"},"control_knobs":{"keywords":["dial"],"char":"","fitzpatrick_scale":false,"category":"objects"},"compass":{"keywords":["magnetic","navigation","orienteering"],"char":"","fitzpatrick_scale":false,"category":"objects"},"stopwatch":{"keywords":["time","deadline"],"char":"","fitzpatrick_scale":false,"category":"objects"},"timer_clock":{"keywords":["alarm"],"char":"","fitzpatrick_scale":false,"category":"objects"},"alarm_clock":{"keywords":["time","wake"],"char":"","fitzpatrick_scale":false,"category":"objects"},"mantelpiece_clock":{"keywords":["time"],"char":"","fitzpatrick_scale":false,"category":"objects"},"hourglass_flowing_sand":{"keywords":["oldschool","time","countdown"],"char":"","fitzpatrick_scale":false,"category":"objects"},"hourglass":{"keywords":["time","clock","oldschool","limit","exam","quiz","test"],"char":"","fitzpatrick_scale":false,"category":"objects"},"satellite":{"keywords":["communication","future","radio","space"],"char":"","fitzpatrick_scale":false,"category":"objects"},"battery":{"keywords":["power","energy","sustain"],"char":"","fitzpatrick_scale":false,"category":"objects"},"electric_plug":{"keywords":["charger","power"],"char":"","fitzpatrick_scale":false,"category":"objects"},"bulb":{"keywords":["light","electricity","idea"],"char":"","fitzpatrick_scale":false,"category":"objects"},"flashlight":{"keywords":["dark","camping","sight","night"],"char":"","fitzpatrick_scale":false,"category":"objects"},"candle":{"keywords":["fire","wax"],"char":"","fitzpatrick_scale":false,"category":"objects"},"fire_extinguisher":{"keywords":["quench"],"char":"","fitzpatrick_scale":false,"category":"objects"},"wastebasket":{"keywords":["bin","trash","rubbish","garbage","toss"],"char":"","fitzpatrick_scale":false,"category":"objects"},"oil_drum":{"keywords":["barrell"],"char":"","fitzpatrick_scale":false,"category":"objects"},"money_with_wings":{"keywords":["dollar","bills","payment","sale"],"char":"","fitzpatrick_scale":false,"category":"objects"},"dollar":{"keywords":["money","sales","bill","currency"],"char":"","fitzpatrick_scale":false,"category":"objects"},"yen":{"keywords":["money","sales","japanese","dollar","currency"],"char":"","fitzpatrick_scale":false,"category":"objects"},"euro":{"keywords":["money","sales","dollar","currency"],"char":"","fitzpatrick_scale":false,"category":"objects"},"pound":{"keywords":["british","sterling","money","sales","bills","uk","england","currency"],"char":"","fitzpatrick_scale":false,"category":"objects"},"moneybag":{"keywords":["dollar","payment","coins","sale"],"char":"","fitzpatrick_scale":false,"category":"objects"},"credit_card":{"keywords":["money","sales","dollar","bill","payment","shopping"],"char":"","fitzpatrick_scale":false,"category":"objects"},"gem":{"keywords":["blue","ruby","diamond","jewelry"],"char":"","fitzpatrick_scale":false,"category":"objects"},"balance_scale":{"keywords":["law","fairness","weight"],"char":"","fitzpatrick_scale":false,"category":"objects"},"toolbox":{"keywords":["tools","diy","fix","maintainer","mechanic"],"char":"","fitzpatrick_scale":false,"category":"objects"},"wrench":{"keywords":["tools","diy","ikea","fix","maintainer"],"char":"","fitzpatrick_scale":false,"category":"objects"},"hammer":{"keywords":["tools","build","create"],"char":"","fitzpatrick_scale":false,"category":"objects"},"hammer_and_pick":{"keywords":["tools","build","create"],"char":"","fitzpatrick_scale":false,"category":"objects"},"hammer_and_wrench":{"keywords":["tools","build","create"],"char":"","fitzpatrick_scale":false,"category":"objects"},"pick":{"keywords":["tools","dig"],"char":"","fitzpatrick_scale":false,"category":"objects"},"nut_and_bolt":{"keywords":["handy","tools","fix"],"char":"","fitzpatrick_scale":false,"category":"objects"},"gear":{"keywords":["cog"],"char":"","fitzpatrick_scale":false,"category":"objects"},"brick":{"keywords":["bricks"],"char":"","fitzpatrick_scale":false,"category":"objects"},"chains":{"keywords":["lock","arrest"],"char":"","fitzpatrick_scale":false,"category":"objects"},"magnet":{"keywords":["attraction","magnetic"],"char":"","fitzpatrick_scale":false,"category":"objects"},"gun":{"keywords":["violence","weapon","pistol","revolver"],"char":"","fitzpatrick_scale":false,"category":"objects"},"bomb":{"keywords":["boom","explode","explosion","terrorism"],"char":"","fitzpatrick_scale":false,"category":"objects"},"firecracker":{"keywords":["dynamite","boom","explode","explosion","explosive"],"char":"","fitzpatrick_scale":false,"category":"objects"},"hocho":{"keywords":["knife","blade","cutlery","kitchen","weapon"],"char":"","fitzpatrick_scale":false,"category":"objects"},"dagger":{"keywords":["weapon"],"char":"","fitzpatrick_scale":false,"category":"objects"},"crossed_swords":{"keywords":["weapon"],"char":"","fitzpatrick_scale":false,"category":"objects"},"shield":{"keywords":["protection","security"],"char":"","fitzpatrick_scale":false,"category":"objects"},"smoking":{"keywords":["kills","tobacco","cigarette","joint","smoke"],"char":"","fitzpatrick_scale":false,"category":"objects"},"skull_and_crossbones":{"keywords":["poison","danger","deadly","scary","death","pirate","evil"],"char":"","fitzpatrick_scale":false,"category":"objects"},"coffin":{"keywords":["vampire","dead","die","death","rip","graveyard","cemetery","casket","funeral","box"],"char":"","fitzpatrick_scale":false,"category":"objects"},"funeral_urn":{"keywords":["dead","die","death","rip","ashes"],"char":"","fitzpatrick_scale":false,"category":"objects"},"amphora":{"keywords":["vase","jar"],"char":"","fitzpatrick_scale":false,"category":"objects"},"crystal_ball":{"keywords":["disco","party","magic","circus","fortune_teller"],"char":"","fitzpatrick_scale":false,"category":"objects"},"prayer_beads":{"keywords":["dhikr","religious"],"char":"","fitzpatrick_scale":false,"category":"objects"},"nazar_amulet":{"keywords":["bead","charm"],"char":"","fitzpatrick_scale":false,"category":"objects"},"barber":{"keywords":["hair","salon","style"],"char":"","fitzpatrick_scale":false,"category":"objects"},"alembic":{"keywords":["distilling","science","experiment","chemistry"],"char":"","fitzpatrick_scale":false,"category":"objects"},"telescope":{"keywords":["stars","space","zoom","science","astronomy"],"char":"","fitzpatrick_scale":false,"category":"objects"},"microscope":{"keywords":["laboratory","experiment","zoomin","science","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"hole":{"keywords":["embarrassing"],"char":"","fitzpatrick_scale":false,"category":"objects"},"pill":{"keywords":["health","medicine","doctor","pharmacy","drug"],"char":"","fitzpatrick_scale":false,"category":"objects"},"syringe":{"keywords":["health","hospital","drugs","blood","medicine","needle","doctor","nurse"],"char":"","fitzpatrick_scale":false,"category":"objects"},"dna":{"keywords":["biologist","genetics","life"],"char":"","fitzpatrick_scale":false,"category":"objects"},"microbe":{"keywords":["amoeba","bacteria","germs"],"char":"","fitzpatrick_scale":false,"category":"objects"},"petri_dish":{"keywords":["bacteria","biology","culture","lab"],"char":"","fitzpatrick_scale":false,"category":"objects"},"test_tube":{"keywords":["chemistry","experiment","lab","science"],"char":"","fitzpatrick_scale":false,"category":"objects"},"thermometer":{"keywords":["weather","temperature","hot","cold"],"char":"","fitzpatrick_scale":false,"category":"objects"},"broom":{"keywords":["cleaning","sweeping","witch"],"char":"","fitzpatrick_scale":false,"category":"objects"},"basket":{"keywords":["laundry"],"char":"","fitzpatrick_scale":false,"category":"objects"},"toilet_paper":{"keywords":["roll"],"char":"","fitzpatrick_scale":false,"category":"objects"},"label":{"keywords":["sale","tag"],"char":"","fitzpatrick_scale":false,"category":"objects"},"bookmark":{"keywords":["favorite","label","save"],"char":"","fitzpatrick_scale":false,"category":"objects"},"toilet":{"keywords":["restroom","wc","washroom","bathroom","potty"],"char":"","fitzpatrick_scale":false,"category":"objects"},"shower":{"keywords":["clean","water","bathroom"],"char":"","fitzpatrick_scale":false,"category":"objects"},"bathtub":{"keywords":["clean","shower","bathroom"],"char":"","fitzpatrick_scale":false,"category":"objects"},"soap":{"keywords":["bar","bathing","cleaning","lather"],"char":"","fitzpatrick_scale":false,"category":"objects"},"sponge":{"keywords":["absorbing","cleaning","porous"],"char":"","fitzpatrick_scale":false,"category":"objects"},"lotion_bottle":{"keywords":["moisturizer","sunscreen"],"char":"","fitzpatrick_scale":false,"category":"objects"},"key":{"keywords":["lock","door","password"],"char":"","fitzpatrick_scale":false,"category":"objects"},"old_key":{"keywords":["lock","door","password"],"char":"","fitzpatrick_scale":false,"category":"objects"},"couch_and_lamp":{"keywords":["read","chill"],"char":"","fitzpatrick_scale":false,"category":"objects"},"sleeping_bed":{"keywords":["bed","rest"],"char":"","fitzpatrick_scale":true,"category":"objects"},"bed":{"keywords":["sleep","rest"],"char":"","fitzpatrick_scale":false,"category":"objects"},"door":{"keywords":["house","entry","exit"],"char":"","fitzpatrick_scale":false,"category":"objects"},"bellhop_bell":{"keywords":["service"],"char":"","fitzpatrick_scale":false,"category":"objects"},"teddy_bear":{"keywords":["plush","stuffed"],"char":"","fitzpatrick_scale":false,"category":"objects"},"framed_picture":{"keywords":["photography"],"char":"","fitzpatrick_scale":false,"category":"objects"},"world_map":{"keywords":["location","direction"],"char":"","fitzpatrick_scale":false,"category":"objects"},"parasol_on_ground":{"keywords":["weather","summer"],"char":"","fitzpatrick_scale":false,"category":"objects"},"moyai":{"keywords":["rock","easter island","moai"],"char":"","fitzpatrick_scale":false,"category":"objects"},"shopping":{"keywords":["mall","buy","purchase"],"char":"","fitzpatrick_scale":false,"category":"objects"},"shopping_cart":{"keywords":["trolley"],"char":"","fitzpatrick_scale":false,"category":"objects"},"balloon":{"keywords":["party","celebration","birthday","circus"],"char":"","fitzpatrick_scale":false,"category":"objects"},"flags":{"keywords":["fish","japanese","koinobori","carp","banner"],"char":"","fitzpatrick_scale":false,"category":"objects"},"ribbon":{"keywords":["decoration","pink","girl","bowtie"],"char":"","fitzpatrick_scale":false,"category":"objects"},"gift":{"keywords":["present","birthday","christmas","xmas"],"char":"","fitzpatrick_scale":false,"category":"objects"},"confetti_ball":{"keywords":["festival","party","birthday","circus"],"char":"","fitzpatrick_scale":false,"category":"objects"},"tada":{"keywords":["party","congratulations","birthday","magic","circus","celebration"],"char":"","fitzpatrick_scale":false,"category":"objects"},"dolls":{"keywords":["japanese","toy","kimono"],"char":"","fitzpatrick_scale":false,"category":"objects"},"wind_chime":{"keywords":["nature","ding","spring","bell"],"char":"","fitzpatrick_scale":false,"category":"objects"},"crossed_flags":{"keywords":["japanese","nation","country","border"],"char":"","fitzpatrick_scale":false,"category":"objects"},"izakaya_lantern":{"keywords":["light","paper","halloween","spooky"],"char":"","fitzpatrick_scale":false,"category":"objects"},"red_envelope":{"keywords":["gift"],"char":"","fitzpatrick_scale":false,"category":"objects"},"email":{"keywords":["letter","postal","inbox","communication"],"char":"","fitzpatrick_scale":false,"category":"objects"},"envelope_with_arrow":{"keywords":["email","communication"],"char":"","fitzpatrick_scale":false,"category":"objects"},"incoming_envelope":{"keywords":["email","inbox"],"char":"","fitzpatrick_scale":false,"category":"objects"},"e-mail":{"keywords":["communication","inbox"],"char":"","fitzpatrick_scale":false,"category":"objects"},"love_letter":{"keywords":["email","like","affection","envelope","valentines"],"char":"","fitzpatrick_scale":false,"category":"objects"},"postbox":{"keywords":["email","letter","envelope"],"char":"","fitzpatrick_scale":false,"category":"objects"},"mailbox_closed":{"keywords":["email","communication","inbox"],"char":"","fitzpatrick_scale":false,"category":"objects"},"mailbox":{"keywords":["email","inbox","communication"],"char":"","fitzpatrick_scale":false,"category":"objects"},"mailbox_with_mail":{"keywords":["email","inbox","communication"],"char":"","fitzpatrick_scale":false,"category":"objects"},"mailbox_with_no_mail":{"keywords":["email","inbox"],"char":"","fitzpatrick_scale":false,"category":"objects"},"package":{"keywords":["mail","gift","cardboard","box","moving"],"char":"","fitzpatrick_scale":false,"category":"objects"},"postal_horn":{"keywords":["instrument","music"],"char":"","fitzpatrick_scale":false,"category":"objects"},"inbox_tray":{"keywords":["email","documents"],"char":"","fitzpatrick_scale":false,"category":"objects"},"outbox_tray":{"keywords":["inbox","email"],"char":"","fitzpatrick_scale":false,"category":"objects"},"scroll":{"keywords":["documents","ancient","history","paper"],"char":"","fitzpatrick_scale":false,"category":"objects"},"page_with_curl":{"keywords":["documents","office","paper"],"char":"","fitzpatrick_scale":false,"category":"objects"},"bookmark_tabs":{"keywords":["favorite","save","order","tidy"],"char":"","fitzpatrick_scale":false,"category":"objects"},"receipt":{"keywords":["accounting","expenses"],"char":"","fitzpatrick_scale":false,"category":"objects"},"bar_chart":{"keywords":["graph","presentation","stats"],"char":"","fitzpatrick_scale":false,"category":"objects"},"chart_with_upwards_trend":{"keywords":["graph","presentation","stats","recovery","business","economics","money","sales","good","success"],"char":"","fitzpatrick_scale":false,"category":"objects"},"chart_with_downwards_trend":{"keywords":["graph","presentation","stats","recession","business","economics","money","sales","bad","failure"],"char":"","fitzpatrick_scale":false,"category":"objects"},"page_facing_up":{"keywords":["documents","office","paper","information"],"char":"","fitzpatrick_scale":false,"category":"objects"},"date":{"keywords":["calendar","schedule"],"char":"","fitzpatrick_scale":false,"category":"objects"},"calendar":{"keywords":["schedule","date","planning"],"char":"","fitzpatrick_scale":false,"category":"objects"},"spiral_calendar":{"keywords":["date","schedule","planning"],"char":"","fitzpatrick_scale":false,"category":"objects"},"card_index":{"keywords":["business","stationery"],"char":"","fitzpatrick_scale":false,"category":"objects"},"card_file_box":{"keywords":["business","stationery"],"char":"","fitzpatrick_scale":false,"category":"objects"},"ballot_box":{"keywords":["election","vote"],"char":"","fitzpatrick_scale":false,"category":"objects"},"file_cabinet":{"keywords":["filing","organizing"],"char":"","fitzpatrick_scale":false,"category":"objects"},"clipboard":{"keywords":["stationery","documents"],"char":"","fitzpatrick_scale":false,"category":"objects"},"spiral_notepad":{"keywords":["memo","stationery"],"char":"","fitzpatrick_scale":false,"category":"objects"},"file_folder":{"keywords":["documents","business","office"],"char":"","fitzpatrick_scale":false,"category":"objects"},"open_file_folder":{"keywords":["documents","load"],"char":"","fitzpatrick_scale":false,"category":"objects"},"card_index_dividers":{"keywords":["organizing","business","stationery"],"char":"","fitzpatrick_scale":false,"category":"objects"},"newspaper_roll":{"keywords":["press","headline"],"char":"","fitzpatrick_scale":false,"category":"objects"},"newspaper":{"keywords":["press","headline"],"char":"","fitzpatrick_scale":false,"category":"objects"},"notebook":{"keywords":["stationery","record","notes","paper","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"closed_book":{"keywords":["read","library","knowledge","textbook","learn"],"char":"","fitzpatrick_scale":false,"category":"objects"},"green_book":{"keywords":["read","library","knowledge","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"blue_book":{"keywords":["read","library","knowledge","learn","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"orange_book":{"keywords":["read","library","knowledge","textbook","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"notebook_with_decorative_cover":{"keywords":["classroom","notes","record","paper","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"ledger":{"keywords":["notes","paper"],"char":"","fitzpatrick_scale":false,"category":"objects"},"books":{"keywords":["literature","library","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"open_book":{"keywords":["book","read","library","knowledge","literature","learn","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"safety_pin":{"keywords":["diaper"],"char":"","fitzpatrick_scale":false,"category":"objects"},"link":{"keywords":["rings","url"],"char":"","fitzpatrick_scale":false,"category":"objects"},"paperclip":{"keywords":["documents","stationery"],"char":"","fitzpatrick_scale":false,"category":"objects"},"paperclips":{"keywords":["documents","stationery"],"char":"","fitzpatrick_scale":false,"category":"objects"},"scissors":{"keywords":["stationery","cut"],"char":"","fitzpatrick_scale":false,"category":"objects"},"triangular_ruler":{"keywords":["stationery","math","architect","sketch"],"char":"","fitzpatrick_scale":false,"category":"objects"},"straight_ruler":{"keywords":["stationery","calculate","length","math","school","drawing","architect","sketch"],"char":"","fitzpatrick_scale":false,"category":"objects"},"abacus":{"keywords":["calculation"],"char":"","fitzpatrick_scale":false,"category":"objects"},"pushpin":{"keywords":["stationery","mark","here"],"char":"","fitzpatrick_scale":false,"category":"objects"},"round_pushpin":{"keywords":["stationery","location","map","here"],"char":"","fitzpatrick_scale":false,"category":"objects"},"triangular_flag_on_post":{"keywords":["mark","milestone","place"],"char":"","fitzpatrick_scale":false,"category":"objects"},"white_flag":{"keywords":["losing","loser","lost","surrender","give up","fail"],"char":"","fitzpatrick_scale":false,"category":"objects"},"black_flag":{"keywords":["pirate"],"char":"","fitzpatrick_scale":false,"category":"objects"},"rainbow_flag":{"keywords":["flag","rainbow","pride","gay","lgbt","glbt","queer","homosexual","lesbian","bisexual","transgender"],"char":"","fitzpatrick_scale":false,"category":"objects"},"closed_lock_with_key":{"keywords":["security","privacy"],"char":"","fitzpatrick_scale":false,"category":"objects"},"lock":{"keywords":["security","password","padlock"],"char":"","fitzpatrick_scale":false,"category":"objects"},"unlock":{"keywords":["privacy","security"],"char":"","fitzpatrick_scale":false,"category":"objects"},"lock_with_ink_pen":{"keywords":["security","secret"],"char":"","fitzpatrick_scale":false,"category":"objects"},"pen":{"keywords":["stationery","writing","write"],"char":"","fitzpatrick_scale":false,"category":"objects"},"fountain_pen":{"keywords":["stationery","writing","write"],"char":"","fitzpatrick_scale":false,"category":"objects"},"black_nib":{"keywords":["pen","stationery","writing","write"],"char":"","fitzpatrick_scale":false,"category":"objects"},"memo":{"keywords":["write","documents","stationery","pencil","paper","writing","legal","exam","quiz","test","study","compose"],"char":"","fitzpatrick_scale":false,"category":"objects"},"pencil2":{"keywords":["stationery","write","paper","writing","school","study"],"char":"","fitzpatrick_scale":false,"category":"objects"},"crayon":{"keywords":["drawing","creativity"],"char":"","fitzpatrick_scale":false,"category":"objects"},"paintbrush":{"keywords":["drawing","creativity","art"],"char":"","fitzpatrick_scale":false,"category":"objects"},"mag":{"keywords":["search","zoom","find","detective"],"char":"","fitzpatrick_scale":false,"category":"objects"},"mag_right":{"keywords":["search","zoom","find","detective"],"char":"","fitzpatrick_scale":false,"category":"objects"},"heart":{"keywords":["love","like","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"orange_heart":{"keywords":["love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"yellow_heart":{"keywords":["love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"green_heart":{"keywords":["love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"blue_heart":{"keywords":["love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"purple_heart":{"keywords":["love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_heart":{"keywords":["evil"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"broken_heart":{"keywords":["sad","sorry","break","heart","heartbreak"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heavy_heart_exclamation":{"keywords":["decoration","love"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"two_hearts":{"keywords":["love","like","affection","valentines","heart"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"revolving_hearts":{"keywords":["love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heartbeat":{"keywords":["love","like","affection","valentines","pink","heart"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heartpulse":{"keywords":["like","love","affection","valentines","pink"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"sparkling_heart":{"keywords":["love","like","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"cupid":{"keywords":["love","like","heart","affection","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"gift_heart":{"keywords":["love","valentines"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heart_decoration":{"keywords":["purple-square","love","like"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"peace_symbol":{"keywords":["hippie"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"latin_cross":{"keywords":["christianity"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"star_and_crescent":{"keywords":["islam"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"om":{"keywords":["hinduism","buddhism","sikhism","jainism"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"wheel_of_dharma":{"keywords":["hinduism","buddhism","sikhism","jainism"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"star_of_david":{"keywords":["judaism"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"six_pointed_star":{"keywords":["purple-square","religion","jewish","hexagram"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"menorah":{"keywords":["hanukkah","candles","jewish"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"yin_yang":{"keywords":["balance"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"orthodox_cross":{"keywords":["suppedaneum","religion"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"place_of_worship":{"keywords":["religion","church","temple","prayer"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"ophiuchus":{"keywords":["sign","purple-square","constellation","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"aries":{"keywords":["sign","purple-square","zodiac","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"taurus":{"keywords":["purple-square","sign","zodiac","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"gemini":{"keywords":["sign","zodiac","purple-square","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"cancer":{"keywords":["sign","zodiac","purple-square","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"leo":{"keywords":["sign","purple-square","zodiac","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"virgo":{"keywords":["sign","zodiac","purple-square","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"libra":{"keywords":["sign","purple-square","zodiac","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"scorpius":{"keywords":["sign","zodiac","purple-square","astrology","scorpio"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"sagittarius":{"keywords":["sign","zodiac","purple-square","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"capricorn":{"keywords":["sign","zodiac","purple-square","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"aquarius":{"keywords":["sign","purple-square","zodiac","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"pisces":{"keywords":["purple-square","sign","zodiac","astrology"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"id":{"keywords":["purple-square","words"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"atom_symbol":{"keywords":["science","physics","chemistry"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u7a7a":{"keywords":["kanji","japanese","chinese","empty","sky","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u5272":{"keywords":["cut","divide","chinese","kanji","pink-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"radioactive":{"keywords":["nuclear","danger"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"biohazard":{"keywords":["danger"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"mobile_phone_off":{"keywords":["mute","orange-square","silence","quiet"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"vibration_mode":{"keywords":["orange-square","phone"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u6709":{"keywords":["orange-square","chinese","have","kanji"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u7121":{"keywords":["nothing","chinese","kanji","japanese","orange-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u7533":{"keywords":["chinese","japanese","kanji","orange-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u55b6":{"keywords":["japanese","opening hours","orange-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u6708":{"keywords":["chinese","month","moon","japanese","orange-square","kanji"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"eight_pointed_black_star":{"keywords":["orange-square","shape","polygon"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"vs":{"keywords":["words","orange-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"accept":{"keywords":["ok","good","chinese","kanji","agree","yes","orange-circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_flower":{"keywords":["japanese","spring"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"ideograph_advantage":{"keywords":["chinese","kanji","obtain","get","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"secret":{"keywords":["privacy","chinese","sshh","kanji","red-circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"congratulations":{"keywords":["chinese","kanji","japanese","red-circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u5408":{"keywords":["japanese","chinese","join","kanji","red-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u6e80":{"keywords":["full","chinese","japanese","red-square","kanji"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u7981":{"keywords":["kanji","japanese","chinese","forbidden","limit","restricted","red-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"a":{"keywords":["red-square","alphabet","letter"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"b":{"keywords":["red-square","alphabet","letter"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"ab":{"keywords":["red-square","alphabet"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"cl":{"keywords":["alphabet","words","red-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"o2":{"keywords":["alphabet","red-square","letter"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"sos":{"keywords":["help","red-square","words","emergency","911"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"no_entry":{"keywords":["limit","security","privacy","bad","denied","stop","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"name_badge":{"keywords":["fire","forbid"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"no_entry_sign":{"keywords":["forbid","stop","limit","denied","disallow","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"x":{"keywords":["no","delete","remove","cancel","red"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"o":{"keywords":["circle","round"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"stop_sign":{"keywords":["stop"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"anger":{"keywords":["angry","mad"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"hotsprings":{"keywords":["bath","warm","relax"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"no_pedestrians":{"keywords":["rules","crossing","walking","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"do_not_litter":{"keywords":["trash","bin","garbage","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"no_bicycles":{"keywords":["cyclist","prohibited","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"non-potable_water":{"keywords":["drink","faucet","tap","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"underage":{"keywords":["18","drink","pub","night","minor","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"no_mobile_phones":{"keywords":["iphone","mute","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"exclamation":{"keywords":["heavy_exclamation_mark","danger","surprise","punctuation","wow","warning"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"grey_exclamation":{"keywords":["surprise","punctuation","gray","wow","warning"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"question":{"keywords":["doubt","confused"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"grey_question":{"keywords":["doubts","gray","huh","confused"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"bangbang":{"keywords":["exclamation","surprise"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"interrobang":{"keywords":["wat","punctuation","surprise"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"low_brightness":{"keywords":["sun","afternoon","warm","summer"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"high_brightness":{"keywords":["sun","light"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"trident":{"keywords":["weapon","spear"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"fleur_de_lis":{"keywords":["decorative","scout"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"part_alternation_mark":{"keywords":["graph","presentation","stats","business","economics","bad"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"warning":{"keywords":["exclamation","wip","alert","error","problem","issue"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"children_crossing":{"keywords":["school","warning","danger","sign","driving","yellow-diamond"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"beginner":{"keywords":["badge","shield"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"recycle":{"keywords":["arrow","environment","garbage","trash"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"u6307":{"keywords":["chinese","point","green-square","kanji"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"chart":{"keywords":["green-square","graph","presentation","stats"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"sparkle":{"keywords":["stars","green-square","awesome","good","fireworks"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"eight_spoked_asterisk":{"keywords":["star","sparkle","green-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"negative_squared_cross_mark":{"keywords":["x","green-square","no","deny"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_check_mark":{"keywords":["green-square","ok","agree","vote","election","answer","tick"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"diamond_shape_with_a_dot_inside":{"keywords":["jewel","blue","gem","crystal","fancy"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"cyclone":{"keywords":["weather","swirl","blue","cloud","vortex","spiral","whirlpool","spin","tornado","hurricane","typhoon"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"loop":{"keywords":["tape","cassette"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"globe_with_meridians":{"keywords":["earth","international","world","internet","interweb","i18n"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"m":{"keywords":["alphabet","blue-circle","letter"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"atm":{"keywords":["money","sales","cash","blue-square","payment","bank"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"sa":{"keywords":["japanese","blue-square","katakana"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"passport_control":{"keywords":["custom","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"customs":{"keywords":["passport","border","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"baggage_claim":{"keywords":["blue-square","airport","transport"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"left_luggage":{"keywords":["blue-square","travel"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"wheelchair":{"keywords":["blue-square","disabled","a11y","accessibility"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"no_smoking":{"keywords":["cigarette","blue-square","smell","smoke"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"wc":{"keywords":["toilet","restroom","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"parking":{"keywords":["cars","blue-square","alphabet","letter"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"potable_water":{"keywords":["blue-square","liquid","restroom","cleaning","faucet"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"mens":{"keywords":["toilet","restroom","wc","blue-square","gender","male"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"womens":{"keywords":["purple-square","woman","female","toilet","loo","restroom","gender"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"baby_symbol":{"keywords":["orange-square","child"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"restroom":{"keywords":["blue-square","toilet","refresh","wc","gender"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"put_litter_in_its_place":{"keywords":["blue-square","sign","human","info"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"cinema":{"keywords":["blue-square","record","film","movie","curtain","stage","theater"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"signal_strength":{"keywords":["blue-square","reception","phone","internet","connection","wifi","bluetooth","bars"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"koko":{"keywords":["blue-square","here","katakana","japanese","destination"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"ng":{"keywords":["blue-square","words","shape","icon"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"ok":{"keywords":["good","agree","yes","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"up":{"keywords":["blue-square","above","high"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"cool":{"keywords":["words","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"new":{"keywords":["blue-square","words","start"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"free":{"keywords":["blue-square","words"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"zero":{"keywords":["0","numbers","blue-square","null"],"char":"0","fitzpatrick_scale":false,"category":"symbols"},"one":{"keywords":["blue-square","numbers","1"],"char":"1","fitzpatrick_scale":false,"category":"symbols"},"two":{"keywords":["numbers","2","prime","blue-square"],"char":"2","fitzpatrick_scale":false,"category":"symbols"},"three":{"keywords":["3","numbers","prime","blue-square"],"char":"3","fitzpatrick_scale":false,"category":"symbols"},"four":{"keywords":["4","numbers","blue-square"],"char":"4","fitzpatrick_scale":false,"category":"symbols"},"five":{"keywords":["5","numbers","blue-square","prime"],"char":"5","fitzpatrick_scale":false,"category":"symbols"},"six":{"keywords":["6","numbers","blue-square"],"char":"6","fitzpatrick_scale":false,"category":"symbols"},"seven":{"keywords":["7","numbers","blue-square","prime"],"char":"7","fitzpatrick_scale":false,"category":"symbols"},"eight":{"keywords":["8","blue-square","numbers"],"char":"8","fitzpatrick_scale":false,"category":"symbols"},"nine":{"keywords":["blue-square","numbers","9"],"char":"9","fitzpatrick_scale":false,"category":"symbols"},"keycap_ten":{"keywords":["numbers","10","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"asterisk":{"keywords":["star","keycap"],"char":"*","fitzpatrick_scale":false,"category":"symbols"},"eject_button":{"keywords":["blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_forward":{"keywords":["blue-square","right","direction","play"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"pause_button":{"keywords":["pause","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"next_track_button":{"keywords":["forward","next","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"stop_button":{"keywords":["blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"record_button":{"keywords":["blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"play_or_pause_button":{"keywords":["blue-square","play","pause"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"previous_track_button":{"keywords":["backward"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"fast_forward":{"keywords":["blue-square","play","speed","continue"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"rewind":{"keywords":["play","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"twisted_rightwards_arrows":{"keywords":["blue-square","shuffle","music","random"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"repeat":{"keywords":["loop","record"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"repeat_one":{"keywords":["blue-square","loop"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_backward":{"keywords":["blue-square","left","direction"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_up_small":{"keywords":["blue-square","triangle","direction","point","forward","top"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_down_small":{"keywords":["blue-square","direction","bottom"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_double_up":{"keywords":["blue-square","direction","top"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_double_down":{"keywords":["blue-square","direction","bottom"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_right":{"keywords":["blue-square","next"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_left":{"keywords":["blue-square","previous","back"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_up":{"keywords":["blue-square","continue","top","direction"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_down":{"keywords":["blue-square","direction","bottom"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_upper_right":{"keywords":["blue-square","point","direction","diagonal","northeast"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_lower_right":{"keywords":["blue-square","direction","diagonal","southeast"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_lower_left":{"keywords":["blue-square","direction","diagonal","southwest"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_upper_left":{"keywords":["blue-square","point","direction","diagonal","northwest"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_up_down":{"keywords":["blue-square","direction","way","vertical"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"left_right_arrow":{"keywords":["shape","direction","horizontal","sideways"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrows_counterclockwise":{"keywords":["blue-square","sync","cycle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_right_hook":{"keywords":["blue-square","return","rotate","direction"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"leftwards_arrow_with_hook":{"keywords":["back","return","blue-square","undo","enter"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_heading_up":{"keywords":["blue-square","direction","top"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrow_heading_down":{"keywords":["blue-square","direction","bottom"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"hash":{"keywords":["symbol","blue-square","twitter"],"char":"#","fitzpatrick_scale":false,"category":"symbols"},"information_source":{"keywords":["blue-square","alphabet","letter"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"abc":{"keywords":["blue-square","alphabet"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"abcd":{"keywords":["blue-square","alphabet"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"capital_abcd":{"keywords":["alphabet","words","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"symbols":{"keywords":["blue-square","music","note","ampersand","percent","glyphs","characters"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"musical_note":{"keywords":["score","tone","sound"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"notes":{"keywords":["music","score"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"wavy_dash":{"keywords":["draw","line","moustache","mustache","squiggle","scribble"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"curly_loop":{"keywords":["scribble","draw","shape","squiggle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heavy_check_mark":{"keywords":["ok","nike","answer","yes","tick"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"arrows_clockwise":{"keywords":["sync","cycle","round","repeat"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heavy_plus_sign":{"keywords":["math","calculation","addition","more","increase"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heavy_minus_sign":{"keywords":["math","calculation","subtract","less"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heavy_division_sign":{"keywords":["divide","math","calculation"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heavy_multiplication_x":{"keywords":["math","calculation"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"infinity":{"keywords":["forever"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"heavy_dollar_sign":{"keywords":["money","sales","payment","currency","buck"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"currency_exchange":{"keywords":["money","sales","dollar","travel"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"copyright":{"keywords":["ip","license","circle","law","legal"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"registered":{"keywords":["alphabet","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"tm":{"keywords":["trademark","brand","law","legal"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"end":{"keywords":["words","arrow"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"back":{"keywords":["arrow","words","return"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"on":{"keywords":["arrow","words"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"top":{"keywords":["words","blue-square"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"soon":{"keywords":["arrow","words"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"ballot_box_with_check":{"keywords":["ok","agree","confirm","black-square","vote","election","yes","tick"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"radio_button":{"keywords":["input","old","music","circle"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_circle":{"keywords":["shape","round"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_circle":{"keywords":["shape","button","round"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"red_circle":{"keywords":["shape","error","danger"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"large_blue_circle":{"keywords":["shape","icon","button"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"small_orange_diamond":{"keywords":["shape","jewel","gem"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"small_blue_diamond":{"keywords":["shape","jewel","gem"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"large_orange_diamond":{"keywords":["shape","jewel","gem"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"large_blue_diamond":{"keywords":["shape","jewel","gem"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"small_red_triangle":{"keywords":["shape","direction","up","top"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_small_square":{"keywords":["shape","icon"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_small_square":{"keywords":["shape","icon"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_large_square":{"keywords":["shape","icon","button"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_large_square":{"keywords":["shape","icon","stone","button"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"small_red_triangle_down":{"keywords":["shape","direction","bottom"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_medium_square":{"keywords":["shape","button","icon"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_medium_square":{"keywords":["shape","stone","icon"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_medium_small_square":{"keywords":["icon","shape","button"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_medium_small_square":{"keywords":["shape","stone","icon","button"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_square_button":{"keywords":["shape","input","frame"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"white_square_button":{"keywords":["shape","input"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"speaker":{"keywords":["sound","volume","silence","broadcast"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"sound":{"keywords":["volume","speaker","broadcast"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"loud_sound":{"keywords":["volume","noise","noisy","speaker","broadcast"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"mute":{"keywords":["sound","volume","silence","quiet"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"mega":{"keywords":["sound","speaker","volume"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"loudspeaker":{"keywords":["volume","sound"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"bell":{"keywords":["sound","notification","christmas","xmas","chime"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"no_bell":{"keywords":["sound","volume","mute","quiet","silent"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"black_joker":{"keywords":["poker","cards","game","play","magic"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"mahjong":{"keywords":["game","play","chinese","kanji"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"spades":{"keywords":["poker","cards","suits","magic"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clubs":{"keywords":["poker","cards","magic","suits"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"hearts":{"keywords":["poker","cards","magic","suits"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"diamonds":{"keywords":["poker","cards","magic","suits"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"flower_playing_cards":{"keywords":["game","sunset","red"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"thought_balloon":{"keywords":["bubble","cloud","speech","thinking","dream"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"right_anger_bubble":{"keywords":["caption","speech","thinking","mad"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"speech_balloon":{"keywords":["bubble","words","message","talk","chatting"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"left_speech_bubble":{"keywords":["words","message","talk","chatting"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock1":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock2":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock3":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock4":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock5":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock6":{"keywords":["time","late","early","schedule","dawn","dusk"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock7":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock8":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock9":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock10":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock11":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock12":{"keywords":["time","noon","midnight","midday","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock130":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock230":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock330":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock430":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock530":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock630":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock730":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock830":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock930":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock1030":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock1130":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"clock1230":{"keywords":["time","late","early","schedule"],"char":"","fitzpatrick_scale":false,"category":"symbols"},"afghanistan":{"keywords":["af","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"aland_islands":{"keywords":["land","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"albania":{"keywords":["al","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"algeria":{"keywords":["dz","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"american_samoa":{"keywords":["american","ws","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"andorra":{"keywords":["ad","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"angola":{"keywords":["ao","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"anguilla":{"keywords":["ai","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"antarctica":{"keywords":["aq","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"antigua_barbuda":{"keywords":["antigua","barbuda","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"argentina":{"keywords":["ar","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"armenia":{"keywords":["am","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"aruba":{"keywords":["aw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"australia":{"keywords":["au","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"austria":{"keywords":["at","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"azerbaijan":{"keywords":["az","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bahamas":{"keywords":["bs","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bahrain":{"keywords":["bh","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bangladesh":{"keywords":["bd","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"barbados":{"keywords":["bb","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"belarus":{"keywords":["by","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"belgium":{"keywords":["be","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"belize":{"keywords":["bz","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"benin":{"keywords":["bj","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bermuda":{"keywords":["bm","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bhutan":{"keywords":["bt","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bolivia":{"keywords":["bo","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"caribbean_netherlands":{"keywords":["bonaire","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bosnia_herzegovina":{"keywords":["bosnia","herzegovina","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"botswana":{"keywords":["bw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"brazil":{"keywords":["br","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"british_indian_ocean_territory":{"keywords":["british","indian","ocean","territory","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"british_virgin_islands":{"keywords":["british","virgin","islands","bvi","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"brunei":{"keywords":["bn","darussalam","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"bulgaria":{"keywords":["bg","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"burkina_faso":{"keywords":["burkina","faso","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"burundi":{"keywords":["bi","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cape_verde":{"keywords":["cabo","verde","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cambodia":{"keywords":["kh","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cameroon":{"keywords":["cm","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"canada":{"keywords":["ca","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"canary_islands":{"keywords":["canary","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cayman_islands":{"keywords":["cayman","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"central_african_republic":{"keywords":["central","african","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"chad":{"keywords":["td","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"chile":{"keywords":["flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cn":{"keywords":["china","chinese","prc","flag","country","nation","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"christmas_island":{"keywords":["christmas","island","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cocos_islands":{"keywords":["cocos","keeling","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"colombia":{"keywords":["co","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"comoros":{"keywords":["km","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"congo_brazzaville":{"keywords":["congo","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"congo_kinshasa":{"keywords":["congo","democratic","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cook_islands":{"keywords":["cook","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"costa_rica":{"keywords":["costa","rica","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"croatia":{"keywords":["hr","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cuba":{"keywords":["cu","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"curacao":{"keywords":["curaao","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cyprus":{"keywords":["cy","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"czech_republic":{"keywords":["cz","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"denmark":{"keywords":["dk","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"djibouti":{"keywords":["dj","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"dominica":{"keywords":["dm","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"dominican_republic":{"keywords":["dominican","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"ecuador":{"keywords":["ec","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"egypt":{"keywords":["eg","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"el_salvador":{"keywords":["el","salvador","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"equatorial_guinea":{"keywords":["equatorial","gn","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"eritrea":{"keywords":["er","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"estonia":{"keywords":["ee","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"ethiopia":{"keywords":["et","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"eu":{"keywords":["european","union","flag","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"falkland_islands":{"keywords":["falkland","islands","malvinas","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"faroe_islands":{"keywords":["faroe","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"fiji":{"keywords":["fj","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"finland":{"keywords":["fi","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"fr":{"keywords":["banner","flag","nation","france","french","country"],"char":"","fitzpatrick_scale":false,"category":"flags"},"french_guiana":{"keywords":["french","guiana","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"french_polynesia":{"keywords":["french","polynesia","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"french_southern_territories":{"keywords":["french","southern","territories","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"gabon":{"keywords":["ga","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"gambia":{"keywords":["gm","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"georgia":{"keywords":["ge","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"de":{"keywords":["german","nation","flag","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"ghana":{"keywords":["gh","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"gibraltar":{"keywords":["gi","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"greece":{"keywords":["gr","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"greenland":{"keywords":["gl","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"grenada":{"keywords":["gd","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"guadeloupe":{"keywords":["gp","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"guam":{"keywords":["gu","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"guatemala":{"keywords":["gt","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"guernsey":{"keywords":["gg","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"guinea":{"keywords":["gn","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"guinea_bissau":{"keywords":["gw","bissau","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"guyana":{"keywords":["gy","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"haiti":{"keywords":["ht","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"honduras":{"keywords":["hn","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"hong_kong":{"keywords":["hong","kong","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"hungary":{"keywords":["hu","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"iceland":{"keywords":["is","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"india":{"keywords":["in","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"indonesia":{"keywords":["flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"iran":{"keywords":["iran,","islamic","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"iraq":{"keywords":["iq","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"ireland":{"keywords":["ie","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"isle_of_man":{"keywords":["isle","man","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"israel":{"keywords":["il","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"it":{"keywords":["italy","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"cote_divoire":{"keywords":["ivory","coast","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"jamaica":{"keywords":["jm","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"jp":{"keywords":["japanese","nation","flag","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"jersey":{"keywords":["je","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"jordan":{"keywords":["jo","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"kazakhstan":{"keywords":["kz","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"kenya":{"keywords":["ke","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"kiribati":{"keywords":["ki","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"kosovo":{"keywords":["xk","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"kuwait":{"keywords":["kw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"kyrgyzstan":{"keywords":["kg","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"laos":{"keywords":["lao","democratic","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"latvia":{"keywords":["lv","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"lebanon":{"keywords":["lb","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"lesotho":{"keywords":["ls","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"liberia":{"keywords":["lr","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"libya":{"keywords":["ly","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"liechtenstein":{"keywords":["li","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"lithuania":{"keywords":["lt","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"luxembourg":{"keywords":["lu","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"macau":{"keywords":["macao","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"macedonia":{"keywords":["macedonia,","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"madagascar":{"keywords":["mg","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"malawi":{"keywords":["mw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"malaysia":{"keywords":["my","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"maldives":{"keywords":["mv","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"mali":{"keywords":["ml","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"malta":{"keywords":["mt","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"marshall_islands":{"keywords":["marshall","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"martinique":{"keywords":["mq","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"mauritania":{"keywords":["mr","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"mauritius":{"keywords":["mu","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"mayotte":{"keywords":["yt","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"mexico":{"keywords":["mx","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"micronesia":{"keywords":["micronesia,","federated","states","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"moldova":{"keywords":["moldova,","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"monaco":{"keywords":["mc","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"mongolia":{"keywords":["mn","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"montenegro":{"keywords":["me","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"montserrat":{"keywords":["ms","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"morocco":{"keywords":["ma","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"mozambique":{"keywords":["mz","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"myanmar":{"keywords":["mm","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"namibia":{"keywords":["na","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"nauru":{"keywords":["nr","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"nepal":{"keywords":["np","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"netherlands":{"keywords":["nl","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"new_caledonia":{"keywords":["new","caledonia","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"new_zealand":{"keywords":["new","zealand","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"nicaragua":{"keywords":["ni","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"niger":{"keywords":["ne","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"nigeria":{"keywords":["flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"niue":{"keywords":["nu","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"norfolk_island":{"keywords":["norfolk","island","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"northern_mariana_islands":{"keywords":["northern","mariana","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"north_korea":{"keywords":["north","korea","nation","flag","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"norway":{"keywords":["no","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"oman":{"keywords":["om_symbol","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"pakistan":{"keywords":["pk","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"palau":{"keywords":["pw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"palestinian_territories":{"keywords":["palestine","palestinian","territories","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"panama":{"keywords":["pa","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"papua_new_guinea":{"keywords":["papua","new","guinea","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"paraguay":{"keywords":["py","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"peru":{"keywords":["pe","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"philippines":{"keywords":["ph","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"pitcairn_islands":{"keywords":["pitcairn","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"poland":{"keywords":["pl","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"portugal":{"keywords":["pt","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"puerto_rico":{"keywords":["puerto","rico","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"qatar":{"keywords":["qa","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"reunion":{"keywords":["runion","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"romania":{"keywords":["ro","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"ru":{"keywords":["russian","federation","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"rwanda":{"keywords":["rw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"st_barthelemy":{"keywords":["saint","barthlemy","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"st_helena":{"keywords":["saint","helena","ascension","tristan","cunha","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"st_kitts_nevis":{"keywords":["saint","kitts","nevis","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"st_lucia":{"keywords":["saint","lucia","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"st_pierre_miquelon":{"keywords":["saint","pierre","miquelon","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"st_vincent_grenadines":{"keywords":["saint","vincent","grenadines","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"samoa":{"keywords":["ws","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"san_marino":{"keywords":["san","marino","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"sao_tome_principe":{"keywords":["sao","tome","principe","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"saudi_arabia":{"keywords":["flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"senegal":{"keywords":["sn","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"serbia":{"keywords":["rs","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"seychelles":{"keywords":["sc","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"sierra_leone":{"keywords":["sierra","leone","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"singapore":{"keywords":["sg","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"sint_maarten":{"keywords":["sint","maarten","dutch","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"slovakia":{"keywords":["sk","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"slovenia":{"keywords":["si","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"solomon_islands":{"keywords":["solomon","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"somalia":{"keywords":["so","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"south_africa":{"keywords":["south","africa","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"south_georgia_south_sandwich_islands":{"keywords":["south","georgia","sandwich","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"kr":{"keywords":["south","korea","nation","flag","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"south_sudan":{"keywords":["south","sd","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"es":{"keywords":["spain","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"sri_lanka":{"keywords":["sri","lanka","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"sudan":{"keywords":["sd","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"suriname":{"keywords":["sr","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"swaziland":{"keywords":["sz","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"sweden":{"keywords":["se","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"switzerland":{"keywords":["ch","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"syria":{"keywords":["syrian","arab","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"taiwan":{"keywords":["tw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"tajikistan":{"keywords":["tj","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"tanzania":{"keywords":["tanzania,","united","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"thailand":{"keywords":["th","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"timor_leste":{"keywords":["timor","leste","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"togo":{"keywords":["tg","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"tokelau":{"keywords":["tk","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"tonga":{"keywords":["to","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"trinidad_tobago":{"keywords":["trinidad","tobago","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"tunisia":{"keywords":["tn","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"tr":{"keywords":["turkey","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"turkmenistan":{"keywords":["flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"turks_caicos_islands":{"keywords":["turks","caicos","islands","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"tuvalu":{"keywords":["flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"uganda":{"keywords":["ug","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"ukraine":{"keywords":["ua","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"united_arab_emirates":{"keywords":["united","arab","emirates","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"uk":{"keywords":["united","kingdom","great","britain","northern","ireland","flag","nation","country","banner","british","UK","english","england","union jack"],"char":"","fitzpatrick_scale":false,"category":"flags"},"england":{"keywords":["flag","english"],"char":"","fitzpatrick_scale":false,"category":"flags"},"scotland":{"keywords":["flag","scottish"],"char":"","fitzpatrick_scale":false,"category":"flags"},"wales":{"keywords":["flag","welsh"],"char":"","fitzpatrick_scale":false,"category":"flags"},"us":{"keywords":["united","states","america","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"us_virgin_islands":{"keywords":["virgin","islands","us","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"uruguay":{"keywords":["uy","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"uzbekistan":{"keywords":["uz","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"vanuatu":{"keywords":["vu","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"vatican_city":{"keywords":["vatican","city","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"venezuela":{"keywords":["ve","bolivarian","republic","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"vietnam":{"keywords":["viet","nam","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"wallis_futuna":{"keywords":["wallis","futuna","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"western_sahara":{"keywords":["western","sahara","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"yemen":{"keywords":["ye","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"zambia":{"keywords":["zm","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"zimbabwe":{"keywords":["zw","flag","nation","country","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"united_nations":{"keywords":["un","flag","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"},"pirate_flag":{"keywords":["skull","crossbones","flag","banner"],"char":"","fitzpatrick_scale":false,"category":"flags"}}')},62:e=>{"use strict";e.exports=JSON.parse('["grinning","smiley","smile","grin","laughing","sweat_smile","joy","rofl","relaxed","blush","innocent","slightly_smiling_face","upside_down_face","wink","relieved","heart_eyes","smiling_face_with_three_hearts","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","yum","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","zany","raised_eyebrow","monocle","nerd_face","sunglasses","star_struck","partying","smirk","unamused","disappointed","pensive","worried","confused","slightly_frowning_face","frowning_face","persevere","confounded","tired_face","weary","pleading","cry","sob","triumph","angry","rage","symbols_over_mouth","exploding_head","flushed","hot","cold","scream","fearful","cold_sweat","disappointed_relieved","sweat","hugs","thinking","hand_over_mouth","shushing","lying_face","no_mouth","neutral_face","expressionless","grimacing","roll_eyes","hushed","frowning","anguished","open_mouth","astonished","sleeping","drooling_face","sleepy","dizzy_face","zipper_mouth_face","woozy","nauseated_face","vomiting","sneezing_face","mask","face_with_thermometer","face_with_head_bandage","money_mouth_face","cowboy_hat_face","smiling_imp","imp","japanese_ogre","japanese_goblin","clown_face","poop","ghost","skull","skull_and_crossbones","alien","space_invader","robot","jack_o_lantern","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","palms_up","open_hands","raised_hands","clap","handshake","+1","-1","facepunch","fist","fist_left","fist_right","crossed_fingers","v","love_you","metal","ok_hand","point_left","point_right","point_up","point_down","point_up_2","raised_hand","raised_back_of_hand","raised_hand_with_fingers_splayed","vulcan_salute","wave","call_me_hand","muscle","fu","writing_hand","pray","foot","leg","ring","lipstick","kiss","lips","tooth","tongue","ear","nose","footprints","eye","eyes","brain","speaking_head","bust_in_silhouette","busts_in_silhouette","baby","girl","child","boy","woman","adult","man","blonde_woman","blonde_man","bearded_person","older_woman","older_adult","older_man","man_with_gua_pi_mao","woman_with_headscarf","woman_with_turban","man_with_turban","policewoman","policeman","construction_worker_woman","construction_worker_man","guardswoman","guardsman","female_detective","male_detective","woman_health_worker","man_health_worker","woman_farmer","man_farmer","woman_cook","man_cook","woman_student","man_student","woman_singer","man_singer","woman_teacher","man_teacher","woman_factory_worker","man_factory_worker","woman_technologist","man_technologist","woman_office_worker","man_office_worker","woman_mechanic","man_mechanic","woman_scientist","man_scientist","woman_artist","man_artist","woman_firefighter","man_firefighter","woman_pilot","man_pilot","woman_astronaut","man_astronaut","woman_judge","man_judge","bride_with_veil","man_in_tuxedo","princess","prince","woman_superhero","man_superhero","woman_supervillain","man_supervillain","mrs_claus","santa","sorceress","wizard","woman_elf","man_elf","woman_vampire","man_vampire","woman_zombie","man_zombie","woman_genie","man_genie","mermaid","merman","woman_fairy","man_fairy","angel","pregnant_woman","breastfeeding","bowing_woman","bowing_man","tipping_hand_woman","tipping_hand_man","no_good_woman","no_good_man","ok_woman","ok_man","raising_hand_woman","raising_hand_man","woman_facepalming","man_facepalming","woman_shrugging","man_shrugging","pouting_woman","pouting_man","frowning_woman","frowning_man","haircut_woman","haircut_man","massage_woman","massage_man","woman_in_steamy_room","man_in_steamy_room","nail_care","selfie","dancer","man_dancing","dancing_women","dancing_men","business_suit_levitating","walking_woman","walking_man","running_woman","running_man","couple","two_women_holding_hands","two_men_holding_hands","couple_with_heart_woman_man","couple_with_heart_woman_woman","couple_with_heart_man_man","couplekiss_man_woman","couplekiss_woman_woman","couplekiss_man_man","family_man_woman_boy","family_man_woman_girl","family_man_woman_girl_boy","family_man_woman_boy_boy","family_man_woman_girl_girl","family_woman_woman_boy","family_woman_woman_girl","family_woman_woman_girl_boy","family_woman_woman_boy_boy","family_woman_woman_girl_girl","family_man_man_boy","family_man_man_girl","family_man_man_girl_boy","family_man_man_boy_boy","family_man_man_girl_girl","family_woman_boy","family_woman_girl","family_woman_girl_boy","family_woman_boy_boy","family_woman_girl_girl","family_man_boy","family_man_girl","family_man_girl_boy","family_man_boy_boy","family_man_girl_girl","yarn","thread","coat","labcoat","womans_clothes","tshirt","jeans","necktie","dress","bikini","kimono","flat_shoe","high_heel","sandal","boot","mans_shoe","athletic_shoe","hiking_boot","socks","gloves","scarf","tophat","billed_hat","womans_hat","mortar_board","rescue_worker_helmet","crown","pouch","purse","handbag","briefcase","school_satchel","luggage","eyeglasses","dark_sunglasses","goggles","closed_umbrella","dog","cat","mouse","hamster","rabbit","fox_face","bear","panda_face","koala","tiger","lion","cow","pig","pig_nose","frog","monkey_face","see_no_evil","hear_no_evil","speak_no_evil","monkey","chicken","penguin","bird","baby_chick","hatching_chick","hatched_chick","duck","eagle","owl","bat","wolf","boar","horse","unicorn","honeybee","bug","butterfly","snail","shell","beetle","ant","mosquito","grasshopper","spider","spider_web","scorpion","turtle","snake","lizard","t-rex","sauropod","octopus","squid","shrimp","lobster","crab","blowfish","tropical_fish","fish","dolphin","whale","whale2","shark","crocodile","tiger2","leopard","zebra","gorilla","elephant","hippopotamus","rhinoceros","dromedary_camel","giraffe","kangaroo","camel","water_buffalo","ox","cow2","racehorse","pig2","ram","sheep","llama","goat","deer","dog2","poodle","cat2","rooster","turkey","peacock","parrot","swan","dove","rabbit2","raccoon","badger","rat","mouse2","chipmunk","hedgehog","paw_prints","dragon","dragon_face","cactus","christmas_tree","evergreen_tree","deciduous_tree","palm_tree","seedling","herb","shamrock","four_leaf_clover","bamboo","tanabata_tree","leaves","fallen_leaf","maple_leaf","ear_of_rice","hibiscus","sunflower","rose","wilted_flower","tulip","blossom","cherry_blossom","bouquet","mushroom","earth_americas","earth_africa","earth_asia","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","new_moon_with_face","full_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","sun_with_face","crescent_moon","star","star2","dizzy","sparkles","comet","sunny","sun_behind_small_cloud","partly_sunny","sun_behind_large_cloud","sun_behind_rain_cloud","cloud","cloud_with_rain","cloud_with_lightning_and_rain","cloud_with_lightning","zap","fire","boom","snowflake","cloud_with_snow","snowman","snowman_with_snow","wind_face","dash","tornado","fog","open_umbrella","umbrella","droplet","sweat_drops","ocean","green_apple","apple","pear","tangerine","lemon","banana","watermelon","grapes","strawberry","melon","cherries","peach","mango","pineapple","coconut","kiwi_fruit","tomato","eggplant","avocado","broccoli","leafy_greens","cucumber","hot_pepper","corn","carrot","potato","sweet_potato","croissant","bagel","bread","baguette_bread","pretzel","cheese","egg","fried_egg","pancakes","bacon","steak","poultry_leg","meat_on_bone","bone","hotdog","hamburger","fries","pizza","sandwich","stuffed_flatbread","taco","burrito","green_salad","shallow_pan_of_food","canned_food","spaghetti","ramen","stew","curry","sushi","bento","fried_shrimp","rice_ball","rice","rice_cracker","fish_cake","fortune_cookie","moon_cake","oden","dango","shaved_ice","ice_cream","icecream","pie","cupcake","cake","birthday","custard","lollipop","candy","chocolate_bar","popcorn","doughnut","dumpling","cookie","chestnut","peanuts","honey_pot","milk_glass","baby_bottle","coffee","tea","cup_with_straw","sake","beer","beers","clinking_glasses","wine_glass","tumbler_glass","cocktail","tropical_drink","champagne","spoon","fork_and_knife","plate_with_cutlery","bowl_with_spoon","takeout_box","chopsticks","salt","soccer","basketball","football","baseball","softball","tennis","volleyball","rugby_football","flying_disc","8ball","golf","golfing_woman","golfing_man","ping_pong","badminton","goal_net","ice_hockey","field_hockey","lacrosse","cricket","ski","skier","snowboarder","person_fencing","women_wrestling","men_wrestling","woman_cartwheeling","man_cartwheeling","woman_playing_handball","man_playing_handball","ice_skate","curling_stone","skateboard","sled","bow_and_arrow","fishing_pole_and_fish","boxing_glove","martial_arts_uniform","rowing_woman","rowing_man","climbing_woman","climbing_man","swimming_woman","swimming_man","woman_playing_water_polo","man_playing_water_polo","woman_in_lotus_position","man_in_lotus_position","surfing_woman","surfing_man","basketball_woman","basketball_man","weight_lifting_woman","weight_lifting_man","biking_woman","biking_man","mountain_biking_woman","mountain_biking_man","horse_racing","trophy","running_shirt_with_sash","medal_sports","medal_military","1st_place_medal","2nd_place_medal","3rd_place_medal","reminder_ribbon","rosette","ticket","tickets","performing_arts","art","circus_tent","woman_juggling","man_juggling","microphone","headphones","musical_score","musical_keyboard","drum","saxophone","trumpet","guitar","violin","clapper","video_game","dart","game_die","chess_pawn","slot_machine","jigsaw","bowling","red_car","taxi","blue_car","bus","trolleybus","racing_car","police_car","ambulance","fire_engine","minibus","truck","articulated_lorry","tractor","kick_scooter","motorcycle","bike","motor_scooter","rotating_light","oncoming_police_car","oncoming_bus","oncoming_automobile","oncoming_taxi","aerial_tramway","mountain_cableway","suspension_railway","railway_car","train","monorail","bullettrain_side","bullettrain_front","light_rail","mountain_railway","steam_locomotive","train2","metro","tram","station","flying_saucer","helicopter","small_airplane","airplane","flight_departure","flight_arrival","sailboat","motor_boat","speedboat","ferry","passenger_ship","rocket","artificial_satellite","seat","canoe","anchor","construction","fuelpump","busstop","vertical_traffic_light","traffic_light","ship","ferris_wheel","roller_coaster","carousel_horse","building_construction","foggy","tokyo_tower","factory","fountain","rice_scene","mountain","mountain_snow","mount_fuji","volcano","japan","camping","tent","national_park","motorway","railway_track","sunrise","sunrise_over_mountains","desert","beach_umbrella","desert_island","city_sunrise","city_sunset","cityscape","night_with_stars","bridge_at_night","milky_way","stars","sparkler","fireworks","rainbow","houses","european_castle","japanese_castle","stadium","statue_of_liberty","house","house_with_garden","derelict_house","office","department_store","post_office","european_post_office","hospital","bank","hotel","convenience_store","school","love_hotel","wedding","classical_building","church","mosque","synagogue","kaaba","shinto_shrine","watch","iphone","calling","computer","keyboard","desktop_computer","printer","computer_mouse","trackball","joystick","clamp","minidisc","floppy_disk","cd","dvd","vhs","camera","camera_flash","video_camera","movie_camera","film_projector","film_strip","telephone_receiver","phone","pager","fax","tv","radio","studio_microphone","level_slider","control_knobs","compass","stopwatch","timer_clock","alarm_clock","mantelpiece_clock","hourglass_flowing_sand","hourglass","satellite","battery","electric_plug","bulb","flashlight","candle","fire_extinguisher","wastebasket","oil_drum","money_with_wings","dollar","yen","euro","pound","moneybag","credit_card","gem","balance_scale","toolbox","wrench","hammer","hammer_and_pick","hammer_and_wrench","pick","nut_and_bolt","gear","brick","chains","magnet","gun","bomb","firecracker","hocho","dagger","crossed_swords","shield","smoking","coffin","funeral_urn","amphora","crystal_ball","prayer_beads","nazar_amulet","barber","alembic","telescope","microscope","hole","pill","syringe","dna","microbe","petri_dish","test_tube","thermometer","broom","basket","toilet_paper","label","bookmark","toilet","shower","bathtub","bath","soap","sponge","lotion_bottle","key","old_key","couch_and_lamp","sleeping_bed","bed","door","bellhop_bell","teddy_bear","framed_picture","world_map","parasol_on_ground","moyai","shopping","shopping_cart","balloon","flags","ribbon","gift","confetti_ball","tada","dolls","wind_chime","crossed_flags","izakaya_lantern","red_envelope","email","envelope_with_arrow","incoming_envelope","e-mail","love_letter","postbox","mailbox_closed","mailbox","mailbox_with_mail","mailbox_with_no_mail","package","postal_horn","inbox_tray","outbox_tray","scroll","page_with_curl","bookmark_tabs","receipt","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","page_facing_up","date","calendar","spiral_calendar","card_index","card_file_box","ballot_box","file_cabinet","clipboard","spiral_notepad","file_folder","open_file_folder","card_index_dividers","newspaper_roll","newspaper","notebook","closed_book","green_book","blue_book","orange_book","notebook_with_decorative_cover","ledger","books","open_book","safety_pin","link","paperclip","paperclips","scissors","triangular_ruler","straight_ruler","abacus","pushpin","round_pushpin","closed_lock_with_key","lock","unlock","lock_with_ink_pen","pen","fountain_pen","black_nib","memo","pencil2","crayon","paintbrush","mag","mag_right","heart","orange_heart","yellow_heart","green_heart","blue_heart","purple_heart","black_heart","broken_heart","heavy_heart_exclamation","two_hearts","revolving_hearts","heartbeat","heartpulse","sparkling_heart","cupid","gift_heart","heart_decoration","peace_symbol","latin_cross","star_and_crescent","om","wheel_of_dharma","star_of_david","six_pointed_star","menorah","yin_yang","orthodox_cross","place_of_worship","ophiuchus","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","id","atom_symbol","u7a7a","u5272","radioactive","biohazard","mobile_phone_off","vibration_mode","u6709","u7121","u7533","u55b6","u6708","eight_pointed_black_star","vs","accept","white_flower","ideograph_advantage","secret","congratulations","u5408","u6e80","u7981","a","b","ab","cl","o2","sos","no_entry","name_badge","no_entry_sign","x","o","stop_sign","anger","hotsprings","no_pedestrians","do_not_litter","no_bicycles","non-potable_water","underage","no_mobile_phones","exclamation","grey_exclamation","question","grey_question","bangbang","interrobang","100","low_brightness","high_brightness","trident","fleur_de_lis","part_alternation_mark","warning","children_crossing","beginner","recycle","u6307","chart","sparkle","eight_spoked_asterisk","negative_squared_cross_mark","white_check_mark","diamond_shape_with_a_dot_inside","cyclone","loop","globe_with_meridians","m","atm","zzz","sa","passport_control","customs","baggage_claim","left_luggage","wheelchair","no_smoking","wc","parking","potable_water","mens","womens","baby_symbol","restroom","put_litter_in_its_place","cinema","signal_strength","koko","ng","ok","up","cool","new","free","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","asterisk","1234","eject_button","arrow_forward","pause_button","next_track_button","stop_button","record_button","play_or_pause_button","previous_track_button","fast_forward","rewind","twisted_rightwards_arrows","repeat","repeat_one","arrow_backward","arrow_up_small","arrow_down_small","arrow_double_up","arrow_double_down","arrow_right","arrow_left","arrow_up","arrow_down","arrow_upper_right","arrow_lower_right","arrow_lower_left","arrow_upper_left","arrow_up_down","left_right_arrow","arrows_counterclockwise","arrow_right_hook","leftwards_arrow_with_hook","arrow_heading_up","arrow_heading_down","hash","information_source","abc","abcd","capital_abcd","symbols","musical_note","notes","wavy_dash","curly_loop","heavy_check_mark","arrows_clockwise","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","heavy_multiplication_x","infinity","heavy_dollar_sign","currency_exchange","copyright","registered","tm","end","back","on","top","soon","ballot_box_with_check","radio_button","white_circle","black_circle","red_circle","large_blue_circle","small_orange_diamond","small_blue_diamond","large_orange_diamond","large_blue_diamond","small_red_triangle","black_small_square","white_small_square","black_large_square","white_large_square","small_red_triangle_down","black_medium_square","white_medium_square","black_medium_small_square","white_medium_small_square","black_square_button","white_square_button","speaker","sound","loud_sound","mute","mega","loudspeaker","bell","no_bell","black_joker","mahjong","spades","clubs","hearts","diamonds","flower_playing_cards","thought_balloon","right_anger_bubble","speech_balloon","left_speech_bubble","clock1","clock2","clock3","clock4","clock5","clock6","clock7","clock8","clock9","clock10","clock11","clock12","clock130","clock230","clock330","clock430","clock530","clock630","clock730","clock830","clock930","clock1030","clock1130","clock1230","white_flag","black_flag","pirate_flag","checkered_flag","triangular_flag_on_post","rainbow_flag","united_nations","afghanistan","aland_islands","albania","algeria","american_samoa","andorra","angola","anguilla","antarctica","antigua_barbuda","argentina","armenia","aruba","australia","austria","azerbaijan","bahamas","bahrain","bangladesh","barbados","belarus","belgium","belize","benin","bermuda","bhutan","bolivia","caribbean_netherlands","bosnia_herzegovina","botswana","brazil","british_indian_ocean_territory","british_virgin_islands","brunei","bulgaria","burkina_faso","burundi","cape_verde","cambodia","cameroon","canada","canary_islands","cayman_islands","central_african_republic","chad","chile","cn","christmas_island","cocos_islands","colombia","comoros","congo_brazzaville","congo_kinshasa","cook_islands","costa_rica","croatia","cuba","curacao","cyprus","czech_republic","denmark","djibouti","dominica","dominican_republic","ecuador","egypt","el_salvador","equatorial_guinea","eritrea","estonia","ethiopia","eu","falkland_islands","faroe_islands","fiji","finland","fr","french_guiana","french_polynesia","french_southern_territories","gabon","gambia","georgia","de","ghana","gibraltar","greece","greenland","grenada","guadeloupe","guam","guatemala","guernsey","guinea","guinea_bissau","guyana","haiti","honduras","hong_kong","hungary","iceland","india","indonesia","iran","iraq","ireland","isle_of_man","israel","it","cote_divoire","jamaica","jp","jersey","jordan","kazakhstan","kenya","kiribati","kosovo","kuwait","kyrgyzstan","laos","latvia","lebanon","lesotho","liberia","libya","liechtenstein","lithuania","luxembourg","macau","macedonia","madagascar","malawi","malaysia","maldives","mali","malta","marshall_islands","martinique","mauritania","mauritius","mayotte","mexico","micronesia","moldova","monaco","mongolia","montenegro","montserrat","morocco","mozambique","myanmar","namibia","nauru","nepal","netherlands","new_caledonia","new_zealand","nicaragua","niger","nigeria","niue","norfolk_island","northern_mariana_islands","north_korea","norway","oman","pakistan","palau","palestinian_territories","panama","papua_new_guinea","paraguay","peru","philippines","pitcairn_islands","poland","portugal","puerto_rico","qatar","reunion","romania","ru","rwanda","st_barthelemy","st_helena","st_kitts_nevis","st_lucia","st_pierre_miquelon","st_vincent_grenadines","samoa","san_marino","sao_tome_principe","saudi_arabia","senegal","serbia","seychelles","sierra_leone","singapore","sint_maarten","slovakia","slovenia","solomon_islands","somalia","south_africa","south_georgia_south_sandwich_islands","kr","south_sudan","es","sri_lanka","sudan","suriname","swaziland","sweden","switzerland","syria","taiwan","tajikistan","tanzania","thailand","timor_leste","togo","tokelau","tonga","trinidad_tobago","tunisia","tr","turkmenistan","turks_caicos_islands","tuvalu","uganda","ukraine","united_arab_emirates","uk","england","scotland","wales","us","us_virgin_islands","uruguay","uzbekistan","vanuatu","vatican_city","venezuela","vietnam","wallis_futuna","western_sahara","yemen","zambia","zimbabwe"]')}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),"http://localhost:3000/report"==document.location.href||"http://localhost:3000/report/"==document.location.href||"https://st-collab.vercel.app/report"==document.location.href||"https://st-collab.vercel.app/report/"==document.location.href||async function(){null!=localStorage.getItem("joinCode")&&null!=localStorage.getItem("username")||(document.location.href="/app/");const e=["Eine native Windows App ist nun verfgbar. Klicke <a href='https://drive.google.com/file/d/1VL-dlHUPc1oMNSTZ5LBxgoxufSI3p57s/view?usp=sharing'>hier</a> um sie herunterzuladen.","btw opensource <a href='https://github.com/StoppedwummPython/st-collab'>github</a>"],t=a(660),r=a(944),n=a(246),o=a(923),s=a(733),i=a(890),c=a(376);if(console.log(localStorage.getItem("joinCode").startsWith("unban_")),"1"==s.get("ban")&&!localStorage.getItem("joinCode").startsWith("unban_"))throw document.location.href="/app/ban",new Error("Banned");n.migrateBadge();const l=document.getElementById("messages");for(const t of e){const e="System <img src='/app/chat/verified-icon.png' width='10'>: "+t;let a=document.createElement("li");a.innerHTML=e,l.appendChild(a),window.scrollTo(0,document.body.scrollHeight)}const u=await n.grabBadgeList();document.title="Chat Room "+localStorage.getItem("joinCode"),o.onLocalUserJoin(localStorage.getItem("joinCode")),await c();const f=new t.Realtime("bmNR6g.0jlirQ:NXb8iirOKUJehTMW3Pxb-hVPEFJfo2L2-8uPiMj140w");let h,d=!1;for(f.connection.once("connected",(()=>{d=!0}));!d;)await new Promise(((e,t)=>{setTimeout((()=>{e(250)}),250)}));h=f.channels.get("chat_"+localStorage.getItem("joinCode"));const p=await fetch("/dev");await a(89)(h,l),p.ok&&fetch("/dev/listen?channel="+localStorage.getItem("joinCode")),await h.subscribe("chat",(async e=>{const t=new String(e.data);o.onMessage(t);let a=document.createElement("li");a.innerHTML=t,l.appendChild(a),window.scrollTo(0,document.body.scrollHeight)})),await h.subscribe("connect",(async e=>{const t=new String(e.data);o.onConnect(t);let a=document.createElement("li");a.innerHTML=t+" joined!",l.appendChild(a),window.scrollTo(0,document.body.scrollHeight)})),await h.subscribe("disconnect",(async e=>{const t=new String(e.data);let a=document.createElement("li");a.innerHTML=t+" left!",l.appendChild(a),window.scrollTo(0,document.body.scrollHeight)})),await h.subscribe("chat_image",(e=>{const t=JSON.parse(new String(e.data));o.onMessage(t);let a=document.createElement("li");console.log(t),a.innerHTML="<p>"+t[0]+": </p><img src='"+t[1]+"'>",l.appendChild(a),window.scrollTo(0,document.body.scrollHeight)})),await h.subscribe("ban",(async e=>{console.log(e.data),localStorage.getItem("username")==e.data&&(s.set("ban","1",{expires:365}),document.location.href="/app/ban")})),await h.subscribe("unban",(async e=>{console.log(e.data),localStorage.getItem("username")==e.data&&s.set("ban","0",{expires:365})})),await h.publish("connect",localStorage.getItem("username"));let y=document.getElementById("form"),g=document.getElementById("input");y.addEventListener("submit",(async function(e){if(e.preventDefault(),o.onChat(g.value,(async e=>(await h.publish("ban",e),e)),(async e=>(await h.publish("unban",e),e))),g.value){if(null!=n.isBadgeCode(u,g.value))return n.giveBadge(n.isBadgeCode(u,g.value)),g.value="Erfolgreich!",await new Promise(((e,t)=>{setTimeout((()=>{e(1)}),5e3)})),void(g.value="");"/report"==g.value?document.location.href="/report":(n.hasBadge()?await h.publish("chat",localStorage.getItem("username")+" <img src='"+n.hasBadge()+"' width='10'> : "+i.emojify(g.value)):await h.publish("chat",localStorage.getItem("username")+": "+i.emojify(g.value)),g.value="")}})),document.getElementById("image_upload").addEventListener("click",(async()=>{console.log("Upload button pressed");const e=await r();try{await h.publish("chat_image",JSON.stringify([localStorage.getItem("username"),e]))}catch(e){alert("Datei wurde von ably verweigert, wahrscheinlich zu gro")}}))}()})();